{"ast":null,"code":"import { Animation, Browser, createElement } from '@syncfusion/ej2-base';\nimport { textElement, getValueXByPoint, stopTimer, findCrosshairDirection, getValueYByPoint, ChartLocation, withInBounds, removeElement, convertHexToColor, colorNameToHex } from '../../common/utils/helper';\nimport { PathOption, Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { ChartData } from '../../chart/utils/get-data';\n/**\n * The `Crosshair` module is used to render the crosshair for the chart.\n */\nvar Crosshair = /** @class */function () {\n  /**\n   * Constructor for crosshair module.\n   *\n   * @private\n   */\n  function Crosshair(chart) {\n    this.arrowLocation = new ChartLocation(0, 0);\n    this.rx = 2;\n    this.ry = 2;\n    this.highlightWidth = 0;\n    this.crosshairLeftOverflow = 0;\n    this.crosshairRightOverflow = 0;\n    this.chart = chart;\n    this.elementID = this.chart.element.id;\n    this.svgRenderer = new SvgRenderer(this.chart.element.id);\n    if (this.chart.crosshair.snapToData || this.chart.crosshair.highlightCategory) {\n      this.data = new ChartData(this.chart);\n    }\n    this.addEventListener();\n  }\n  /**\n   * Adds event listeners to the chart elements.\n   *\n   * @private\n   * @returns {void}\n   */\n  Crosshair.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n    this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n    this.chart.on('tapHold', this.longPress, this);\n  };\n  Crosshair.prototype.mouseUpHandler = function () {\n    if (this.chart.startMove) {\n      this.removeCrosshair(2000);\n    }\n  };\n  Crosshair.prototype.mouseLeaveHandler = function () {\n    this.removeCrosshair(1000);\n  };\n  Crosshair.prototype.mouseMoveHandler = function (event) {\n    var chart = this.chart;\n    if (chart.stockChart && chart.stockChart.onPanning) {\n      if (chart.mouseY < chart.chartAxisLayoutPanel.seriesClipRect.y) {\n        chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y;\n      } else if (chart.mouseY > chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height) {\n        chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height;\n      }\n    }\n    if (event.type === 'touchmove' && (Browser.isIos || Browser.isIos7) && chart.startMove && event.preventDefault) {\n      event.preventDefault();\n    }\n    // Tooltip for chart series.\n    if (!chart.disableTrackTooltip) {\n      if (chart.crosshair.enable && withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n        if (chart.startMove || !chart.isTouch) {\n          this.crosshair();\n        }\n      } else {\n        this.removeCrosshair(1000);\n      }\n    }\n  };\n  /**\n   * Handles the long press on chart.\n   *\n   * @returns {boolean} false\n   * @private\n   */\n  Crosshair.prototype.longPress = function () {\n    var chart = this.chart;\n    if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n      this.crosshair();\n    }\n    return false;\n  };\n  /**\n   * Finds the data points closest to the mouse position for all visible series in the chart.\n   * Updates the `data` object with the nearest data point to be used for mouse interactions.\n   *\n   * @param {Chart} chart - The chart instance containing the visible series and mouse position.\n   * @returns {boolean} -  True if chart has atleast one visible series.\n   * @private\n   */\n  Crosshair.prototype.findMousePoints = function (chart) {\n    var data = this.data.getData();\n    var pointLocations = [];\n    var axisCoordinate = chart.isTransposed ? 'x' : 'y';\n    var nearestDataPoint = null;\n    var nearestValue = null;\n    var minDifference = Infinity; // For finding the nearest value\n    var mouseCoordinate = axisCoordinate === 'x' ? chart.mouseX : chart.mouseY;\n    var seriesVisibility = false;\n    var commonXvalues = this.data.mergeXvalues(this.chart.visibleSeries);\n    for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n      var series = _a[_i];\n      seriesVisibility = seriesVisibility ? seriesVisibility : series.visible;\n      if (series.visible && series.category !== 'TrendLine') {\n        // Get the closest X value and store the data point\n        var closestData = this.data.getClosestX(chart, series, commonXvalues) || data;\n        if (closestData && closestData.point && closestData.point.symbolLocations[0]) {\n          var pointLocation = closestData.point.symbolLocations[0][axisCoordinate] + closestData.series.clipRect[axisCoordinate];\n          if (chart.crosshair.snapToData || chart.crosshair.highlightCategory) {\n            pointLocations.push(pointLocation); // Store point locations for nearest calculation\n            // Calculate the nearest point to the mouse\n            var difference = Math.abs(pointLocation - mouseCoordinate);\n            if (difference < minDifference) {\n              minDifference = difference;\n              nearestValue = pointLocation;\n              nearestDataPoint = closestData;\n            }\n          }\n        }\n      }\n    }\n    // Use the nearest data point\n    if ((chart.crosshair.snapToData || chart.crosshair.highlightCategory) && nearestDataPoint) {\n      data = nearestDataPoint;\n      chart.crosshairModule.highlightWidth = 0;\n      if (chart.crosshair.highlightCategory && data.series.xAxis.valueType === 'Category') {\n        var clipRectSize = chart.isTransposed || chart.requireInvertedAxis ? chart.chartAxisLayoutPanel.seriesClipRect.height : chart.chartAxisLayoutPanel.seriesClipRect.width;\n        var highlightCategoryWidth = clipRectSize / data.series.xAxis.visibleRange.delta;\n        var pointRelativePosition = (data.point.xValue - data.series.xAxis.visibleRange.min) / (data.series.xAxis.visibleRange.max - data.series.xAxis.visibleRange.min);\n        chart.crosshairModule.crosshairLeftOverflow = Math.max(0, highlightCategoryWidth / 2 - pointRelativePosition * clipRectSize);\n        chart.crosshairModule.crosshairRightOverflow = Math.max(0, pointRelativePosition * clipRectSize + highlightCategoryWidth / 2 - clipRectSize);\n        chart.crosshairModule.highlightWidth = Math.max(0, highlightCategoryWidth - chart.crosshairModule.crosshairLeftOverflow - chart.crosshairModule.crosshairRightOverflow);\n      }\n    }\n    if (data && data.point) {\n      this.data.findMouseValues(data, chart, this);\n    }\n    return seriesVisibility;\n  };\n  /**\n   * Renders the crosshair.\n   *\n   * @returns {void}\n   * @private\n   */\n  Crosshair.prototype.crosshair = function () {\n    var visibleSeriesLength = this.chart.series.filter(function (series) {\n      return series.visible;\n    }).length;\n    var seriesVisible = true;\n    if (this.chart.crosshair.snapToData || this.chart.crosshair.highlightCategory) {\n      seriesVisible = this.findMousePoints(this.chart);\n    }\n    var chart = this.chart;\n    var horizontalCross = '';\n    var verticalCross = '';\n    var options;\n    var axisTooltipGroup = document.getElementById(this.elementID + '_crosshair_axis');\n    var crosshair = chart.crosshair;\n    var tooltipdiv = document.getElementById(this.elementID + '_tooltip');\n    var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\n    var crossGroup = chart.enableCanvas ? document.getElementById(this.elementID + '_Secondary_Element') : document.getElementById(this.elementID + '_UserInteraction');\n    var crosshairsvg;\n    var cross = document.getElementById(this.elementID + '_Crosshair');\n    if (chart.enableCanvas) {\n      if (!cross) {\n        cross = createElement('div', {\n          id: this.elementID + '_Crosshair',\n          styles: 'position: absolute; pointer-events: none'\n        });\n        crossGroup.appendChild(cross);\n      }\n    }\n    this.stopAnimation();\n    if (visibleSeriesLength === 0 || chart.crosshair.snapToData && this.valueY === undefined || chart.isCrosshair && chart.tooltip.enable && chart.tooltipModule && !withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect) || chart.crosshair.snapToData && !seriesVisible) {\n      return null;\n    }\n    this.valueX = chart.crosshair.snapToData || chart.crosshair.highlightCategory ? this.valueX : chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueX ? chart.tooltipModule.valueX : chart.mouseX;\n    this.valueY = chart.crosshair.snapToData || chart.crosshair.highlightCategory ? this.valueY : chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueY ? chart.tooltipModule.valueY : chart.mouseY;\n    if (!chart.enableCanvas) {\n      crossGroup.setAttribute('opacity', '1');\n    }\n    if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\n      if (chart.crosshair.highlightCategory && this.highlightWidth !== 0 && (chart.isTransposed || chart.requireInvertedAxis)) {\n        var crosshairHighlightWidth = this.highlightWidth;\n        chart.crosshairModule.valueY = this.adjustCrosshairPositionForOverflow(this.valueY, true, chart);\n        var y = this.valueY - crosshairHighlightWidth / 2;\n        horizontalCross = 'M ' + chartRect.x + ' ' + y + ' L ' + (chartRect.x + chartRect.width) + ' ' + y + ' L ' + (chartRect.x + chartRect.width) + ' ' + (y + crosshairHighlightWidth) + ' L ' + chartRect.x + ' ' + (y + crosshairHighlightWidth) + ' Z';\n      } else {\n        horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY + ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\n      }\n    }\n    if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\n      if (chart.crosshair.highlightCategory && this.highlightWidth !== 0 && !chart.requireInvertedAxis) {\n        var crosshairHighlightWidth = this.highlightWidth;\n        chart.crosshairModule.valueX = this.adjustCrosshairPositionForOverflow(this.valueX, false, chart);\n        var x = this.valueX - crosshairHighlightWidth / 2;\n        verticalCross = 'M ' + x + ' ' + chartRect.y + ' L ' + (x + crosshairHighlightWidth) + ' ' + chartRect.y + ' L ' + (x + crosshairHighlightWidth) + ' ' + (chartRect.y + chartRect.height) + ' L ' + x + ' ' + (chartRect.y + chartRect.height) + ' Z';\n      } else {\n        verticalCross += 'M ' + this.valueX + ' ' + chartRect.y + ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\n      }\n    }\n    if (chart.enableCanvas) {\n      if (!axisTooltipGroup) {\n        axisTooltipGroup = this.svgRenderer.createGroup({\n          'id': this.elementID + '_crosshair_axis'\n        });\n      }\n      var elementID = chart.tooltip.enable ? chart.element.id + '_tooltip_svg' : chart.element.id + '_svg';\n      crosshairsvg = this.svgRenderer.createSvg({\n        id: elementID,\n        width: chart.availableSize.width,\n        height: chart.availableSize.height\n      });\n      if (chart.tooltip.enable) {\n        tooltipdiv = !tooltipdiv ? chart.tooltipModule.createElement() : tooltipdiv;\n        tooltipdiv.appendChild(crosshairsvg);\n        crossGroup.appendChild(tooltipdiv);\n      }\n      options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1 ? crosshair.dashArray || '2.5' : crosshair.dashArray, horizontalCross);\n      this.drawCrosshairLine(options, cross, chartRect.x, this.valueY, chartRect.width, 0, horizontalCross);\n      /**\n       * due to not working for vertical line side I added new option\n       * options.d = verticalCross; options.id = this.elementID + '_VerticalLine';\n       */\n      options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1 ? crosshair.dashArray || '2.5' : crosshair.dashArray, verticalCross);\n      this.drawCrosshairLine(options, cross, this.valueX, chartRect.y, 0, chartRect.height, verticalCross);\n      this.renderAxisTooltip(chart, chartRect, axisTooltipGroup);\n      crosshairsvg.appendChild(axisTooltipGroup);\n      if (!chart.tooltip.enable) {\n        cross.appendChild(crosshairsvg);\n      }\n    } else {\n      if (crossGroup.childNodes.length === 0) {\n        var horizontalHighlight = chart.crosshair.highlightCategory && this.highlightWidth !== 0 && (chart.isTransposed || chart.requireInvertedAxis);\n        var verticalHighlight = chart.crosshair.highlightCategory && this.highlightWidth !== 0 && !chart.requireInvertedAxis;\n        axisTooltipGroup = chart.renderer.createGroup({\n          'id': this.elementID + '_crosshair_axis'\n        });\n        options = new PathOption(this.elementID + '_HorizontalLine', horizontalHighlight ? crosshair.horizontalLineColor || crosshair.line.color ? this.crosshairLightenColor(crosshair.horizontalLineColor || crosshair.line.color) : chart.themeStyle.crosshairBackground : 'none', horizontalHighlight ? 0 : crosshair.line.width, horizontalHighlight ? 'none' : crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, horizontalHighlight ? null : chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1 ? crosshair.dashArray || '2.5' : crosshair.dashArray, horizontalCross);\n        this.renderCrosshairLine(options, crossGroup);\n        options = new PathOption(this.elementID + '_VerticalLine', verticalHighlight ? crosshair.verticalLineColor || crosshair.line.color ? this.crosshairLightenColor(crosshair.verticalLineColor || crosshair.line.color) : chart.themeStyle.crosshairBackground : 'none', verticalHighlight ? 0 : crosshair.line.width, verticalHighlight ? 'none' : crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, verticalHighlight ? null : chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1 ? crosshair.dashArray || '2.5' : crosshair.dashArray, verticalCross);\n        this.renderCrosshairLine(options, crossGroup);\n        crossGroup.appendChild(axisTooltipGroup);\n        this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n      } else {\n        document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\n        document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\n        this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n      }\n    }\n  };\n  /**\n   * Converts a specified color into a semi-transparent RGB string format.\n   *\n   * @param {string} color - The main color in hex format.\n   * @returns {string} - The lightened color in RGBA format with an alpha value of 0.25.\n   */\n  Crosshair.prototype.crosshairLightenColor = function (color) {\n    var rgbValue = convertHexToColor(colorNameToHex(color));\n    return 'rgb(' + rgbValue.r + ',' + rgbValue.g + ',' + rgbValue.b + ',' + 0.25 + ')';\n  };\n  /**\n   * Adjusts the crosshair position to account for any overflow beyond the chart boundaries,\n   * ensuring it stays within visible limits. It handles horizontal and vertical orientations separately.\n   *\n   * @param {number} initialPosition - The initial calculated position of the crosshair before adjustments.\n   * @param {boolean} isHorizontalOrientation - Determines whether the crosshair is oriented horizontally.\n   * @param {Chart} chart - The chart instance containing details on crosshair module and overflow values.\n   * @returns {number} - The adjusted position of the crosshair after accounting for boundary overflow.\n   * @private\n   */\n  Crosshair.prototype.adjustCrosshairPositionForOverflow = function (initialPosition, isHorizontalOrientation, chart) {\n    if (chart.crosshairModule.crosshairLeftOverflow > 0) {\n      initialPosition += isHorizontalOrientation ? -chart.crosshairModule.crosshairLeftOverflow / 2 : chart.crosshairModule.crosshairLeftOverflow / 2;\n    }\n    if (chart.crosshairModule.crosshairRightOverflow > 0) {\n      initialPosition += isHorizontalOrientation ? chart.crosshairModule.crosshairRightOverflow / 2 : -chart.crosshairModule.crosshairRightOverflow / 2;\n    }\n    return initialPosition;\n  };\n  Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\n    var htmlObject = this.chart.renderer.drawPath(options);\n    crossGroup.appendChild(htmlObject);\n  };\n  Crosshair.prototype.drawCrosshairLine = function (options, crossGroup, left, top, width, height, direction) {\n    if (!document.getElementById(options.id) && direction) {\n      var line = createElement('div', {\n        id: options.id\n      });\n      crossGroup.appendChild(line);\n    }\n    if (document.getElementById(options.id)) {\n      var style = 'top:' + top.toString() + 'px;' + 'left:' + left.toString() + 'px;' + 'width:' + width + 'px;' + 'height:' + height + 'px;' + 'fill:' + options.stroke + ';' + 'border: 0.5px solid ' + options.stroke + ';' + 'opacity: ' + options.opacity + ' ; ' + 'position: absolute';\n      var crosshairline = document.getElementById(options.id);\n      var crosshairtooltip = document.getElementById(this.elementID + '_crosshair_axis');\n      crosshairline.style.cssText = style;\n      crossGroup.style.opacity = '1';\n      if (crosshairtooltip) {\n        crosshairtooltip.style.opacity = '1';\n      }\n    }\n  };\n  Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\n    var axis;\n    var text;\n    var rect;\n    var pathElement;\n    var textElem;\n    var options;\n    var padding = 5;\n    var direction;\n    var axisRect;\n    for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\n      axis = chart.axisCollections[k];\n      axisRect = !axis.placeNextToAxisLine ? axis.rect : axis.updatedRect;\n      if (axis.crosshairTooltip.enable) {\n        if (axisRect && (this.valueX <= axisRect.x + axisRect.width && axisRect.x <= this.valueX || this.valueY <= axisRect.y + axisRect.height && axisRect.y <= this.valueY)) {\n          pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\n          textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\n          text = this.getAxisText(axis);\n          if (text && text.indexOf('<br') > -1) {\n            text = this.getAxisText(axis).split(/<br.*?>/g);\n          }\n          if (!text) {\n            continue;\n          }\n          rect = this.tooltipLocation(text, axis, chartRect, axisRect);\n          if (rect.y + rect.height / 2 > chart.availableSize.height || rect.y < 0) {\n            continue;\n          }\n          if (pathElement === null) {\n            if (chart.enableCanvas) {\n              pathElement = this.svgRenderer.drawPath({\n                'id': this.elementID + '_axis_tooltip_' + k,\n                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n              });\n            } else {\n              pathElement = chart.renderer.drawPath({\n                'id': this.elementID + '_axis_tooltip_' + k,\n                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n              }, null);\n            }\n            axisGroup.appendChild(pathElement);\n            options = new TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, chart.stockChart && chart.enableRtl ? 'end' : 'start', text);\n            var render = chart.enableCanvas ? this.svgRenderer : chart.renderer;\n            textElem = textElement(render, options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color || chart.themeStyle.crosshairLabelFont.color, axisGroup, null, null, null, null, null, null, null, null, chart.enableCanvas, null, this.chart.themeStyle.crosshairLabelFont);\n          }\n          direction = findCrosshairDirection(this.rx, this.ry, rect, this.arrowLocation, 9, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\n          pathElement.setAttribute('d', direction);\n          if (typeof text !== 'string' && text.length > 1) {\n            for (var i = 0; i < text.length; i++) {\n              textElem.childNodes[i].textContent = text[i];\n            }\n          } else {\n            textElem.textContent = text;\n          }\n          textElem.setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0)).toString());\n          textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\n          var shadowId = this.chart.element.id + '_shadow';\n          if (typeof text !== 'string' && text.length > 1) {\n            var height = 0;\n            textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / (4 * text.length)).toString());\n            for (var i = 0; i < textElem.children.length; i++) {\n              height += this.elementSize.height / text.length;\n              textElem.children[i].setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0) + this.elementSize.width / 2).toString());\n              textElem.children[i].setAttribute('y', (parseInt(textElem.getAttribute('y'), 10) + height).toString());\n              textElem.children[i].style.textAnchor = 'middle';\n            }\n          }\n          if (this.chart.theme === 'Fluent' || this.chart.theme === 'FluentDark' || this.chart.theme === 'Fabric' || this.chart.theme === 'FabricDark' || this.chart.theme === 'Fluent2HighContrast') {\n            var defElement = this.chart.renderer.createDefs();\n            var bordercolor = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' ? '#D2D0CE' : this.chart.theme === 'Fluent2HighContrast' ? '#FFFFFF' : null;\n            var borderwidth = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' || this.chart.theme === 'Fluent2HighContrast' ? 1 : null;\n            defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\n            axisGroup.appendChild(defElement);\n            pathElement.setAttribute('stroke', bordercolor);\n            pathElement.setAttribute('stroke-width', ' ' + borderwidth);\n          } else if (this.chart.theme.indexOf('Fluent2') > -1) {\n            pathElement.setAttribute('box-shadow', '0px 1.6px 3.6px 0px #00000021, 0px 0.3px 0.9px 0px #0000001A');\n            pathElement.setAttribute('filter', Browser.isIE ? '' : 'url(#' + shadowId + ')');\n            var shadow = '<filter id=\"' + shadowId + '\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\n            shadow += '<feOffset dx=\"-1\" dy=\"3.6\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.2\"/>';\n            shadow += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n            var defElement = this.chart.renderer.createDefs();\n            defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\n            pathElement.appendChild(defElement);\n            defElement.innerHTML = shadow;\n          }\n        } else {\n          removeElement(this.elementID + '_axis_tooltip_' + k);\n          removeElement(this.elementID + '_axis_tooltip_text_' + k);\n        }\n      }\n    }\n  };\n  Crosshair.prototype.getAxisText = function (axis) {\n    var value;\n    this.isBottom = false;\n    this.isTop = false;\n    this.isLeft = false;\n    this.isRight = false;\n    var labelValue = axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks' ? 0.5 : 0;\n    var isOpposed = axis.isAxisOpposedPosition;\n    if (axis.orientation === 'Horizontal') {\n      value = getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\n      this.isBottom = !isOpposed;\n      this.isTop = isOpposed;\n    } else {\n      value = getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\n      this.isRight = isOpposed;\n      this.isLeft = !isOpposed;\n    }\n    if (axis.valueType === 'DateTime') {\n      return axis.format(new Date(value));\n    } else if (axis.valueType === 'Category') {\n      return axis.labels[Math.floor(value)];\n    } else if (axis.valueType === 'DateTimeCategory') {\n      return this.chart.dateTimeCategoryModule.getIndexedAxisLabel(axis.labels[Math.round(value)], axis.format);\n    } else if (axis.valueType === 'Logarithmic') {\n      return value = axis.format(Math.pow(axis.logBase, value));\n    } else {\n      var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\n    }\n  };\n  Crosshair.prototype.tooltipLocation = function (text, axis, bounds, axisRect) {\n    var padding = 5;\n    var arrowPadding = 9;\n    var tooltipRect;\n    var boundsX = bounds.x;\n    var boundsY = bounds.y;\n    var islabelInside = axis.labelPosition === 'Inside';\n    var scrollBarHeight = axis.scrollbarSettings.enable || axis.zoomingScrollBar && axis.zoomingScrollBar.svgObject ? axis.scrollBarHeight : 0;\n    this.elementSize = measureText(text, axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\n    if (typeof text !== 'string' && text.length > 1) {\n      this.elementSize.width = 0;\n      this.elementSize.height = 0;\n      for (var i = 0; i < text.length; i++) {\n        var size = measureText(text[i], axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\n        this.elementSize.height += size.height;\n        if (this.elementSize.width < size.width) {\n          this.elementSize.width = size.width;\n        }\n      }\n    }\n    var isOpposed = axis.isAxisOpposedPosition;\n    if (axis.orientation === 'Horizontal') {\n      var yLocation = islabelInside ? axisRect.y - this.elementSize.height - (padding * 2 + arrowPadding) : axisRect.y + scrollBarHeight;\n      var height = islabelInside ? axisRect.y - this.elementSize.height - arrowPadding : axisRect.y + arrowPadding;\n      this.arrowLocation = new ChartLocation(this.valueX, yLocation);\n      tooltipRect = new Rect(this.valueX - this.elementSize.width / 2 - padding, height + (!islabelInside ? scrollBarHeight : 0), this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n      if (isOpposed) {\n        tooltipRect.y = islabelInside ? axisRect.y : axisRect.y - (this.elementSize.height + padding * 2 + arrowPadding) - scrollBarHeight;\n      }\n      if (tooltipRect.x < boundsX) {\n        tooltipRect.x = boundsX;\n      }\n      if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\n        tooltipRect.x -= tooltipRect.x + tooltipRect.width - (boundsX + bounds.width);\n      }\n      if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\n        this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding;\n      }\n      if (this.arrowLocation.x - arrowPadding < tooltipRect.x + this.rx) {\n        this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding;\n      }\n    } else {\n      scrollBarHeight = scrollBarHeight * (isOpposed ? 1 : -1);\n      this.arrowLocation = new ChartLocation(axisRect.x, this.valueY);\n      var width = islabelInside ? axisRect.x - scrollBarHeight : axisRect.x - this.elementSize.width - (padding * 2 + arrowPadding);\n      tooltipRect = new Rect(width + scrollBarHeight, this.valueY - this.elementSize.height / 2 - padding, this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n      if (isOpposed) {\n        tooltipRect.x = islabelInside ? axisRect.x - this.elementSize.width - arrowPadding : axisRect.x + arrowPadding + scrollBarHeight;\n        if (tooltipRect.x + tooltipRect.width > this.chart.availableSize.width) {\n          this.arrowLocation.x -= tooltipRect.x + tooltipRect.width - this.chart.availableSize.width;\n          tooltipRect.x -= tooltipRect.x + tooltipRect.width - this.chart.availableSize.width;\n        }\n      } else {\n        if (tooltipRect.x < 0) {\n          this.arrowLocation.x -= tooltipRect.x;\n          tooltipRect.x = 0;\n        }\n      }\n      if (tooltipRect.y < boundsY) {\n        tooltipRect.y = boundsY;\n      }\n      if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\n        tooltipRect.y -= tooltipRect.y + tooltipRect.height - (boundsY + bounds.height);\n      }\n      if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\n        this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\n      }\n      if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\n        this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\n      }\n    }\n    return tooltipRect;\n  };\n  Crosshair.prototype.stopAnimation = function () {\n    stopTimer(this.crosshairInterval);\n  };\n  Crosshair.prototype.progressAnimation = function () {\n    stopTimer(this.crosshairInterval);\n  };\n  /**\n   * Removes the crosshair on mouse leave.\n   *\n   * @returns {void}\n   * @private\n   */\n  Crosshair.prototype.removeCrosshair = function (duration) {\n    var chart = this.chart;\n    var crosshair = chart.enableCanvas ? document.getElementById(this.elementID + '_Crosshair') : document.getElementById(this.elementID + '_UserInteraction');\n    var crosshairtooltip = chart.enableCanvas ? document.getElementById(this.elementID + '_crosshair_axis') : null;\n    this.stopAnimation();\n    if (crosshair && crosshair.getAttribute('opacity') !== '0') {\n      this.crosshairInterval = +setTimeout(function () {\n        new Animation({}).animate(crosshair, {\n          duration: 200,\n          progress: function (args) {\n            // crosshair.removeAttribute('e-animate');\n            crosshair.style.animation = '';\n            if (!chart.enableCanvas) {\n              crosshair.setAttribute('opacity', (1 - args.timeStamp / args.duration).toString());\n            } else {\n              crosshair.style.opacity = (1 - args.timeStamp / args.duration).toString();\n              crosshairtooltip.style.opacity = (1 - args.timeStamp / args.duration).toString();\n            }\n          },\n          end: function () {\n            if (chart.enableCanvas) {\n              crosshair.style.opacity = '0';\n              crosshairtooltip.style.opacity = '0';\n            } else {\n              crosshair.setAttribute('opacity', '0');\n            }\n            chart.startMove = false;\n            if (chart.tooltipModule) {\n              chart.tooltipModule.valueX = null;\n              chart.tooltipModule.valueY = null;\n            }\n          }\n        });\n      }, duration);\n    }\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} module name\n   */\n  Crosshair.prototype.getModuleName = function () {\n    /**\n     * Returns the module name.\n     */\n    return 'Crosshair';\n  };\n  /**\n   * To destroy the crosshair.\n   *\n   * @returns {void}\n   * @private\n   */\n  Crosshair.prototype.destroy = function () {\n    /**\n     * Destroy method performed here.\n     */\n  };\n  return Crosshair;\n}();\nexport { Crosshair };","map":{"version":3,"names":["Animation","Browser","createElement","textElement","getValueXByPoint","stopTimer","findCrosshairDirection","getValueYByPoint","ChartLocation","withInBounds","removeElement","convertHexToColor","colorNameToHex","PathOption","Rect","TextOption","measureText","SvgRenderer","ChartData","Crosshair","chart","arrowLocation","rx","ry","highlightWidth","crosshairLeftOverflow","crosshairRightOverflow","elementID","element","id","svgRenderer","crosshair","snapToData","highlightCategory","data","addEventListener","prototype","isDestroyed","cancelEvent","isPointer","on","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","mouseLeaveHandler","longPress","startMove","removeCrosshair","event","stockChart","onPanning","mouseY","chartAxisLayoutPanel","seriesClipRect","y","height","type","isIos","isIos7","preventDefault","disableTrackTooltip","enable","mouseX","isTouch","findMousePoints","getData","pointLocations","axisCoordinate","isTransposed","nearestDataPoint","nearestValue","minDifference","Infinity","mouseCoordinate","seriesVisibility","commonXvalues","mergeXvalues","visibleSeries","_i","_a","length","series","visible","category","closestData","getClosestX","point","symbolLocations","pointLocation","clipRect","push","difference","Math","abs","crosshairModule","xAxis","valueType","clipRectSize","requireInvertedAxis","width","highlightCategoryWidth","visibleRange","delta","pointRelativePosition","xValue","min","max","findMouseValues","visibleSeriesLength","filter","seriesVisible","horizontalCross","verticalCross","options","axisTooltipGroup","document","getElementById","tooltipdiv","chartRect","crossGroup","enableCanvas","crosshairsvg","cross","styles","appendChild","stopAnimation","valueY","undefined","isCrosshair","tooltip","tooltipModule","valueX","setAttribute","lineType","crosshairHighlightWidth","adjustCrosshairPositionForOverflow","x","createGroup","createSvg","availableSize","line","horizontalLineColor","color","themeStyle","crosshairLine","opacity","theme","indexOf","dashArray","drawCrosshairLine","verticalLineColor","renderAxisTooltip","childNodes","horizontalHighlight","verticalHighlight","renderer","crosshairLightenColor","crosshairBackground","renderCrosshairLine","lastChild","rgbValue","r","g","b","initialPosition","isHorizontalOrientation","htmlObject","drawPath","left","top","direction","style","toString","stroke","crosshairline","crosshairtooltip","cssText","axisGroup","axis","text","rect","pathElement","textElem","padding","axisRect","k","length_1","axisCollections","placeNextToAxisLine","updatedRect","crosshairTooltip","getAxisText","split","tooltipLocation","fill","crosshairFill","enableRtl","render","textStyle","crosshairLabelFont","isTop","isBottom","isLeft","i","textContent","elementSize","shadowId","children","parseInt","getAttribute","textAnchor","defElement","createDefs","bordercolor","borderwidth","isIE","shadow","innerHTML","value","isRight","labelValue","labelPlacement","isOpposed","isAxisOpposedPosition","orientation","format","Date","labels","floor","dateTimeCategoryModule","getIndexedAxisLabel","round","pow","logBase","customLabelFormat","labelFormat","match","replace","bounds","arrowPadding","tooltipRect","boundsX","boundsY","islabelInside","labelPosition","scrollBarHeight","scrollbarSettings","zoomingScrollBar","svgObject","size","yLocation","crosshairInterval","progressAnimation","duration","setTimeout","animate","progress","args","animation","timeStamp","end","getModuleName","destroy"],"sources":["C:/Users/mkfun/Desktop/ct assignment/admin/node_modules/@syncfusion/ej2-charts/src/chart/user-interaction/crosshair.js"],"sourcesContent":["import { Animation, Browser, createElement } from '@syncfusion/ej2-base';\nimport { textElement, getValueXByPoint, stopTimer, findCrosshairDirection, getValueYByPoint, ChartLocation, withInBounds, removeElement, convertHexToColor, colorNameToHex } from '../../common/utils/helper';\nimport { PathOption, Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { ChartData } from '../../chart/utils/get-data';\n/**\n * The `Crosshair` module is used to render the crosshair for the chart.\n */\nvar Crosshair = /** @class */ (function () {\n    /**\n     * Constructor for crosshair module.\n     *\n     * @private\n     */\n    function Crosshair(chart) {\n        this.arrowLocation = new ChartLocation(0, 0);\n        this.rx = 2;\n        this.ry = 2;\n        this.highlightWidth = 0;\n        this.crosshairLeftOverflow = 0;\n        this.crosshairRightOverflow = 0;\n        this.chart = chart;\n        this.elementID = this.chart.element.id;\n        this.svgRenderer = new SvgRenderer(this.chart.element.id);\n        if (this.chart.crosshair.snapToData || this.chart.crosshair.highlightCategory) {\n            this.data = new ChartData(this.chart);\n        }\n        this.addEventListener();\n    }\n    /**\n     * Adds event listeners to the chart elements.\n     *\n     * @private\n     * @returns {void}\n     */\n    Crosshair.prototype.addEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n        this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n        this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n        this.chart.on('tapHold', this.longPress, this);\n    };\n    Crosshair.prototype.mouseUpHandler = function () {\n        if (this.chart.startMove) {\n            this.removeCrosshair(2000);\n        }\n    };\n    Crosshair.prototype.mouseLeaveHandler = function () {\n        this.removeCrosshair(1000);\n    };\n    Crosshair.prototype.mouseMoveHandler = function (event) {\n        var chart = this.chart;\n        if (chart.stockChart && chart.stockChart.onPanning) {\n            if (chart.mouseY < chart.chartAxisLayoutPanel.seriesClipRect.y) {\n                chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y;\n            }\n            else if (chart.mouseY > chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height) {\n                chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height;\n            }\n        }\n        if (event.type === 'touchmove' && (Browser.isIos || Browser.isIos7) && chart.startMove && event.preventDefault) {\n            event.preventDefault();\n        }\n        // Tooltip for chart series.\n        if (!chart.disableTrackTooltip) {\n            if (chart.crosshair.enable && withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n                if (chart.startMove || !chart.isTouch) {\n                    this.crosshair();\n                }\n            }\n            else {\n                this.removeCrosshair(1000);\n            }\n        }\n    };\n    /**\n     * Handles the long press on chart.\n     *\n     * @returns {boolean} false\n     * @private\n     */\n    Crosshair.prototype.longPress = function () {\n        var chart = this.chart;\n        if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n            this.crosshair();\n        }\n        return false;\n    };\n    /**\n     * Finds the data points closest to the mouse position for all visible series in the chart.\n     * Updates the `data` object with the nearest data point to be used for mouse interactions.\n     *\n     * @param {Chart} chart - The chart instance containing the visible series and mouse position.\n     * @returns {boolean} -  True if chart has atleast one visible series.\n     * @private\n     */\n    Crosshair.prototype.findMousePoints = function (chart) {\n        var data = this.data.getData();\n        var pointLocations = [];\n        var axisCoordinate = chart.isTransposed ? 'x' : 'y';\n        var nearestDataPoint = null;\n        var nearestValue = null;\n        var minDifference = Infinity; // For finding the nearest value\n        var mouseCoordinate = axisCoordinate === 'x' ? chart.mouseX : chart.mouseY;\n        var seriesVisibility = false;\n        var commonXvalues = this.data.mergeXvalues(this.chart.visibleSeries);\n        for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n            var series = _a[_i];\n            seriesVisibility = seriesVisibility ? seriesVisibility : series.visible;\n            if (series.visible && series.category !== 'TrendLine') {\n                // Get the closest X value and store the data point\n                var closestData = this.data.getClosestX(chart, series, commonXvalues) || data;\n                if (closestData && closestData.point && closestData.point.symbolLocations[0]) {\n                    var pointLocation = closestData.point.symbolLocations[0][axisCoordinate] +\n                        closestData.series.clipRect[axisCoordinate];\n                    if (chart.crosshair.snapToData || chart.crosshair.highlightCategory) {\n                        pointLocations.push(pointLocation); // Store point locations for nearest calculation\n                        // Calculate the nearest point to the mouse\n                        var difference = Math.abs(pointLocation - mouseCoordinate);\n                        if (difference < minDifference) {\n                            minDifference = difference;\n                            nearestValue = pointLocation;\n                            nearestDataPoint = closestData;\n                        }\n                    }\n                }\n            }\n        }\n        // Use the nearest data point\n        if ((chart.crosshair.snapToData || chart.crosshair.highlightCategory) && nearestDataPoint) {\n            data = nearestDataPoint;\n            chart.crosshairModule.highlightWidth = 0;\n            if (chart.crosshair.highlightCategory && data.series.xAxis.valueType === 'Category') {\n                var clipRectSize = chart.isTransposed || chart.requireInvertedAxis ?\n                    chart.chartAxisLayoutPanel.seriesClipRect.height : chart.chartAxisLayoutPanel.seriesClipRect.width;\n                var highlightCategoryWidth = clipRectSize / data.series.xAxis.visibleRange.delta;\n                var pointRelativePosition = (data.point.xValue - data.series.xAxis.visibleRange.min) /\n                    (data.series.xAxis.visibleRange.max - data.series.xAxis.visibleRange.min);\n                chart.crosshairModule.crosshairLeftOverflow = Math.max(0, (highlightCategoryWidth / 2) -\n                    pointRelativePosition * clipRectSize);\n                chart.crosshairModule.crosshairRightOverflow = Math.max(0, (pointRelativePosition * clipRectSize +\n                    (highlightCategoryWidth / 2)) - clipRectSize);\n                chart.crosshairModule.highlightWidth = Math.max(0, highlightCategoryWidth - chart.crosshairModule.crosshairLeftOverflow -\n                    chart.crosshairModule.crosshairRightOverflow);\n            }\n        }\n        if (data && data.point) {\n            this.data.findMouseValues(data, chart, this);\n        }\n        return seriesVisibility;\n    };\n    /**\n     * Renders the crosshair.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crosshair.prototype.crosshair = function () {\n        var visibleSeriesLength = this.chart.series.filter(function (series) { return series.visible; }).length;\n        var seriesVisible = true;\n        if (this.chart.crosshair.snapToData || this.chart.crosshair.highlightCategory) {\n            seriesVisible = this.findMousePoints(this.chart);\n        }\n        var chart = this.chart;\n        var horizontalCross = '';\n        var verticalCross = '';\n        var options;\n        var axisTooltipGroup = document.getElementById(this.elementID + '_crosshair_axis');\n        var crosshair = chart.crosshair;\n        var tooltipdiv = document.getElementById(this.elementID + '_tooltip');\n        var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\n        var crossGroup = chart.enableCanvas ? document.getElementById(this.elementID + '_Secondary_Element') :\n            document.getElementById(this.elementID + '_UserInteraction');\n        var crosshairsvg;\n        var cross = document.getElementById(this.elementID + '_Crosshair');\n        if (chart.enableCanvas) {\n            if (!cross) {\n                cross = createElement('div', {\n                    id: this.elementID + '_Crosshair', styles: 'position: absolute; pointer-events: none'\n                });\n                crossGroup.appendChild(cross);\n            }\n        }\n        this.stopAnimation();\n        if (visibleSeriesLength === 0 || (chart.crosshair.snapToData && this.valueY === undefined) ||\n            chart.isCrosshair && chart.tooltip.enable && chart.tooltipModule &&\n                !withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect) ||\n            (chart.crosshair.snapToData && !seriesVisible)) {\n            return null;\n        }\n        this.valueX = chart.crosshair.snapToData || chart.crosshair.highlightCategory ? this.valueX :\n            (chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueX ? chart.tooltipModule.valueX : chart.mouseX);\n        this.valueY = chart.crosshair.snapToData || chart.crosshair.highlightCategory ? this.valueY :\n            (chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueY ? chart.tooltipModule.valueY : chart.mouseY);\n        if (!chart.enableCanvas) {\n            crossGroup.setAttribute('opacity', '1');\n        }\n        if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\n            if ((chart.crosshair.highlightCategory && this.highlightWidth !== 0) && (chart.isTransposed || chart.requireInvertedAxis)) {\n                var crosshairHighlightWidth = this.highlightWidth;\n                chart.crosshairModule.valueY = this.adjustCrosshairPositionForOverflow(this.valueY, true, chart);\n                var y = this.valueY - (crosshairHighlightWidth / 2);\n                horizontalCross = 'M ' + chartRect.x + ' ' + y +\n                    ' L ' + (chartRect.x + chartRect.width) + ' ' + y +\n                    ' L ' + (chartRect.x + chartRect.width) + ' ' + (y + crosshairHighlightWidth) +\n                    ' L ' + chartRect.x + ' ' + (y + crosshairHighlightWidth) + ' Z';\n            }\n            else {\n                horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY +\n                    ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\n            }\n        }\n        if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\n            if ((chart.crosshair.highlightCategory && this.highlightWidth !== 0) && !chart.requireInvertedAxis) {\n                var crosshairHighlightWidth = this.highlightWidth;\n                chart.crosshairModule.valueX = this.adjustCrosshairPositionForOverflow(this.valueX, false, chart);\n                var x = this.valueX - (crosshairHighlightWidth / 2);\n                verticalCross = 'M ' + x + ' ' + chartRect.y +\n                    ' L ' + (x + crosshairHighlightWidth) + ' ' + chartRect.y +\n                    ' L ' + (x + crosshairHighlightWidth) + ' ' + (chartRect.y + chartRect.height) +\n                    ' L ' + x + ' ' + (chartRect.y + chartRect.height) + ' Z';\n            }\n            else {\n                verticalCross += 'M ' + this.valueX + ' ' + chartRect.y +\n                    ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\n            }\n        }\n        if (chart.enableCanvas) {\n            if (!axisTooltipGroup) {\n                axisTooltipGroup = this.svgRenderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\n            }\n            var elementID = chart.tooltip.enable ? chart.element.id + '_tooltip_svg' : chart.element.id + '_svg';\n            crosshairsvg = this.svgRenderer.createSvg({\n                id: elementID,\n                width: chart.availableSize.width,\n                height: chart.availableSize.height\n            });\n            if (chart.tooltip.enable) {\n                tooltipdiv = !tooltipdiv ? chart.tooltipModule.createElement() : tooltipdiv;\n                tooltipdiv.appendChild(crosshairsvg);\n                crossGroup.appendChild(tooltipdiv);\n            }\n            options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, (chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1) ? crosshair.dashArray || '2.5' : crosshair.dashArray, horizontalCross);\n            this.drawCrosshairLine(options, cross, chartRect.x, this.valueY, chartRect.width, 0, horizontalCross);\n            /**\n             * due to not working for vertical line side I added new option\n             * options.d = verticalCross; options.id = this.elementID + '_VerticalLine';\n             */\n            options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, (chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1) ? crosshair.dashArray || '2.5' : crosshair.dashArray, verticalCross);\n            this.drawCrosshairLine(options, cross, this.valueX, chartRect.y, 0, chartRect.height, verticalCross);\n            this.renderAxisTooltip(chart, chartRect, axisTooltipGroup);\n            crosshairsvg.appendChild(axisTooltipGroup);\n            if (!chart.tooltip.enable) {\n                cross.appendChild(crosshairsvg);\n            }\n        }\n        else {\n            if (crossGroup.childNodes.length === 0) {\n                var horizontalHighlight = (chart.crosshair.highlightCategory && this.highlightWidth !== 0) &&\n                    (chart.isTransposed || chart.requireInvertedAxis);\n                var verticalHighlight = (chart.crosshair.highlightCategory && this.highlightWidth !== 0) &&\n                    !chart.requireInvertedAxis;\n                axisTooltipGroup = chart.renderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\n                options = new PathOption(this.elementID + '_HorizontalLine', horizontalHighlight ? (crosshair.horizontalLineColor || crosshair.line.color) ? this.crosshairLightenColor(crosshair.horizontalLineColor || crosshair.line.color) : chart.themeStyle.crosshairBackground : 'none', horizontalHighlight ? 0 : crosshair.line.width, horizontalHighlight ? 'none' : crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, horizontalHighlight ? null : (chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1) ? crosshair.dashArray || '2.5' : crosshair.dashArray, horizontalCross);\n                this.renderCrosshairLine(options, crossGroup);\n                options = new PathOption(this.elementID + '_VerticalLine', verticalHighlight ? (crosshair.verticalLineColor || crosshair.line.color) ? this.crosshairLightenColor(crosshair.verticalLineColor || crosshair.line.color) : chart.themeStyle.crosshairBackground : 'none', verticalHighlight ? 0 : crosshair.line.width, verticalHighlight ? 'none' : crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, verticalHighlight ? null : (chart.theme.indexOf('Bootstrap5') > -1 || chart.theme === 'Fluent2HighContrast' || chart.theme.indexOf('Tailwind3') > -1) ? crosshair.dashArray || '2.5' : crosshair.dashArray, verticalCross);\n                this.renderCrosshairLine(options, crossGroup);\n                crossGroup.appendChild(axisTooltipGroup);\n                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n            }\n            else {\n                document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\n                document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\n                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n            }\n        }\n    };\n    /**\n     * Converts a specified color into a semi-transparent RGB string format.\n     *\n     * @param {string} color - The main color in hex format.\n     * @returns {string} - The lightened color in RGBA format with an alpha value of 0.25.\n     */\n    Crosshair.prototype.crosshairLightenColor = function (color) {\n        var rgbValue = convertHexToColor(colorNameToHex(color));\n        return 'rgb(' + rgbValue.r + ',' + rgbValue.g + ',' + rgbValue.b + ',' + 0.25 + ')';\n    };\n    /**\n     * Adjusts the crosshair position to account for any overflow beyond the chart boundaries,\n     * ensuring it stays within visible limits. It handles horizontal and vertical orientations separately.\n     *\n     * @param {number} initialPosition - The initial calculated position of the crosshair before adjustments.\n     * @param {boolean} isHorizontalOrientation - Determines whether the crosshair is oriented horizontally.\n     * @param {Chart} chart - The chart instance containing details on crosshair module and overflow values.\n     * @returns {number} - The adjusted position of the crosshair after accounting for boundary overflow.\n     * @private\n     */\n    Crosshair.prototype.adjustCrosshairPositionForOverflow = function (initialPosition, isHorizontalOrientation, chart) {\n        if (chart.crosshairModule.crosshairLeftOverflow > 0) {\n            initialPosition += isHorizontalOrientation ? -chart.crosshairModule.crosshairLeftOverflow / 2 :\n                chart.crosshairModule.crosshairLeftOverflow / 2;\n        }\n        if (chart.crosshairModule.crosshairRightOverflow > 0) {\n            initialPosition += isHorizontalOrientation ? chart.crosshairModule.crosshairRightOverflow / 2 :\n                -chart.crosshairModule.crosshairRightOverflow / 2;\n        }\n        return initialPosition;\n    };\n    Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\n        var htmlObject = this.chart.renderer.drawPath(options);\n        crossGroup.appendChild(htmlObject);\n    };\n    Crosshair.prototype.drawCrosshairLine = function (options, crossGroup, left, top, width, height, direction) {\n        if (!document.getElementById(options.id) && direction) {\n            var line = createElement('div', {\n                id: options.id\n            });\n            crossGroup.appendChild(line);\n        }\n        if (document.getElementById(options.id)) {\n            var style = 'top:' + top.toString() + 'px;' +\n                'left:' + left.toString() + 'px;' +\n                'width:' + width + 'px;' +\n                'height:' + height + 'px;' +\n                'fill:' + options.stroke + ';' +\n                'border: 0.5px solid ' + options.stroke + ';' +\n                'opacity: ' + options.opacity + ' ; ' +\n                'position: absolute';\n            var crosshairline = document.getElementById(options.id);\n            var crosshairtooltip = document.getElementById(this.elementID + '_crosshair_axis');\n            crosshairline.style.cssText = style;\n            crossGroup.style.opacity = '1';\n            if (crosshairtooltip) {\n                crosshairtooltip.style.opacity = '1';\n            }\n        }\n    };\n    Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\n        var axis;\n        var text;\n        var rect;\n        var pathElement;\n        var textElem;\n        var options;\n        var padding = 5;\n        var direction;\n        var axisRect;\n        for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\n            axis = chart.axisCollections[k];\n            axisRect = !axis.placeNextToAxisLine ? axis.rect : axis.updatedRect;\n            if (axis.crosshairTooltip.enable) {\n                if (axisRect && ((this.valueX <= (axisRect.x + axisRect.width) && axisRect.x <= this.valueX) ||\n                    (this.valueY <= (axisRect.y + axisRect.height) && axisRect.y <= this.valueY))) {\n                    pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\n                    textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\n                    text = this.getAxisText(axis);\n                    if (text && text.indexOf('<br') > -1) {\n                        text = this.getAxisText(axis).split(/<br.*?>/g);\n                    }\n                    if (!text) {\n                        continue;\n                    }\n                    rect = this.tooltipLocation(text, axis, chartRect, axisRect);\n                    if (rect.y + rect.height / 2 > chart.availableSize.height || rect.y < 0) {\n                        continue;\n                    }\n                    if (pathElement === null) {\n                        if (chart.enableCanvas) {\n                            pathElement = this.svgRenderer.drawPath({\n                                'id': this.elementID + '_axis_tooltip_' + k,\n                                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n                            });\n                        }\n                        else {\n                            pathElement = chart.renderer.drawPath({\n                                'id': this.elementID + '_axis_tooltip_' + k,\n                                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n                            }, null);\n                        }\n                        axisGroup.appendChild(pathElement);\n                        options = new TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, (chart.stockChart && chart.enableRtl) ? 'end' : 'start', text);\n                        var render = chart.enableCanvas ? this.svgRenderer : chart.renderer;\n                        textElem = textElement(render, options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color || chart.themeStyle.crosshairLabelFont.color, axisGroup, null, null, null, null, null, null, null, null, chart.enableCanvas, null, this.chart.themeStyle.crosshairLabelFont);\n                    }\n                    direction = findCrosshairDirection(this.rx, this.ry, rect, this.arrowLocation, 9, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\n                    pathElement.setAttribute('d', direction);\n                    if (typeof text !== 'string' && text.length > 1) {\n                        for (var i = 0; i < text.length; i++) {\n                            textElem.childNodes[i].textContent = text[i];\n                        }\n                    }\n                    else {\n                        textElem.textContent = text;\n                    }\n                    textElem.setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0)).toString());\n                    textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\n                    var shadowId = this.chart.element.id + '_shadow';\n                    if (typeof text !== 'string' && text.length > 1) {\n                        var height = 0;\n                        textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / (4 * text.length)).toString());\n                        for (var i = 0; i < textElem.children.length; i++) {\n                            height += this.elementSize.height / text.length;\n                            textElem.children[i].setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0) + this.elementSize.width / 2).toString());\n                            textElem.children[i].setAttribute('y', ((parseInt(textElem.getAttribute('y'), 10) + height).toString()));\n                            textElem.children[i].style.textAnchor = 'middle';\n                        }\n                    }\n                    if (this.chart.theme === 'Fluent' || this.chart.theme === 'FluentDark' || this.chart.theme === 'Fabric' || this.chart.theme === 'FabricDark' || this.chart.theme === 'Fluent2HighContrast') {\n                        var defElement = this.chart.renderer.createDefs();\n                        var bordercolor = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' ? '#D2D0CE' : this.chart.theme === 'Fluent2HighContrast' ? '#FFFFFF' : null;\n                        var borderwidth = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' || this.chart.theme === 'Fluent2HighContrast' ? 1 : null;\n                        defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\n                        axisGroup.appendChild(defElement);\n                        pathElement.setAttribute('stroke', bordercolor);\n                        pathElement.setAttribute('stroke-width', ' ' + borderwidth);\n                    }\n                    else if (this.chart.theme.indexOf('Fluent2') > -1) {\n                        pathElement.setAttribute('box-shadow', '0px 1.6px 3.6px 0px #00000021, 0px 0.3px 0.9px 0px #0000001A');\n                        pathElement.setAttribute('filter', Browser.isIE ? '' : 'url(#' + shadowId + ')');\n                        var shadow = '<filter id=\"' + shadowId + '\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\n                        shadow += '<feOffset dx=\"-1\" dy=\"3.6\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.2\"/>';\n                        shadow += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n                        var defElement = this.chart.renderer.createDefs();\n                        defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\n                        pathElement.appendChild(defElement);\n                        defElement.innerHTML = shadow;\n                    }\n                }\n                else {\n                    removeElement(this.elementID + '_axis_tooltip_' + k);\n                    removeElement(this.elementID + '_axis_tooltip_text_' + k);\n                }\n            }\n        }\n    };\n    Crosshair.prototype.getAxisText = function (axis) {\n        var value;\n        this.isBottom = false;\n        this.isTop = false;\n        this.isLeft = false;\n        this.isRight = false;\n        var labelValue = (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks')\n            ? 0.5 : 0;\n        var isOpposed = axis.isAxisOpposedPosition;\n        if (axis.orientation === 'Horizontal') {\n            value = getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\n            this.isBottom = !isOpposed;\n            this.isTop = isOpposed;\n        }\n        else {\n            value = getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\n            this.isRight = isOpposed;\n            this.isLeft = !isOpposed;\n        }\n        if (axis.valueType === 'DateTime') {\n            return axis.format(new Date(value));\n        }\n        else if (axis.valueType === 'Category') {\n            return axis.labels[Math.floor(value)];\n        }\n        else if (axis.valueType === 'DateTimeCategory') {\n            return this.chart.dateTimeCategoryModule.getIndexedAxisLabel(axis.labels[Math.round(value)], axis.format);\n        }\n        else if (axis.valueType === 'Logarithmic') {\n            return value = axis.format(Math.pow(axis.logBase, value));\n        }\n        else {\n            var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n            return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\n        }\n    };\n    Crosshair.prototype.tooltipLocation = function (text, axis, bounds, axisRect) {\n        var padding = 5;\n        var arrowPadding = 9;\n        var tooltipRect;\n        var boundsX = bounds.x;\n        var boundsY = bounds.y;\n        var islabelInside = axis.labelPosition === 'Inside';\n        var scrollBarHeight = axis.scrollbarSettings.enable || (axis.zoomingScrollBar && axis.zoomingScrollBar.svgObject)\n            ? axis.scrollBarHeight : 0;\n        this.elementSize = measureText(text, axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\n        if (typeof text !== 'string' && text.length > 1) {\n            this.elementSize.width = 0;\n            this.elementSize.height = 0;\n            for (var i = 0; i < text.length; i++) {\n                var size = measureText(text[i], axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\n                this.elementSize.height += size.height;\n                if (this.elementSize.width < size.width) {\n                    this.elementSize.width = size.width;\n                }\n            }\n        }\n        var isOpposed = axis.isAxisOpposedPosition;\n        if (axis.orientation === 'Horizontal') {\n            var yLocation = islabelInside ? axisRect.y - this.elementSize.height - (padding * 2 + arrowPadding) :\n                axisRect.y + scrollBarHeight;\n            var height = islabelInside ? axisRect.y - this.elementSize.height - arrowPadding : axisRect.y + arrowPadding;\n            this.arrowLocation = new ChartLocation(this.valueX, yLocation);\n            tooltipRect = new Rect((this.valueX - (this.elementSize.width / 2) - padding), height + (!islabelInside ? scrollBarHeight : 0), this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n            if (isOpposed) {\n                tooltipRect.y = islabelInside ? axisRect.y : axisRect.y -\n                    (this.elementSize.height + padding * 2 + arrowPadding) - scrollBarHeight;\n            }\n            if (tooltipRect.x < boundsX) {\n                tooltipRect.x = boundsX;\n            }\n            if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\n                tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - (boundsX + bounds.width));\n            }\n            if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\n                this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding;\n            }\n            if (this.arrowLocation.x - arrowPadding < tooltipRect.x + this.rx) {\n                this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding;\n            }\n        }\n        else {\n            scrollBarHeight = scrollBarHeight * (isOpposed ? 1 : -1);\n            this.arrowLocation = new ChartLocation(axisRect.x, this.valueY);\n            var width = islabelInside ? axisRect.x - scrollBarHeight :\n                axisRect.x - (this.elementSize.width) - (padding * 2 + arrowPadding);\n            tooltipRect = new Rect(width + scrollBarHeight, this.valueY - (this.elementSize.height / 2) - padding, this.elementSize.width + (padding * 2), this.elementSize.height + padding * 2);\n            if (isOpposed) {\n                tooltipRect.x = islabelInside ? axisRect.x - this.elementSize.width - arrowPadding :\n                    axisRect.x + arrowPadding + scrollBarHeight;\n                if ((tooltipRect.x + tooltipRect.width) > this.chart.availableSize.width) {\n                    this.arrowLocation.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\n                    tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\n                }\n            }\n            else {\n                if (tooltipRect.x < 0) {\n                    this.arrowLocation.x -= tooltipRect.x;\n                    tooltipRect.x = 0;\n                }\n            }\n            if (tooltipRect.y < boundsY) {\n                tooltipRect.y = boundsY;\n            }\n            if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\n                tooltipRect.y -= ((tooltipRect.y + tooltipRect.height) - (boundsY + bounds.height));\n            }\n            if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\n                this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\n            }\n            if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\n                this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\n            }\n        }\n        return tooltipRect;\n    };\n    Crosshair.prototype.stopAnimation = function () {\n        stopTimer(this.crosshairInterval);\n    };\n    Crosshair.prototype.progressAnimation = function () {\n        stopTimer(this.crosshairInterval);\n    };\n    /**\n     * Removes the crosshair on mouse leave.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crosshair.prototype.removeCrosshair = function (duration) {\n        var chart = this.chart;\n        var crosshair = chart.enableCanvas ? document.getElementById(this.elementID + '_Crosshair') :\n            document.getElementById(this.elementID + '_UserInteraction');\n        var crosshairtooltip = chart.enableCanvas ? document.getElementById(this.elementID + '_crosshair_axis') : null;\n        this.stopAnimation();\n        if (crosshair && crosshair.getAttribute('opacity') !== '0') {\n            this.crosshairInterval = +setTimeout(function () {\n                new Animation({}).animate(crosshair, {\n                    duration: 200,\n                    progress: function (args) {\n                        // crosshair.removeAttribute('e-animate');\n                        crosshair.style.animation = '';\n                        if (!chart.enableCanvas) {\n                            crosshair.setAttribute('opacity', (1 - (args.timeStamp / args.duration)).toString());\n                        }\n                        else {\n                            crosshair.style.opacity = (1 - (args.timeStamp / args.duration)).toString();\n                            crosshairtooltip.style.opacity = (1 - (args.timeStamp / args.duration)).toString();\n                        }\n                    },\n                    end: function () {\n                        if (chart.enableCanvas) {\n                            crosshair.style.opacity = '0';\n                            crosshairtooltip.style.opacity = '0';\n                        }\n                        else {\n                            crosshair.setAttribute('opacity', '0');\n                        }\n                        chart.startMove = false;\n                        if (chart.tooltipModule) {\n                            chart.tooltipModule.valueX = null;\n                            chart.tooltipModule.valueY = null;\n                        }\n                    }\n                });\n            }, duration);\n        }\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} module name\n     */\n    Crosshair.prototype.getModuleName = function () {\n        /**\n         * Returns the module name.\n         */\n        return 'Crosshair';\n    };\n    /**\n     * To destroy the crosshair.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crosshair.prototype.destroy = function () {\n        /**\n         * Destroy method performed here.\n         */\n    };\n    return Crosshair;\n}());\nexport { Crosshair };\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,OAAO,EAAEC,aAAa,QAAQ,sBAAsB;AACxE,SAASC,WAAW,EAAEC,gBAAgB,EAAEC,SAAS,EAAEC,sBAAsB,EAAEC,gBAAgB,EAAEC,aAAa,EAAEC,YAAY,EAAEC,aAAa,EAAEC,iBAAiB,EAAEC,cAAc,QAAQ,2BAA2B;AAC7M,SAASC,UAAU,EAAEC,IAAI,EAAEC,UAAU,EAAEC,WAAW,EAAEC,WAAW,QAAQ,0BAA0B;AACjG,SAASC,SAAS,QAAQ,4BAA4B;AACtD;AACA;AACA;AACA,IAAIC,SAAS,GAAG,aAAe,YAAY;EACvC;AACJ;AACA;AACA;AACA;EACI,SAASA,SAASA,CAACC,KAAK,EAAE;IACtB,IAAI,CAACC,aAAa,GAAG,IAAIb,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC;IAC5C,IAAI,CAACc,EAAE,GAAG,CAAC;IACX,IAAI,CAACC,EAAE,GAAG,CAAC;IACX,IAAI,CAACC,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,qBAAqB,GAAG,CAAC;IAC9B,IAAI,CAACC,sBAAsB,GAAG,CAAC;IAC/B,IAAI,CAACN,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACO,SAAS,GAAG,IAAI,CAACP,KAAK,CAACQ,OAAO,CAACC,EAAE;IACtC,IAAI,CAACC,WAAW,GAAG,IAAIb,WAAW,CAAC,IAAI,CAACG,KAAK,CAACQ,OAAO,CAACC,EAAE,CAAC;IACzD,IAAI,IAAI,CAACT,KAAK,CAACW,SAAS,CAACC,UAAU,IAAI,IAAI,CAACZ,KAAK,CAACW,SAAS,CAACE,iBAAiB,EAAE;MAC3E,IAAI,CAACC,IAAI,GAAG,IAAIhB,SAAS,CAAC,IAAI,CAACE,KAAK,CAAC;IACzC;IACA,IAAI,CAACe,gBAAgB,CAAC,CAAC;EAC3B;EACA;AACJ;AACA;AACA;AACA;AACA;EACIhB,SAAS,CAACiB,SAAS,CAACD,gBAAgB,GAAG,YAAY;IAC/C,IAAI,IAAI,CAACf,KAAK,CAACiB,WAAW,EAAE;MACxB;IACJ;IACA,IAAIC,WAAW,GAAGrC,OAAO,CAACsC,SAAS,GAAG,cAAc,GAAG,YAAY;IACnE,IAAI,CAACnB,KAAK,CAACoB,EAAE,CAACvC,OAAO,CAACwC,cAAc,EAAE,IAAI,CAACC,gBAAgB,EAAE,IAAI,CAAC;IAClE,IAAI,CAACtB,KAAK,CAACoB,EAAE,CAACvC,OAAO,CAAC0C,aAAa,EAAE,IAAI,CAACC,cAAc,EAAE,IAAI,CAAC;IAC/D,IAAI,CAACxB,KAAK,CAACoB,EAAE,CAACF,WAAW,EAAE,IAAI,CAACO,iBAAiB,EAAE,IAAI,CAAC;IACxD,IAAI,CAACzB,KAAK,CAACoB,EAAE,CAAC,SAAS,EAAE,IAAI,CAACM,SAAS,EAAE,IAAI,CAAC;EAClD,CAAC;EACD3B,SAAS,CAACiB,SAAS,CAACQ,cAAc,GAAG,YAAY;IAC7C,IAAI,IAAI,CAACxB,KAAK,CAAC2B,SAAS,EAAE;MACtB,IAAI,CAACC,eAAe,CAAC,IAAI,CAAC;IAC9B;EACJ,CAAC;EACD7B,SAAS,CAACiB,SAAS,CAACS,iBAAiB,GAAG,YAAY;IAChD,IAAI,CAACG,eAAe,CAAC,IAAI,CAAC;EAC9B,CAAC;EACD7B,SAAS,CAACiB,SAAS,CAACM,gBAAgB,GAAG,UAAUO,KAAK,EAAE;IACpD,IAAI7B,KAAK,GAAG,IAAI,CAACA,KAAK;IACtB,IAAIA,KAAK,CAAC8B,UAAU,IAAI9B,KAAK,CAAC8B,UAAU,CAACC,SAAS,EAAE;MAChD,IAAI/B,KAAK,CAACgC,MAAM,GAAGhC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACC,CAAC,EAAE;QAC5DnC,KAAK,CAACgC,MAAM,GAAGhC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACC,CAAC;MAC9D,CAAC,MACI,IAAInC,KAAK,CAACgC,MAAM,GAAGhC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACC,CAAC,GAAGnC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACE,MAAM,EAAE;QACpHpC,KAAK,CAACgC,MAAM,GAAGhC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACC,CAAC,GAAGnC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACE,MAAM;MACjH;IACJ;IACA,IAAIP,KAAK,CAACQ,IAAI,KAAK,WAAW,KAAKxD,OAAO,CAACyD,KAAK,IAAIzD,OAAO,CAAC0D,MAAM,CAAC,IAAIvC,KAAK,CAAC2B,SAAS,IAAIE,KAAK,CAACW,cAAc,EAAE;MAC5GX,KAAK,CAACW,cAAc,CAAC,CAAC;IAC1B;IACA;IACA,IAAI,CAACxC,KAAK,CAACyC,mBAAmB,EAAE;MAC5B,IAAIzC,KAAK,CAACW,SAAS,CAAC+B,MAAM,IAAIrD,YAAY,CAACW,KAAK,CAAC2C,MAAM,EAAE3C,KAAK,CAACgC,MAAM,EAAEhC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAAC,EAAE;QAC/G,IAAIlC,KAAK,CAAC2B,SAAS,IAAI,CAAC3B,KAAK,CAAC4C,OAAO,EAAE;UACnC,IAAI,CAACjC,SAAS,CAAC,CAAC;QACpB;MACJ,CAAC,MACI;QACD,IAAI,CAACiB,eAAe,CAAC,IAAI,CAAC;MAC9B;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI7B,SAAS,CAACiB,SAAS,CAACU,SAAS,GAAG,YAAY;IACxC,IAAI1B,KAAK,GAAG,IAAI,CAACA,KAAK;IACtB,IAAIX,YAAY,CAACW,KAAK,CAAC2C,MAAM,EAAE3C,KAAK,CAACgC,MAAM,EAAEhC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAAC,EAAE;MACrF,IAAI,CAACvB,SAAS,CAAC,CAAC;IACpB;IACA,OAAO,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIZ,SAAS,CAACiB,SAAS,CAAC6B,eAAe,GAAG,UAAU7C,KAAK,EAAE;IACnD,IAAIc,IAAI,GAAG,IAAI,CAACA,IAAI,CAACgC,OAAO,CAAC,CAAC;IAC9B,IAAIC,cAAc,GAAG,EAAE;IACvB,IAAIC,cAAc,GAAGhD,KAAK,CAACiD,YAAY,GAAG,GAAG,GAAG,GAAG;IACnD,IAAIC,gBAAgB,GAAG,IAAI;IAC3B,IAAIC,YAAY,GAAG,IAAI;IACvB,IAAIC,aAAa,GAAGC,QAAQ,CAAC,CAAC;IAC9B,IAAIC,eAAe,GAAGN,cAAc,KAAK,GAAG,GAAGhD,KAAK,CAAC2C,MAAM,GAAG3C,KAAK,CAACgC,MAAM;IAC1E,IAAIuB,gBAAgB,GAAG,KAAK;IAC5B,IAAIC,aAAa,GAAG,IAAI,CAAC1C,IAAI,CAAC2C,YAAY,CAAC,IAAI,CAACzD,KAAK,CAAC0D,aAAa,CAAC;IACpE,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG5D,KAAK,CAAC0D,aAAa,EAAEC,EAAE,GAAGC,EAAE,CAACC,MAAM,EAAEF,EAAE,EAAE,EAAE;MAC7D,IAAIG,MAAM,GAAGF,EAAE,CAACD,EAAE,CAAC;MACnBJ,gBAAgB,GAAGA,gBAAgB,GAAGA,gBAAgB,GAAGO,MAAM,CAACC,OAAO;MACvE,IAAID,MAAM,CAACC,OAAO,IAAID,MAAM,CAACE,QAAQ,KAAK,WAAW,EAAE;QACnD;QACA,IAAIC,WAAW,GAAG,IAAI,CAACnD,IAAI,CAACoD,WAAW,CAAClE,KAAK,EAAE8D,MAAM,EAAEN,aAAa,CAAC,IAAI1C,IAAI;QAC7E,IAAImD,WAAW,IAAIA,WAAW,CAACE,KAAK,IAAIF,WAAW,CAACE,KAAK,CAACC,eAAe,CAAC,CAAC,CAAC,EAAE;UAC1E,IAAIC,aAAa,GAAGJ,WAAW,CAACE,KAAK,CAACC,eAAe,CAAC,CAAC,CAAC,CAACpB,cAAc,CAAC,GACpEiB,WAAW,CAACH,MAAM,CAACQ,QAAQ,CAACtB,cAAc,CAAC;UAC/C,IAAIhD,KAAK,CAACW,SAAS,CAACC,UAAU,IAAIZ,KAAK,CAACW,SAAS,CAACE,iBAAiB,EAAE;YACjEkC,cAAc,CAACwB,IAAI,CAACF,aAAa,CAAC,CAAC,CAAC;YACpC;YACA,IAAIG,UAAU,GAAGC,IAAI,CAACC,GAAG,CAACL,aAAa,GAAGf,eAAe,CAAC;YAC1D,IAAIkB,UAAU,GAAGpB,aAAa,EAAE;cAC5BA,aAAa,GAAGoB,UAAU;cAC1BrB,YAAY,GAAGkB,aAAa;cAC5BnB,gBAAgB,GAAGe,WAAW;YAClC;UACJ;QACJ;MACJ;IACJ;IACA;IACA,IAAI,CAACjE,KAAK,CAACW,SAAS,CAACC,UAAU,IAAIZ,KAAK,CAACW,SAAS,CAACE,iBAAiB,KAAKqC,gBAAgB,EAAE;MACvFpC,IAAI,GAAGoC,gBAAgB;MACvBlD,KAAK,CAAC2E,eAAe,CAACvE,cAAc,GAAG,CAAC;MACxC,IAAIJ,KAAK,CAACW,SAAS,CAACE,iBAAiB,IAAIC,IAAI,CAACgD,MAAM,CAACc,KAAK,CAACC,SAAS,KAAK,UAAU,EAAE;QACjF,IAAIC,YAAY,GAAG9E,KAAK,CAACiD,YAAY,IAAIjD,KAAK,CAAC+E,mBAAmB,GAC9D/E,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAACE,MAAM,GAAGpC,KAAK,CAACiC,oBAAoB,CAACC,cAAc,CAAC8C,KAAK;QACtG,IAAIC,sBAAsB,GAAGH,YAAY,GAAGhE,IAAI,CAACgD,MAAM,CAACc,KAAK,CAACM,YAAY,CAACC,KAAK;QAChF,IAAIC,qBAAqB,GAAG,CAACtE,IAAI,CAACqD,KAAK,CAACkB,MAAM,GAAGvE,IAAI,CAACgD,MAAM,CAACc,KAAK,CAACM,YAAY,CAACI,GAAG,KAC9ExE,IAAI,CAACgD,MAAM,CAACc,KAAK,CAACM,YAAY,CAACK,GAAG,GAAGzE,IAAI,CAACgD,MAAM,CAACc,KAAK,CAACM,YAAY,CAACI,GAAG,CAAC;QAC7EtF,KAAK,CAAC2E,eAAe,CAACtE,qBAAqB,GAAGoE,IAAI,CAACc,GAAG,CAAC,CAAC,EAAGN,sBAAsB,GAAG,CAAC,GACjFG,qBAAqB,GAAGN,YAAY,CAAC;QACzC9E,KAAK,CAAC2E,eAAe,CAACrE,sBAAsB,GAAGmE,IAAI,CAACc,GAAG,CAAC,CAAC,EAAGH,qBAAqB,GAAGN,YAAY,GAC3FG,sBAAsB,GAAG,CAAE,GAAIH,YAAY,CAAC;QACjD9E,KAAK,CAAC2E,eAAe,CAACvE,cAAc,GAAGqE,IAAI,CAACc,GAAG,CAAC,CAAC,EAAEN,sBAAsB,GAAGjF,KAAK,CAAC2E,eAAe,CAACtE,qBAAqB,GACnHL,KAAK,CAAC2E,eAAe,CAACrE,sBAAsB,CAAC;MACrD;IACJ;IACA,IAAIQ,IAAI,IAAIA,IAAI,CAACqD,KAAK,EAAE;MACpB,IAAI,CAACrD,IAAI,CAAC0E,eAAe,CAAC1E,IAAI,EAAEd,KAAK,EAAE,IAAI,CAAC;IAChD;IACA,OAAOuD,gBAAgB;EAC3B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIxD,SAAS,CAACiB,SAAS,CAACL,SAAS,GAAG,YAAY;IACxC,IAAI8E,mBAAmB,GAAG,IAAI,CAACzF,KAAK,CAAC8D,MAAM,CAAC4B,MAAM,CAAC,UAAU5B,MAAM,EAAE;MAAE,OAAOA,MAAM,CAACC,OAAO;IAAE,CAAC,CAAC,CAACF,MAAM;IACvG,IAAI8B,aAAa,GAAG,IAAI;IACxB,IAAI,IAAI,CAAC3F,KAAK,CAACW,SAAS,CAACC,UAAU,IAAI,IAAI,CAACZ,KAAK,CAACW,SAAS,CAACE,iBAAiB,EAAE;MAC3E8E,aAAa,GAAG,IAAI,CAAC9C,eAAe,CAAC,IAAI,CAAC7C,KAAK,CAAC;IACpD;IACA,IAAIA,KAAK,GAAG,IAAI,CAACA,KAAK;IACtB,IAAI4F,eAAe,GAAG,EAAE;IACxB,IAAIC,aAAa,GAAG,EAAE;IACtB,IAAIC,OAAO;IACX,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,iBAAiB,CAAC;IAClF,IAAII,SAAS,GAAGX,KAAK,CAACW,SAAS;IAC/B,IAAIuF,UAAU,GAAGF,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,UAAU,CAAC;IACrE,IAAI4F,SAAS,GAAGnG,KAAK,CAACiC,oBAAoB,CAACC,cAAc;IACzD,IAAIkE,UAAU,GAAGpG,KAAK,CAACqG,YAAY,GAAGL,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,oBAAoB,CAAC,GAChGyF,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,kBAAkB,CAAC;IAChE,IAAI+F,YAAY;IAChB,IAAIC,KAAK,GAAGP,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,YAAY,CAAC;IAClE,IAAIP,KAAK,CAACqG,YAAY,EAAE;MACpB,IAAI,CAACE,KAAK,EAAE;QACRA,KAAK,GAAGzH,aAAa,CAAC,KAAK,EAAE;UACzB2B,EAAE,EAAE,IAAI,CAACF,SAAS,GAAG,YAAY;UAAEiG,MAAM,EAAE;QAC/C,CAAC,CAAC;QACFJ,UAAU,CAACK,WAAW,CAACF,KAAK,CAAC;MACjC;IACJ;IACA,IAAI,CAACG,aAAa,CAAC,CAAC;IACpB,IAAIjB,mBAAmB,KAAK,CAAC,IAAKzF,KAAK,CAACW,SAAS,CAACC,UAAU,IAAI,IAAI,CAAC+F,MAAM,KAAKC,SAAU,IACtF5G,KAAK,CAAC6G,WAAW,IAAI7G,KAAK,CAAC8G,OAAO,CAACpE,MAAM,IAAI1C,KAAK,CAAC+G,aAAa,IAC5D,CAAC1H,YAAY,CAACW,KAAK,CAAC+G,aAAa,CAACC,MAAM,EAAEhH,KAAK,CAAC+G,aAAa,CAACJ,MAAM,EAAER,SAAS,CAAC,IACnFnG,KAAK,CAACW,SAAS,CAACC,UAAU,IAAI,CAAC+E,aAAc,EAAE;MAChD,OAAO,IAAI;IACf;IACA,IAAI,CAACqB,MAAM,GAAGhH,KAAK,CAACW,SAAS,CAACC,UAAU,IAAIZ,KAAK,CAACW,SAAS,CAACE,iBAAiB,GAAG,IAAI,CAACmG,MAAM,GACtFhH,KAAK,CAAC8G,OAAO,CAACpE,MAAM,IAAI1C,KAAK,CAAC+G,aAAa,IAAI/G,KAAK,CAAC+G,aAAa,CAACC,MAAM,GAAGhH,KAAK,CAAC+G,aAAa,CAACC,MAAM,GAAGhH,KAAK,CAAC2C,MAAO;IAC3H,IAAI,CAACgE,MAAM,GAAG3G,KAAK,CAACW,SAAS,CAACC,UAAU,IAAIZ,KAAK,CAACW,SAAS,CAACE,iBAAiB,GAAG,IAAI,CAAC8F,MAAM,GACtF3G,KAAK,CAAC8G,OAAO,CAACpE,MAAM,IAAI1C,KAAK,CAAC+G,aAAa,IAAI/G,KAAK,CAAC+G,aAAa,CAACJ,MAAM,GAAG3G,KAAK,CAAC+G,aAAa,CAACJ,MAAM,GAAG3G,KAAK,CAACgC,MAAO;IAC3H,IAAI,CAAChC,KAAK,CAACqG,YAAY,EAAE;MACrBD,UAAU,CAACa,YAAY,CAAC,SAAS,EAAE,GAAG,CAAC;IAC3C;IACA,IAAItG,SAAS,CAACuG,QAAQ,KAAK,MAAM,IAAIvG,SAAS,CAACuG,QAAQ,KAAK,YAAY,EAAE;MACtE,IAAKlH,KAAK,CAACW,SAAS,CAACE,iBAAiB,IAAI,IAAI,CAACT,cAAc,KAAK,CAAC,KAAMJ,KAAK,CAACiD,YAAY,IAAIjD,KAAK,CAAC+E,mBAAmB,CAAC,EAAE;QACvH,IAAIoC,uBAAuB,GAAG,IAAI,CAAC/G,cAAc;QACjDJ,KAAK,CAAC2E,eAAe,CAACgC,MAAM,GAAG,IAAI,CAACS,kCAAkC,CAAC,IAAI,CAACT,MAAM,EAAE,IAAI,EAAE3G,KAAK,CAAC;QAChG,IAAImC,CAAC,GAAG,IAAI,CAACwE,MAAM,GAAIQ,uBAAuB,GAAG,CAAE;QACnDvB,eAAe,GAAG,IAAI,GAAGO,SAAS,CAACkB,CAAC,GAAG,GAAG,GAAGlF,CAAC,GAC1C,KAAK,IAAIgE,SAAS,CAACkB,CAAC,GAAGlB,SAAS,CAACnB,KAAK,CAAC,GAAG,GAAG,GAAG7C,CAAC,GACjD,KAAK,IAAIgE,SAAS,CAACkB,CAAC,GAAGlB,SAAS,CAACnB,KAAK,CAAC,GAAG,GAAG,IAAI7C,CAAC,GAAGgF,uBAAuB,CAAC,GAC7E,KAAK,GAAGhB,SAAS,CAACkB,CAAC,GAAG,GAAG,IAAIlF,CAAC,GAAGgF,uBAAuB,CAAC,GAAG,IAAI;MACxE,CAAC,MACI;QACDvB,eAAe,IAAI,IAAI,GAAGO,SAAS,CAACkB,CAAC,GAAG,GAAG,GAAG,IAAI,CAACV,MAAM,GACrD,KAAK,IAAIR,SAAS,CAACkB,CAAC,GAAGlB,SAAS,CAACnB,KAAK,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC2B,MAAM;MACnE;IACJ;IACA,IAAIhG,SAAS,CAACuG,QAAQ,KAAK,MAAM,IAAIvG,SAAS,CAACuG,QAAQ,KAAK,UAAU,EAAE;MACpE,IAAKlH,KAAK,CAACW,SAAS,CAACE,iBAAiB,IAAI,IAAI,CAACT,cAAc,KAAK,CAAC,IAAK,CAACJ,KAAK,CAAC+E,mBAAmB,EAAE;QAChG,IAAIoC,uBAAuB,GAAG,IAAI,CAAC/G,cAAc;QACjDJ,KAAK,CAAC2E,eAAe,CAACqC,MAAM,GAAG,IAAI,CAACI,kCAAkC,CAAC,IAAI,CAACJ,MAAM,EAAE,KAAK,EAAEhH,KAAK,CAAC;QACjG,IAAIqH,CAAC,GAAG,IAAI,CAACL,MAAM,GAAIG,uBAAuB,GAAG,CAAE;QACnDtB,aAAa,GAAG,IAAI,GAAGwB,CAAC,GAAG,GAAG,GAAGlB,SAAS,CAAChE,CAAC,GACxC,KAAK,IAAIkF,CAAC,GAAGF,uBAAuB,CAAC,GAAG,GAAG,GAAGhB,SAAS,CAAChE,CAAC,GACzD,KAAK,IAAIkF,CAAC,GAAGF,uBAAuB,CAAC,GAAG,GAAG,IAAIhB,SAAS,CAAChE,CAAC,GAAGgE,SAAS,CAAC/D,MAAM,CAAC,GAC9E,KAAK,GAAGiF,CAAC,GAAG,GAAG,IAAIlB,SAAS,CAAChE,CAAC,GAAGgE,SAAS,CAAC/D,MAAM,CAAC,GAAG,IAAI;MACjE,CAAC,MACI;QACDyD,aAAa,IAAI,IAAI,GAAG,IAAI,CAACmB,MAAM,GAAG,GAAG,GAAGb,SAAS,CAAChE,CAAC,GACnD,KAAK,GAAG,IAAI,CAAC6E,MAAM,GAAG,GAAG,IAAIb,SAAS,CAAChE,CAAC,GAAGgE,SAAS,CAAC/D,MAAM,CAAC;MACpE;IACJ;IACA,IAAIpC,KAAK,CAACqG,YAAY,EAAE;MACpB,IAAI,CAACN,gBAAgB,EAAE;QACnBA,gBAAgB,GAAG,IAAI,CAACrF,WAAW,CAAC4G,WAAW,CAAC;UAAE,IAAI,EAAE,IAAI,CAAC/G,SAAS,GAAG;QAAkB,CAAC,CAAC;MACjG;MACA,IAAIA,SAAS,GAAGP,KAAK,CAAC8G,OAAO,CAACpE,MAAM,GAAG1C,KAAK,CAACQ,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGT,KAAK,CAACQ,OAAO,CAACC,EAAE,GAAG,MAAM;MACpG6F,YAAY,GAAG,IAAI,CAAC5F,WAAW,CAAC6G,SAAS,CAAC;QACtC9G,EAAE,EAAEF,SAAS;QACbyE,KAAK,EAAEhF,KAAK,CAACwH,aAAa,CAACxC,KAAK;QAChC5C,MAAM,EAAEpC,KAAK,CAACwH,aAAa,CAACpF;MAChC,CAAC,CAAC;MACF,IAAIpC,KAAK,CAAC8G,OAAO,CAACpE,MAAM,EAAE;QACtBwD,UAAU,GAAG,CAACA,UAAU,GAAGlG,KAAK,CAAC+G,aAAa,CAACjI,aAAa,CAAC,CAAC,GAAGoH,UAAU;QAC3EA,UAAU,CAACO,WAAW,CAACH,YAAY,CAAC;QACpCF,UAAU,CAACK,WAAW,CAACP,UAAU,CAAC;MACtC;MACAJ,OAAO,GAAG,IAAIrG,UAAU,CAAC,IAAI,CAACc,SAAS,GAAG,iBAAiB,EAAE,MAAM,EAAEI,SAAS,CAAC8G,IAAI,CAACzC,KAAK,EAAErE,SAAS,CAAC+G,mBAAmB,IAAI/G,SAAS,CAAC8G,IAAI,CAACE,KAAK,IAAI3H,KAAK,CAAC4H,UAAU,CAACC,aAAa,EAAElH,SAAS,CAACmH,OAAO,EAAG9H,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAIhI,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,IAAI/H,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAIrH,SAAS,CAACsH,SAAS,IAAI,KAAK,GAAGtH,SAAS,CAACsH,SAAS,EAAErC,eAAe,CAAC;MACxY,IAAI,CAACsC,iBAAiB,CAACpC,OAAO,EAAES,KAAK,EAAEJ,SAAS,CAACkB,CAAC,EAAE,IAAI,CAACV,MAAM,EAAER,SAAS,CAACnB,KAAK,EAAE,CAAC,EAAEY,eAAe,CAAC;MACrG;AACZ;AACA;AACA;MACYE,OAAO,GAAG,IAAIrG,UAAU,CAAC,IAAI,CAACc,SAAS,GAAG,eAAe,EAAE,MAAM,EAAEI,SAAS,CAAC8G,IAAI,CAACzC,KAAK,EAAErE,SAAS,CAACwH,iBAAiB,IAAIxH,SAAS,CAAC8G,IAAI,CAACE,KAAK,IAAI3H,KAAK,CAAC4H,UAAU,CAACC,aAAa,EAAElH,SAAS,CAACmH,OAAO,EAAG9H,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAIhI,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,IAAI/H,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAIrH,SAAS,CAACsH,SAAS,IAAI,KAAK,GAAGtH,SAAS,CAACsH,SAAS,EAAEpC,aAAa,CAAC;MAClY,IAAI,CAACqC,iBAAiB,CAACpC,OAAO,EAAES,KAAK,EAAE,IAAI,CAACS,MAAM,EAAEb,SAAS,CAAChE,CAAC,EAAE,CAAC,EAAEgE,SAAS,CAAC/D,MAAM,EAAEyD,aAAa,CAAC;MACpG,IAAI,CAACuC,iBAAiB,CAACpI,KAAK,EAAEmG,SAAS,EAAEJ,gBAAgB,CAAC;MAC1DO,YAAY,CAACG,WAAW,CAACV,gBAAgB,CAAC;MAC1C,IAAI,CAAC/F,KAAK,CAAC8G,OAAO,CAACpE,MAAM,EAAE;QACvB6D,KAAK,CAACE,WAAW,CAACH,YAAY,CAAC;MACnC;IACJ,CAAC,MACI;MACD,IAAIF,UAAU,CAACiC,UAAU,CAACxE,MAAM,KAAK,CAAC,EAAE;QACpC,IAAIyE,mBAAmB,GAAItI,KAAK,CAACW,SAAS,CAACE,iBAAiB,IAAI,IAAI,CAACT,cAAc,KAAK,CAAC,KACpFJ,KAAK,CAACiD,YAAY,IAAIjD,KAAK,CAAC+E,mBAAmB,CAAC;QACrD,IAAIwD,iBAAiB,GAAIvI,KAAK,CAACW,SAAS,CAACE,iBAAiB,IAAI,IAAI,CAACT,cAAc,KAAK,CAAC,IACnF,CAACJ,KAAK,CAAC+E,mBAAmB;QAC9BgB,gBAAgB,GAAG/F,KAAK,CAACwI,QAAQ,CAAClB,WAAW,CAAC;UAAE,IAAI,EAAE,IAAI,CAAC/G,SAAS,GAAG;QAAkB,CAAC,CAAC;QAC3FuF,OAAO,GAAG,IAAIrG,UAAU,CAAC,IAAI,CAACc,SAAS,GAAG,iBAAiB,EAAE+H,mBAAmB,GAAI3H,SAAS,CAAC+G,mBAAmB,IAAI/G,SAAS,CAAC8G,IAAI,CAACE,KAAK,GAAI,IAAI,CAACc,qBAAqB,CAAC9H,SAAS,CAAC+G,mBAAmB,IAAI/G,SAAS,CAAC8G,IAAI,CAACE,KAAK,CAAC,GAAG3H,KAAK,CAAC4H,UAAU,CAACc,mBAAmB,GAAG,MAAM,EAAEJ,mBAAmB,GAAG,CAAC,GAAG3H,SAAS,CAAC8G,IAAI,CAACzC,KAAK,EAAEsD,mBAAmB,GAAG,MAAM,GAAG3H,SAAS,CAAC+G,mBAAmB,IAAI/G,SAAS,CAAC8G,IAAI,CAACE,KAAK,IAAI3H,KAAK,CAAC4H,UAAU,CAACC,aAAa,EAAElH,SAAS,CAACmH,OAAO,EAAEQ,mBAAmB,GAAG,IAAI,GAAItI,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAIhI,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,IAAI/H,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAIrH,SAAS,CAACsH,SAAS,IAAI,KAAK,GAAGtH,SAAS,CAACsH,SAAS,EAAErC,eAAe,CAAC;QACzqB,IAAI,CAAC+C,mBAAmB,CAAC7C,OAAO,EAAEM,UAAU,CAAC;QAC7CN,OAAO,GAAG,IAAIrG,UAAU,CAAC,IAAI,CAACc,SAAS,GAAG,eAAe,EAAEgI,iBAAiB,GAAI5H,SAAS,CAACwH,iBAAiB,IAAIxH,SAAS,CAAC8G,IAAI,CAACE,KAAK,GAAI,IAAI,CAACc,qBAAqB,CAAC9H,SAAS,CAACwH,iBAAiB,IAAIxH,SAAS,CAAC8G,IAAI,CAACE,KAAK,CAAC,GAAG3H,KAAK,CAAC4H,UAAU,CAACc,mBAAmB,GAAG,MAAM,EAAEH,iBAAiB,GAAG,CAAC,GAAG5H,SAAS,CAAC8G,IAAI,CAACzC,KAAK,EAAEuD,iBAAiB,GAAG,MAAM,GAAG5H,SAAS,CAACwH,iBAAiB,IAAIxH,SAAS,CAAC8G,IAAI,CAACE,KAAK,IAAI3H,KAAK,CAAC4H,UAAU,CAACC,aAAa,EAAElH,SAAS,CAACmH,OAAO,EAAES,iBAAiB,GAAG,IAAI,GAAIvI,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAIhI,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,IAAI/H,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAIrH,SAAS,CAACsH,SAAS,IAAI,KAAK,GAAGtH,SAAS,CAACsH,SAAS,EAAEpC,aAAa,CAAC;QACvpB,IAAI,CAAC8C,mBAAmB,CAAC7C,OAAO,EAAEM,UAAU,CAAC;QAC7CA,UAAU,CAACK,WAAW,CAACV,gBAAgB,CAAC;QACxC,IAAI,CAACqC,iBAAiB,CAACpI,KAAK,EAAEmG,SAAS,EAAEC,UAAU,CAACwC,SAAS,CAAC;MAClE,CAAC,MACI;QACD5C,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,iBAAiB,CAAC,CAAC0G,YAAY,CAAC,GAAG,EAAErB,eAAe,CAAC;QAC9FI,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,eAAe,CAAC,CAAC0G,YAAY,CAAC,GAAG,EAAEpB,aAAa,CAAC;QAC1F,IAAI,CAACuC,iBAAiB,CAACpI,KAAK,EAAEmG,SAAS,EAAEC,UAAU,CAACwC,SAAS,CAAC;MAClE;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI7I,SAAS,CAACiB,SAAS,CAACyH,qBAAqB,GAAG,UAAUd,KAAK,EAAE;IACzD,IAAIkB,QAAQ,GAAGtJ,iBAAiB,CAACC,cAAc,CAACmI,KAAK,CAAC,CAAC;IACvD,OAAO,MAAM,GAAGkB,QAAQ,CAACC,CAAC,GAAG,GAAG,GAAGD,QAAQ,CAACE,CAAC,GAAG,GAAG,GAAGF,QAAQ,CAACG,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG;EACvF,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIjJ,SAAS,CAACiB,SAAS,CAACoG,kCAAkC,GAAG,UAAU6B,eAAe,EAAEC,uBAAuB,EAAElJ,KAAK,EAAE;IAChH,IAAIA,KAAK,CAAC2E,eAAe,CAACtE,qBAAqB,GAAG,CAAC,EAAE;MACjD4I,eAAe,IAAIC,uBAAuB,GAAG,CAAClJ,KAAK,CAAC2E,eAAe,CAACtE,qBAAqB,GAAG,CAAC,GACzFL,KAAK,CAAC2E,eAAe,CAACtE,qBAAqB,GAAG,CAAC;IACvD;IACA,IAAIL,KAAK,CAAC2E,eAAe,CAACrE,sBAAsB,GAAG,CAAC,EAAE;MAClD2I,eAAe,IAAIC,uBAAuB,GAAGlJ,KAAK,CAAC2E,eAAe,CAACrE,sBAAsB,GAAG,CAAC,GACzF,CAACN,KAAK,CAAC2E,eAAe,CAACrE,sBAAsB,GAAG,CAAC;IACzD;IACA,OAAO2I,eAAe;EAC1B,CAAC;EACDlJ,SAAS,CAACiB,SAAS,CAAC2H,mBAAmB,GAAG,UAAU7C,OAAO,EAAEM,UAAU,EAAE;IACrE,IAAI+C,UAAU,GAAG,IAAI,CAACnJ,KAAK,CAACwI,QAAQ,CAACY,QAAQ,CAACtD,OAAO,CAAC;IACtDM,UAAU,CAACK,WAAW,CAAC0C,UAAU,CAAC;EACtC,CAAC;EACDpJ,SAAS,CAACiB,SAAS,CAACkH,iBAAiB,GAAG,UAAUpC,OAAO,EAAEM,UAAU,EAAEiD,IAAI,EAAEC,GAAG,EAAEtE,KAAK,EAAE5C,MAAM,EAAEmH,SAAS,EAAE;IACxG,IAAI,CAACvD,QAAQ,CAACC,cAAc,CAACH,OAAO,CAACrF,EAAE,CAAC,IAAI8I,SAAS,EAAE;MACnD,IAAI9B,IAAI,GAAG3I,aAAa,CAAC,KAAK,EAAE;QAC5B2B,EAAE,EAAEqF,OAAO,CAACrF;MAChB,CAAC,CAAC;MACF2F,UAAU,CAACK,WAAW,CAACgB,IAAI,CAAC;IAChC;IACA,IAAIzB,QAAQ,CAACC,cAAc,CAACH,OAAO,CAACrF,EAAE,CAAC,EAAE;MACrC,IAAI+I,KAAK,GAAG,MAAM,GAAGF,GAAG,CAACG,QAAQ,CAAC,CAAC,GAAG,KAAK,GACvC,OAAO,GAAGJ,IAAI,CAACI,QAAQ,CAAC,CAAC,GAAG,KAAK,GACjC,QAAQ,GAAGzE,KAAK,GAAG,KAAK,GACxB,SAAS,GAAG5C,MAAM,GAAG,KAAK,GAC1B,OAAO,GAAG0D,OAAO,CAAC4D,MAAM,GAAG,GAAG,GAC9B,sBAAsB,GAAG5D,OAAO,CAAC4D,MAAM,GAAG,GAAG,GAC7C,WAAW,GAAG5D,OAAO,CAACgC,OAAO,GAAG,KAAK,GACrC,oBAAoB;MACxB,IAAI6B,aAAa,GAAG3D,QAAQ,CAACC,cAAc,CAACH,OAAO,CAACrF,EAAE,CAAC;MACvD,IAAImJ,gBAAgB,GAAG5D,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,iBAAiB,CAAC;MAClFoJ,aAAa,CAACH,KAAK,CAACK,OAAO,GAAGL,KAAK;MACnCpD,UAAU,CAACoD,KAAK,CAAC1B,OAAO,GAAG,GAAG;MAC9B,IAAI8B,gBAAgB,EAAE;QAClBA,gBAAgB,CAACJ,KAAK,CAAC1B,OAAO,GAAG,GAAG;MACxC;IACJ;EACJ,CAAC;EACD/H,SAAS,CAACiB,SAAS,CAACoH,iBAAiB,GAAG,UAAUpI,KAAK,EAAEmG,SAAS,EAAE2D,SAAS,EAAE;IAC3E,IAAIC,IAAI;IACR,IAAIC,IAAI;IACR,IAAIC,IAAI;IACR,IAAIC,WAAW;IACf,IAAIC,QAAQ;IACZ,IAAIrE,OAAO;IACX,IAAIsE,OAAO,GAAG,CAAC;IACf,IAAIb,SAAS;IACb,IAAIc,QAAQ;IACZ,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,QAAQ,GAAGvK,KAAK,CAACwK,eAAe,CAAC3G,MAAM,EAAEyG,CAAC,GAAGC,QAAQ,EAAED,CAAC,EAAE,EAAE;MACxEP,IAAI,GAAG/J,KAAK,CAACwK,eAAe,CAACF,CAAC,CAAC;MAC/BD,QAAQ,GAAG,CAACN,IAAI,CAACU,mBAAmB,GAAGV,IAAI,CAACE,IAAI,GAAGF,IAAI,CAACW,WAAW;MACnE,IAAIX,IAAI,CAACY,gBAAgB,CAACjI,MAAM,EAAE;QAC9B,IAAI2H,QAAQ,KAAM,IAAI,CAACrD,MAAM,IAAKqD,QAAQ,CAAChD,CAAC,GAAGgD,QAAQ,CAACrF,KAAM,IAAIqF,QAAQ,CAAChD,CAAC,IAAI,IAAI,CAACL,MAAM,IACtF,IAAI,CAACL,MAAM,IAAK0D,QAAQ,CAAClI,CAAC,GAAGkI,QAAQ,CAACjI,MAAO,IAAIiI,QAAQ,CAAClI,CAAC,IAAI,IAAI,CAACwE,MAAO,CAAC,EAAE;UAC/EuD,WAAW,GAAGlE,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,gBAAgB,GAAG+J,CAAC,CAAC;UAC5EH,QAAQ,GAAGnE,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,qBAAqB,GAAG+J,CAAC,CAAC;UAC9EN,IAAI,GAAG,IAAI,CAACY,WAAW,CAACb,IAAI,CAAC;UAC7B,IAAIC,IAAI,IAAIA,IAAI,CAAChC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;YAClCgC,IAAI,GAAG,IAAI,CAACY,WAAW,CAACb,IAAI,CAAC,CAACc,KAAK,CAAC,UAAU,CAAC;UACnD;UACA,IAAI,CAACb,IAAI,EAAE;YACP;UACJ;UACAC,IAAI,GAAG,IAAI,CAACa,eAAe,CAACd,IAAI,EAAED,IAAI,EAAE5D,SAAS,EAAEkE,QAAQ,CAAC;UAC5D,IAAIJ,IAAI,CAAC9H,CAAC,GAAG8H,IAAI,CAAC7H,MAAM,GAAG,CAAC,GAAGpC,KAAK,CAACwH,aAAa,CAACpF,MAAM,IAAI6H,IAAI,CAAC9H,CAAC,GAAG,CAAC,EAAE;YACrE;UACJ;UACA,IAAI+H,WAAW,KAAK,IAAI,EAAE;YACtB,IAAIlK,KAAK,CAACqG,YAAY,EAAE;cACpB6D,WAAW,GAAG,IAAI,CAACxJ,WAAW,CAAC0I,QAAQ,CAAC;gBACpC,IAAI,EAAE,IAAI,CAAC7I,SAAS,GAAG,gBAAgB,GAAG+J,CAAC;gBAC3C,MAAM,EAAEP,IAAI,CAACY,gBAAgB,CAACI,IAAI,IAAI/K,KAAK,CAAC4H,UAAU,CAACoD;cAC3D,CAAC,CAAC;YACN,CAAC,MACI;cACDd,WAAW,GAAGlK,KAAK,CAACwI,QAAQ,CAACY,QAAQ,CAAC;gBAClC,IAAI,EAAE,IAAI,CAAC7I,SAAS,GAAG,gBAAgB,GAAG+J,CAAC;gBAC3C,MAAM,EAAEP,IAAI,CAACY,gBAAgB,CAACI,IAAI,IAAI/K,KAAK,CAAC4H,UAAU,CAACoD;cAC3D,CAAC,EAAE,IAAI,CAAC;YACZ;YACAlB,SAAS,CAACrD,WAAW,CAACyD,WAAW,CAAC;YAClCpE,OAAO,GAAG,IAAInG,UAAU,CAAC,IAAI,CAACY,SAAS,GAAG,qBAAqB,GAAG+J,CAAC,EAAE,CAAC,EAAE,CAAC,EAAGtK,KAAK,CAAC8B,UAAU,IAAI9B,KAAK,CAACiL,SAAS,GAAI,KAAK,GAAG,OAAO,EAAEjB,IAAI,CAAC;YACzI,IAAIkB,MAAM,GAAGlL,KAAK,CAACqG,YAAY,GAAG,IAAI,CAAC3F,WAAW,GAAGV,KAAK,CAACwI,QAAQ;YACnE2B,QAAQ,GAAGpL,WAAW,CAACmM,MAAM,EAAEpF,OAAO,EAAEiE,IAAI,CAACY,gBAAgB,CAACQ,SAAS,EAAEpB,IAAI,CAACY,gBAAgB,CAACQ,SAAS,CAACxD,KAAK,IAAI3H,KAAK,CAAC4H,UAAU,CAACwD,kBAAkB,CAACzD,KAAK,EAAEmC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE9J,KAAK,CAACqG,YAAY,EAAE,IAAI,EAAE,IAAI,CAACrG,KAAK,CAAC4H,UAAU,CAACwD,kBAAkB,CAAC;UAC/R;UACA7B,SAAS,GAAGrK,sBAAsB,CAAC,IAAI,CAACgB,EAAE,EAAE,IAAI,CAACC,EAAE,EAAE8J,IAAI,EAAE,IAAI,CAAChK,aAAa,EAAE,CAAC,EAAE,IAAI,CAACoL,KAAK,EAAE,IAAI,CAACC,QAAQ,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAACvE,MAAM,EAAE,IAAI,CAACL,MAAM,CAAC;UACnJuD,WAAW,CAACjD,YAAY,CAAC,GAAG,EAAEsC,SAAS,CAAC;UACxC,IAAI,OAAOS,IAAI,KAAK,QAAQ,IAAIA,IAAI,CAACnG,MAAM,GAAG,CAAC,EAAE;YAC7C,KAAK,IAAI2H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxB,IAAI,CAACnG,MAAM,EAAE2H,CAAC,EAAE,EAAE;cAClCrB,QAAQ,CAAC9B,UAAU,CAACmD,CAAC,CAAC,CAACC,WAAW,GAAGzB,IAAI,CAACwB,CAAC,CAAC;YAChD;UACJ,CAAC,MACI;YACDrB,QAAQ,CAACsB,WAAW,GAAGzB,IAAI;UAC/B;UACAG,QAAQ,CAAClD,YAAY,CAAC,GAAG,EAAE,CAACgD,IAAI,CAAC5C,CAAC,GAAG+C,OAAO,IAAIpK,KAAK,CAACiL,SAAS,GAAG,IAAI,CAACS,WAAW,CAAC1G,KAAK,GAAG,CAAC,CAAC,EAAEyE,QAAQ,CAAC,CAAC,CAAC;UAC1GU,QAAQ,CAAClD,YAAY,CAAC,GAAG,EAAE,CAACgD,IAAI,CAAC9H,CAAC,GAAGiI,OAAO,GAAG,CAAC,GAAG,IAAI,CAACsB,WAAW,CAACtJ,MAAM,GAAG,CAAC,EAAEqH,QAAQ,CAAC,CAAC,CAAC;UAC3F,IAAIkC,QAAQ,GAAG,IAAI,CAAC3L,KAAK,CAACQ,OAAO,CAACC,EAAE,GAAG,SAAS;UAChD,IAAI,OAAOuJ,IAAI,KAAK,QAAQ,IAAIA,IAAI,CAACnG,MAAM,GAAG,CAAC,EAAE;YAC7C,IAAIzB,MAAM,GAAG,CAAC;YACd+H,QAAQ,CAAClD,YAAY,CAAC,GAAG,EAAE,CAACgD,IAAI,CAAC9H,CAAC,GAAGiI,OAAO,GAAG,CAAC,GAAG,IAAI,CAACsB,WAAW,CAACtJ,MAAM,IAAI,CAAC,GAAG4H,IAAI,CAACnG,MAAM,CAAC,EAAE4F,QAAQ,CAAC,CAAC,CAAC;YAC3G,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrB,QAAQ,CAACyB,QAAQ,CAAC/H,MAAM,EAAE2H,CAAC,EAAE,EAAE;cAC/CpJ,MAAM,IAAI,IAAI,CAACsJ,WAAW,CAACtJ,MAAM,GAAG4H,IAAI,CAACnG,MAAM;cAC/CsG,QAAQ,CAACyB,QAAQ,CAACJ,CAAC,CAAC,CAACvE,YAAY,CAAC,GAAG,EAAE,CAACgD,IAAI,CAAC5C,CAAC,GAAG+C,OAAO,IAAIpK,KAAK,CAACiL,SAAS,GAAG,IAAI,CAACS,WAAW,CAAC1G,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC0G,WAAW,CAAC1G,KAAK,GAAG,CAAC,EAAEyE,QAAQ,CAAC,CAAC,CAAC;cACnJU,QAAQ,CAACyB,QAAQ,CAACJ,CAAC,CAAC,CAACvE,YAAY,CAAC,GAAG,EAAG,CAAC4E,QAAQ,CAAC1B,QAAQ,CAAC2B,YAAY,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG1J,MAAM,EAAEqH,QAAQ,CAAC,CAAE,CAAC;cACxGU,QAAQ,CAACyB,QAAQ,CAACJ,CAAC,CAAC,CAAChC,KAAK,CAACuC,UAAU,GAAG,QAAQ;YACpD;UACJ;UACA,IAAI,IAAI,CAAC/L,KAAK,CAAC+H,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,YAAY,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,YAAY,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,EAAE;YACxL,IAAIiE,UAAU,GAAG,IAAI,CAAChM,KAAK,CAACwI,QAAQ,CAACyD,UAAU,CAAC,CAAC;YACjD,IAAIC,WAAW,GAAG,IAAI,CAAClM,KAAK,CAAC+H,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,QAAQ,GAAG,SAAS,GAAG,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,GAAG,SAAS,GAAG,IAAI;YAC5J,IAAIoE,WAAW,GAAG,IAAI,CAACnM,KAAK,CAAC+H,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC/H,KAAK,CAAC+H,KAAK,KAAK,qBAAqB,GAAG,CAAC,GAAG,IAAI;YACzIiE,UAAU,CAAC/E,YAAY,CAAC,IAAI,EAAE,IAAI,CAACjH,KAAK,CAACQ,OAAO,CAACC,EAAE,GAAG,wBAAwB,CAAC;YAC/EqJ,SAAS,CAACrD,WAAW,CAACuF,UAAU,CAAC;YACjC9B,WAAW,CAACjD,YAAY,CAAC,QAAQ,EAAEiF,WAAW,CAAC;YAC/ChC,WAAW,CAACjD,YAAY,CAAC,cAAc,EAAE,GAAG,GAAGkF,WAAW,CAAC;UAC/D,CAAC,MACI,IAAI,IAAI,CAACnM,KAAK,CAAC+H,KAAK,CAACC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE;YAC/CkC,WAAW,CAACjD,YAAY,CAAC,YAAY,EAAE,8DAA8D,CAAC;YACtGiD,WAAW,CAACjD,YAAY,CAAC,QAAQ,EAAEpI,OAAO,CAACuN,IAAI,GAAG,EAAE,GAAG,OAAO,GAAGT,QAAQ,GAAG,GAAG,CAAC;YAChF,IAAIU,MAAM,GAAG,cAAc,GAAGV,QAAQ,GAAG,qEAAqE;YAC9GU,MAAM,IAAI,2GAA2G;YACrHA,MAAM,IAAI,mGAAmG;YAC7G,IAAIL,UAAU,GAAG,IAAI,CAAChM,KAAK,CAACwI,QAAQ,CAACyD,UAAU,CAAC,CAAC;YACjDD,UAAU,CAAC/E,YAAY,CAAC,IAAI,EAAE,IAAI,CAACjH,KAAK,CAACQ,OAAO,CAACC,EAAE,GAAG,wBAAwB,CAAC;YAC/EyJ,WAAW,CAACzD,WAAW,CAACuF,UAAU,CAAC;YACnCA,UAAU,CAACM,SAAS,GAAGD,MAAM;UACjC;QACJ,CAAC,MACI;UACD/M,aAAa,CAAC,IAAI,CAACiB,SAAS,GAAG,gBAAgB,GAAG+J,CAAC,CAAC;UACpDhL,aAAa,CAAC,IAAI,CAACiB,SAAS,GAAG,qBAAqB,GAAG+J,CAAC,CAAC;QAC7D;MACJ;IACJ;EACJ,CAAC;EACDvK,SAAS,CAACiB,SAAS,CAAC4J,WAAW,GAAG,UAAUb,IAAI,EAAE;IAC9C,IAAIwC,KAAK;IACT,IAAI,CAACjB,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACD,KAAK,GAAG,KAAK;IAClB,IAAI,CAACE,MAAM,GAAG,KAAK;IACnB,IAAI,CAACiB,OAAO,GAAG,KAAK;IACpB,IAAIC,UAAU,GAAI1C,IAAI,CAAClF,SAAS,KAAK,UAAU,IAAIkF,IAAI,CAAC2C,cAAc,KAAK,cAAc,GACnF,GAAG,GAAG,CAAC;IACb,IAAIC,SAAS,GAAG5C,IAAI,CAAC6C,qBAAqB;IAC1C,IAAI7C,IAAI,CAAC8C,WAAW,KAAK,YAAY,EAAE;MACnCN,KAAK,GAAGvN,gBAAgB,CAACyF,IAAI,CAACC,GAAG,CAAC,IAAI,CAACsC,MAAM,GAAG+C,IAAI,CAACE,IAAI,CAAC5C,CAAC,CAAC,EAAE0C,IAAI,CAACE,IAAI,CAACjF,KAAK,EAAE+E,IAAI,CAAC,GAAG0C,UAAU;MACjG,IAAI,CAACnB,QAAQ,GAAG,CAACqB,SAAS;MAC1B,IAAI,CAACtB,KAAK,GAAGsB,SAAS;IAC1B,CAAC,MACI;MACDJ,KAAK,GAAGpN,gBAAgB,CAACsF,IAAI,CAACC,GAAG,CAAC,IAAI,CAACiC,MAAM,GAAGoD,IAAI,CAACE,IAAI,CAAC9H,CAAC,CAAC,EAAE4H,IAAI,CAACE,IAAI,CAAC7H,MAAM,EAAE2H,IAAI,CAAC,GAAG0C,UAAU;MAClG,IAAI,CAACD,OAAO,GAAGG,SAAS;MACxB,IAAI,CAACpB,MAAM,GAAG,CAACoB,SAAS;IAC5B;IACA,IAAI5C,IAAI,CAAClF,SAAS,KAAK,UAAU,EAAE;MAC/B,OAAOkF,IAAI,CAAC+C,MAAM,CAAC,IAAIC,IAAI,CAACR,KAAK,CAAC,CAAC;IACvC,CAAC,MACI,IAAIxC,IAAI,CAAClF,SAAS,KAAK,UAAU,EAAE;MACpC,OAAOkF,IAAI,CAACiD,MAAM,CAACvI,IAAI,CAACwI,KAAK,CAACV,KAAK,CAAC,CAAC;IACzC,CAAC,MACI,IAAIxC,IAAI,CAAClF,SAAS,KAAK,kBAAkB,EAAE;MAC5C,OAAO,IAAI,CAAC7E,KAAK,CAACkN,sBAAsB,CAACC,mBAAmB,CAACpD,IAAI,CAACiD,MAAM,CAACvI,IAAI,CAAC2I,KAAK,CAACb,KAAK,CAAC,CAAC,EAAExC,IAAI,CAAC+C,MAAM,CAAC;IAC7G,CAAC,MACI,IAAI/C,IAAI,CAAClF,SAAS,KAAK,aAAa,EAAE;MACvC,OAAO0H,KAAK,GAAGxC,IAAI,CAAC+C,MAAM,CAACrI,IAAI,CAAC4I,GAAG,CAACtD,IAAI,CAACuD,OAAO,EAAEf,KAAK,CAAC,CAAC;IAC7D,CAAC,MACI;MACD,IAAIgB,iBAAiB,GAAGxD,IAAI,CAACyD,WAAW,IAAIzD,IAAI,CAACyD,WAAW,CAACC,KAAK,CAAC,SAAS,CAAC,KAAK,IAAI;MACtF,OAAOF,iBAAiB,GAAGxD,IAAI,CAACyD,WAAW,CAACE,OAAO,CAAC,SAAS,EAAE3D,IAAI,CAAC+C,MAAM,CAACP,KAAK,CAAC,CAAC,GAAGxC,IAAI,CAAC+C,MAAM,CAACP,KAAK,CAAC;IAC3G;EACJ,CAAC;EACDxM,SAAS,CAACiB,SAAS,CAAC8J,eAAe,GAAG,UAAUd,IAAI,EAAED,IAAI,EAAE4D,MAAM,EAAEtD,QAAQ,EAAE;IAC1E,IAAID,OAAO,GAAG,CAAC;IACf,IAAIwD,YAAY,GAAG,CAAC;IACpB,IAAIC,WAAW;IACf,IAAIC,OAAO,GAAGH,MAAM,CAACtG,CAAC;IACtB,IAAI0G,OAAO,GAAGJ,MAAM,CAACxL,CAAC;IACtB,IAAI6L,aAAa,GAAGjE,IAAI,CAACkE,aAAa,KAAK,QAAQ;IACnD,IAAIC,eAAe,GAAGnE,IAAI,CAACoE,iBAAiB,CAACzL,MAAM,IAAKqH,IAAI,CAACqE,gBAAgB,IAAIrE,IAAI,CAACqE,gBAAgB,CAACC,SAAU,GAC3GtE,IAAI,CAACmE,eAAe,GAAG,CAAC;IAC9B,IAAI,CAACxC,WAAW,GAAG9L,WAAW,CAACoK,IAAI,EAAED,IAAI,CAACY,gBAAgB,CAACQ,SAAS,EAAE,IAAI,CAACnL,KAAK,CAAC4H,UAAU,CAACwD,kBAAkB,CAAC;IAC/G,IAAI,OAAOpB,IAAI,KAAK,QAAQ,IAAIA,IAAI,CAACnG,MAAM,GAAG,CAAC,EAAE;MAC7C,IAAI,CAAC6H,WAAW,CAAC1G,KAAK,GAAG,CAAC;MAC1B,IAAI,CAAC0G,WAAW,CAACtJ,MAAM,GAAG,CAAC;MAC3B,KAAK,IAAIoJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxB,IAAI,CAACnG,MAAM,EAAE2H,CAAC,EAAE,EAAE;QAClC,IAAI8C,IAAI,GAAG1O,WAAW,CAACoK,IAAI,CAACwB,CAAC,CAAC,EAAEzB,IAAI,CAACY,gBAAgB,CAACQ,SAAS,EAAE,IAAI,CAACnL,KAAK,CAAC4H,UAAU,CAACwD,kBAAkB,CAAC;QAC1G,IAAI,CAACM,WAAW,CAACtJ,MAAM,IAAIkM,IAAI,CAAClM,MAAM;QACtC,IAAI,IAAI,CAACsJ,WAAW,CAAC1G,KAAK,GAAGsJ,IAAI,CAACtJ,KAAK,EAAE;UACrC,IAAI,CAAC0G,WAAW,CAAC1G,KAAK,GAAGsJ,IAAI,CAACtJ,KAAK;QACvC;MACJ;IACJ;IACA,IAAI2H,SAAS,GAAG5C,IAAI,CAAC6C,qBAAqB;IAC1C,IAAI7C,IAAI,CAAC8C,WAAW,KAAK,YAAY,EAAE;MACnC,IAAI0B,SAAS,GAAGP,aAAa,GAAG3D,QAAQ,CAAClI,CAAC,GAAG,IAAI,CAACuJ,WAAW,CAACtJ,MAAM,IAAIgI,OAAO,GAAG,CAAC,GAAGwD,YAAY,CAAC,GAC/FvD,QAAQ,CAAClI,CAAC,GAAG+L,eAAe;MAChC,IAAI9L,MAAM,GAAG4L,aAAa,GAAG3D,QAAQ,CAAClI,CAAC,GAAG,IAAI,CAACuJ,WAAW,CAACtJ,MAAM,GAAGwL,YAAY,GAAGvD,QAAQ,CAAClI,CAAC,GAAGyL,YAAY;MAC5G,IAAI,CAAC3N,aAAa,GAAG,IAAIb,aAAa,CAAC,IAAI,CAAC4H,MAAM,EAAEuH,SAAS,CAAC;MAC9DV,WAAW,GAAG,IAAInO,IAAI,CAAE,IAAI,CAACsH,MAAM,GAAI,IAAI,CAAC0E,WAAW,CAAC1G,KAAK,GAAG,CAAE,GAAGoF,OAAO,EAAGhI,MAAM,IAAI,CAAC4L,aAAa,GAAGE,eAAe,GAAG,CAAC,CAAC,EAAE,IAAI,CAACxC,WAAW,CAAC1G,KAAK,GAAGoF,OAAO,GAAG,CAAC,EAAE,IAAI,CAACsB,WAAW,CAACtJ,MAAM,GAAGgI,OAAO,GAAG,CAAC,CAAC;MAC5M,IAAIuC,SAAS,EAAE;QACXkB,WAAW,CAAC1L,CAAC,GAAG6L,aAAa,GAAG3D,QAAQ,CAAClI,CAAC,GAAGkI,QAAQ,CAAClI,CAAC,IAClD,IAAI,CAACuJ,WAAW,CAACtJ,MAAM,GAAGgI,OAAO,GAAG,CAAC,GAAGwD,YAAY,CAAC,GAAGM,eAAe;MAChF;MACA,IAAIL,WAAW,CAACxG,CAAC,GAAGyG,OAAO,EAAE;QACzBD,WAAW,CAACxG,CAAC,GAAGyG,OAAO;MAC3B;MACA,IAAID,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,GAAG8I,OAAO,GAAGH,MAAM,CAAC3I,KAAK,EAAE;QAC5D6I,WAAW,CAACxG,CAAC,IAAMwG,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,IAAK8I,OAAO,GAAGH,MAAM,CAAC3I,KAAK,CAAE;MACrF;MACA,IAAI,IAAI,CAAC/E,aAAa,CAACoH,CAAC,GAAGuG,YAAY,GAAG,CAAC,GAAGC,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,GAAG,IAAI,CAAC9E,EAAE,EAAE;QACvF,IAAI,CAACD,aAAa,CAACoH,CAAC,GAAGwG,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,GAAG,IAAI,CAAC9E,EAAE,GAAG0N,YAAY;MACrF;MACA,IAAI,IAAI,CAAC3N,aAAa,CAACoH,CAAC,GAAGuG,YAAY,GAAGC,WAAW,CAACxG,CAAC,GAAG,IAAI,CAACnH,EAAE,EAAE;QAC/D,IAAI,CAACD,aAAa,CAACoH,CAAC,GAAGwG,WAAW,CAACxG,CAAC,GAAG,IAAI,CAACnH,EAAE,GAAG0N,YAAY;MACjE;IACJ,CAAC,MACI;MACDM,eAAe,GAAGA,eAAe,IAAIvB,SAAS,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;MACxD,IAAI,CAAC1M,aAAa,GAAG,IAAIb,aAAa,CAACiL,QAAQ,CAAChD,CAAC,EAAE,IAAI,CAACV,MAAM,CAAC;MAC/D,IAAI3B,KAAK,GAAGgJ,aAAa,GAAG3D,QAAQ,CAAChD,CAAC,GAAG6G,eAAe,GACpD7D,QAAQ,CAAChD,CAAC,GAAI,IAAI,CAACqE,WAAW,CAAC1G,KAAM,IAAIoF,OAAO,GAAG,CAAC,GAAGwD,YAAY,CAAC;MACxEC,WAAW,GAAG,IAAInO,IAAI,CAACsF,KAAK,GAAGkJ,eAAe,EAAE,IAAI,CAACvH,MAAM,GAAI,IAAI,CAAC+E,WAAW,CAACtJ,MAAM,GAAG,CAAE,GAAGgI,OAAO,EAAE,IAAI,CAACsB,WAAW,CAAC1G,KAAK,GAAIoF,OAAO,GAAG,CAAE,EAAE,IAAI,CAACsB,WAAW,CAACtJ,MAAM,GAAGgI,OAAO,GAAG,CAAC,CAAC;MACrL,IAAIuC,SAAS,EAAE;QACXkB,WAAW,CAACxG,CAAC,GAAG2G,aAAa,GAAG3D,QAAQ,CAAChD,CAAC,GAAG,IAAI,CAACqE,WAAW,CAAC1G,KAAK,GAAG4I,YAAY,GAC9EvD,QAAQ,CAAChD,CAAC,GAAGuG,YAAY,GAAGM,eAAe;QAC/C,IAAKL,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,GAAI,IAAI,CAAChF,KAAK,CAACwH,aAAa,CAACxC,KAAK,EAAE;UACtE,IAAI,CAAC/E,aAAa,CAACoH,CAAC,IAAMwG,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,GAAI,IAAI,CAAChF,KAAK,CAACwH,aAAa,CAACxC,KAAM;UAC9F6I,WAAW,CAACxG,CAAC,IAAMwG,WAAW,CAACxG,CAAC,GAAGwG,WAAW,CAAC7I,KAAK,GAAI,IAAI,CAAChF,KAAK,CAACwH,aAAa,CAACxC,KAAM;QAC3F;MACJ,CAAC,MACI;QACD,IAAI6I,WAAW,CAACxG,CAAC,GAAG,CAAC,EAAE;UACnB,IAAI,CAACpH,aAAa,CAACoH,CAAC,IAAIwG,WAAW,CAACxG,CAAC;UACrCwG,WAAW,CAACxG,CAAC,GAAG,CAAC;QACrB;MACJ;MACA,IAAIwG,WAAW,CAAC1L,CAAC,GAAG4L,OAAO,EAAE;QACzBF,WAAW,CAAC1L,CAAC,GAAG4L,OAAO;MAC3B;MACA,IAAIF,WAAW,CAAC1L,CAAC,GAAG0L,WAAW,CAACzL,MAAM,IAAI2L,OAAO,GAAGJ,MAAM,CAACvL,MAAM,EAAE;QAC/DyL,WAAW,CAAC1L,CAAC,IAAM0L,WAAW,CAAC1L,CAAC,GAAG0L,WAAW,CAACzL,MAAM,IAAK2L,OAAO,GAAGJ,MAAM,CAACvL,MAAM,CAAE;MACvF;MACA,IAAI,IAAI,CAACnC,aAAa,CAACkC,CAAC,GAAGyL,YAAY,GAAG,CAAC,GAAGC,WAAW,CAAC1L,CAAC,GAAG0L,WAAW,CAACzL,MAAM,GAAG,IAAI,CAACjC,EAAE,EAAE;QACxF,IAAI,CAACF,aAAa,CAACkC,CAAC,GAAG0L,WAAW,CAAC1L,CAAC,GAAG0L,WAAW,CAACzL,MAAM,GAAG,IAAI,CAACjC,EAAE,GAAGyN,YAAY,GAAG,CAAC;MAC1F;MACA,IAAI,IAAI,CAAC3N,aAAa,CAACkC,CAAC,GAAGyL,YAAY,GAAG,CAAC,GAAGC,WAAW,CAAC1L,CAAC,GAAG,IAAI,CAAChC,EAAE,EAAE;QACnE,IAAI,CAACF,aAAa,CAACkC,CAAC,GAAG0L,WAAW,CAAC1L,CAAC,GAAG,IAAI,CAAChC,EAAE,GAAGyN,YAAY,GAAG,CAAC;MACrE;IACJ;IACA,OAAOC,WAAW;EACtB,CAAC;EACD9N,SAAS,CAACiB,SAAS,CAAC0F,aAAa,GAAG,YAAY;IAC5CzH,SAAS,CAAC,IAAI,CAACuP,iBAAiB,CAAC;EACrC,CAAC;EACDzO,SAAS,CAACiB,SAAS,CAACyN,iBAAiB,GAAG,YAAY;IAChDxP,SAAS,CAAC,IAAI,CAACuP,iBAAiB,CAAC;EACrC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIzO,SAAS,CAACiB,SAAS,CAACY,eAAe,GAAG,UAAU8M,QAAQ,EAAE;IACtD,IAAI1O,KAAK,GAAG,IAAI,CAACA,KAAK;IACtB,IAAIW,SAAS,GAAGX,KAAK,CAACqG,YAAY,GAAGL,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,YAAY,CAAC,GACvFyF,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,kBAAkB,CAAC;IAChE,IAAIqJ,gBAAgB,GAAG5J,KAAK,CAACqG,YAAY,GAAGL,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC1F,SAAS,GAAG,iBAAiB,CAAC,GAAG,IAAI;IAC9G,IAAI,CAACmG,aAAa,CAAC,CAAC;IACpB,IAAI/F,SAAS,IAAIA,SAAS,CAACmL,YAAY,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;MACxD,IAAI,CAAC0C,iBAAiB,GAAG,CAACG,UAAU,CAAC,YAAY;QAC7C,IAAI/P,SAAS,CAAC,CAAC,CAAC,CAAC,CAACgQ,OAAO,CAACjO,SAAS,EAAE;UACjC+N,QAAQ,EAAE,GAAG;UACbG,QAAQ,EAAE,SAAAA,CAAUC,IAAI,EAAE;YACtB;YACAnO,SAAS,CAAC6I,KAAK,CAACuF,SAAS,GAAG,EAAE;YAC9B,IAAI,CAAC/O,KAAK,CAACqG,YAAY,EAAE;cACrB1F,SAAS,CAACsG,YAAY,CAAC,SAAS,EAAE,CAAC,CAAC,GAAI6H,IAAI,CAACE,SAAS,GAAGF,IAAI,CAACJ,QAAS,EAAEjF,QAAQ,CAAC,CAAC,CAAC;YACxF,CAAC,MACI;cACD9I,SAAS,CAAC6I,KAAK,CAAC1B,OAAO,GAAG,CAAC,CAAC,GAAIgH,IAAI,CAACE,SAAS,GAAGF,IAAI,CAACJ,QAAS,EAAEjF,QAAQ,CAAC,CAAC;cAC3EG,gBAAgB,CAACJ,KAAK,CAAC1B,OAAO,GAAG,CAAC,CAAC,GAAIgH,IAAI,CAACE,SAAS,GAAGF,IAAI,CAACJ,QAAS,EAAEjF,QAAQ,CAAC,CAAC;YACtF;UACJ,CAAC;UACDwF,GAAG,EAAE,SAAAA,CAAA,EAAY;YACb,IAAIjP,KAAK,CAACqG,YAAY,EAAE;cACpB1F,SAAS,CAAC6I,KAAK,CAAC1B,OAAO,GAAG,GAAG;cAC7B8B,gBAAgB,CAACJ,KAAK,CAAC1B,OAAO,GAAG,GAAG;YACxC,CAAC,MACI;cACDnH,SAAS,CAACsG,YAAY,CAAC,SAAS,EAAE,GAAG,CAAC;YAC1C;YACAjH,KAAK,CAAC2B,SAAS,GAAG,KAAK;YACvB,IAAI3B,KAAK,CAAC+G,aAAa,EAAE;cACrB/G,KAAK,CAAC+G,aAAa,CAACC,MAAM,GAAG,IAAI;cACjChH,KAAK,CAAC+G,aAAa,CAACJ,MAAM,GAAG,IAAI;YACrC;UACJ;QACJ,CAAC,CAAC;MACN,CAAC,EAAE+H,QAAQ,CAAC;IAChB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI3O,SAAS,CAACiB,SAAS,CAACkO,aAAa,GAAG,YAAY;IAC5C;AACR;AACA;IACQ,OAAO,WAAW;EACtB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACInP,SAAS,CAACiB,SAAS,CAACmO,OAAO,GAAG,YAAY;IACtC;AACR;AACA;EAFQ,CAGH;EACD,OAAOpP,SAAS;AACpB,CAAC,CAAC,CAAE;AACJ,SAASA,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}