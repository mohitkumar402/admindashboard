{"ast":null,"code":"import { createElement, isNullOrUndefined, Browser, remove } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DateRangePicker } from '@syncfusion/ej2-calendars';\nimport { getElement } from '../../common/utils/helper';\nimport { Rect } from '@syncfusion/ej2-svg-base';\n/**\n * Configures the period selector class.\n *\n * @private\n */\nvar PeriodSelector = /** @class */function () {\n  //constructor for period selector\n  function PeriodSelector(control) {\n    this.control = {};\n    this.isDatetimeCategory = false;\n    this.sortedData = [];\n    this.startValue = 0;\n    this.endValue = 0;\n    this.rootControl = control;\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      this.sortedData = this.rootControl.sortedData;\n      this.isDatetimeCategory = this.rootControl.isDateTimeCategory;\n    }\n  }\n  /**\n   * To set the control values\n   *\n   * @param control\n   * @returns {void}\n   */\n  PeriodSelector.prototype.setControlValues = function (control) {\n    if (control.getModuleName() === 'rangeNavigator') {\n      this.control.periods = this.rootControl.periodSelectorSettings.periods;\n      this.control.seriesXMax = control.chartSeries.xMax;\n      this.control.seriesXMin = control.chartSeries.xMin;\n      this.control.rangeSlider = control.rangeSlider;\n      this.control.rangeNavigatorControl = control;\n      this.control.endValue = control.endValue;\n      this.control.startValue = control.startValue;\n    } else {\n      this.control.periods = this.rootControl.periods;\n      this.control.endValue = this.control.seriesXMax = control.seriesXMax;\n      this.control.startValue = this.control.seriesXMin = control.seriesXMin;\n      this.control.rangeNavigatorControl = this.rootControl.rangeNavigator;\n      if (this.control.rangeNavigatorControl) {\n        this.control.rangeSlider = this.rootControl.rangeNavigator.rangeSlider;\n      }\n    }\n    this.control.element = control.element;\n    this.control.disableRangeSelector = control.disableRangeSelector;\n  };\n  /**\n   * To initialize the period selector properties.\n   *\n   * @param options\n   * @param x\n   * @param options\n   * @param x\n   */\n  PeriodSelector.prototype.appendSelector = function (options, x) {\n    if (x === void 0) {\n      x = 0;\n    }\n    this.renderSelectorElement(null, options, x);\n    this.renderSelector();\n  };\n  /**\n   * renderSelector div.\n   *\n   * @param control\n   * @param options\n   * @param x\n   * @param options\n   * @param x\n   */\n  PeriodSelector.prototype.renderSelectorElement = function (control, options, x) {\n    //render border\n    this.periodSelectorSize = control ? this.periodSelectorSize : new Rect(x, this.rootControl.titleSize.height ? this.rootControl.titleSize.height : 10, options.width, options.height);\n    var thumbSize;\n    var element;\n    if (control) {\n      thumbSize = control.themeStyle.thumbWidth;\n      element = control.element;\n    } else {\n      thumbSize = options.thumbSize;\n      element = options.element;\n    }\n    if (getElement(element.id + '_Secondary_Element')) {\n      remove(getElement(element.id + '_Secondary_Element'));\n    }\n    this.periodSelectorDiv = createElement('div', {\n      id: element.id + '_Secondary_Element',\n      styles: 'width: ' + (this.periodSelectorSize.width - thumbSize) + 'px;height: ' + this.periodSelectorSize.height + 'px;top:' + this.periodSelectorSize.y + 'px;left:' + (this.periodSelectorSize.x + thumbSize / 2) + 'px; position: absolute'\n    });\n    element.appendChild(this.periodSelectorDiv);\n  };\n  /**\n   * Renders the selector elements.\n   *\n   * @returns {void}\n   */\n  PeriodSelector.prototype.renderSelector = function () {\n    var _this = this;\n    this.setControlValues(this.rootControl);\n    var enableCustom = true;\n    var controlId = this.control.element.id;\n    var selectorElement = createElement('div', {\n      id: controlId + '_selector'\n    });\n    var buttons = this.control.periods;\n    var selector = this.updateCustomElement();\n    var buttonStyles = 'text-transform: none; text-overflow: unset';\n    var isStringTemplate = 'isStringTemplate';\n    var dateRangeId = controlId + 'customRange';\n    var selectedPeriod;\n    this.periodSelectorDiv.appendChild(selectorElement);\n    for (var i = 0; i < buttons.length; i++) {\n      selector.push({\n        align: 'Left',\n        text: buttons[i].text\n      });\n    }\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      enableCustom = this.rootControl.enableCustomRange;\n    }\n    if (enableCustom) {\n      this.calendarId = controlId + '_calendar';\n      selector.push({\n        template: '<button id=' + this.calendarId + '></button>',\n        align: 'Right'\n      });\n    }\n    var selctorArgs = {\n      selector: selector,\n      name: 'RangeSelector',\n      cancel: false,\n      enableCustomFormat: true,\n      content: 'Date Range'\n    };\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      if (this.rootControl.exportType.length) {\n        var exportElement = createElement('button', {\n          id: controlId + '_export',\n          styles: buttonStyles,\n          className: 'e-dropdown-btn e-btn e-flat'\n        });\n        exportElement.innerText = 'Export';\n        selector.push({\n          template: exportElement,\n          align: 'Right'\n        });\n      }\n    }\n    this.rootControl.trigger('selectorRender', selctorArgs);\n    this.toolbar = new Toolbar({\n      items: selctorArgs.selector,\n      height: this.periodSelectorSize.height,\n      clicked: function (args) {\n        _this.buttonClick(args, _this.control);\n      },\n      created: function () {\n        _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\n        if (isNullOrUndefined(_this.selectedIndex)) {\n          buttons.map(function (period, index) {\n            if (period.selected && _this.selectedPeriod !== null) {\n              selectedPeriod = period;\n              _this.control.startValue = _this.changedRange(period.intervalType, _this.control.endValue, period.interval).getTime();\n              if (_this.isDatetimeCategory) {\n                _this.control.startValue = _this.rootControl.getModuleName() !== 'stockChart' ? _this.findStartValue(_this.control.startValue, _this.control.endValue) : _this.rootControl.startValue;\n              }\n              _this.control.startValue = period.text && period.text.toLowerCase() === 'all' ? _this.control.seriesXMin : _this.control.startValue;\n              _this.control.endValue = period.text && period.text.toLowerCase() === 'all' ? _this.control.seriesXMax : _this.control.endValue;\n              _this.selectedIndex = _this.nodes.childNodes.length - buttons.length + index;\n              var slider = _this.control.rangeSlider;\n              if (slider) {\n                slider.selectedPeriod = period.text;\n              }\n            }\n          });\n        }\n        if (!selectedPeriod && _this.rootControl.getModuleName() !== 'stockChart') {\n          var selectedIndex = _this.findSelectedIndex(_this.control.startValue, _this.control.endValue, buttons);\n          _this.selectedIndex = selectedIndex ? selectedIndex : _this.selectedIndex;\n        }\n        _this.setSelectedStyle(_this.selectedIndex);\n      }\n    });\n    this.toolbar[isStringTemplate] = true;\n    this.toolbar.appendTo(selectorElement);\n    this.triggerChange = true;\n    if (enableCustom) {\n      this.datePicker = new DateRangePicker({\n        min: this.isDatetimeCategory ? new Date(this.sortedData[this.control.seriesXMin]) : new Date(this.control.seriesXMin),\n        max: this.isDatetimeCategory ? new Date(this.sortedData[this.control.seriesXMax]) : new Date(this.control.seriesXMax),\n        format: 'dd/MM/yyyy',\n        placeholder: 'Select a range',\n        showClearButton: false,\n        startDate: this.isDatetimeCategory ? new Date(this.sortedData[Math.floor(this.control.startValue)]) : new Date(this.control.startValue),\n        endDate: this.isDatetimeCategory ? new Date(this.sortedData[Math.floor(this.control.endValue)]) : new Date(this.control.endValue),\n        created: function () {\n          if (selctorArgs.enableCustomFormat) {\n            var datePicker = document.getElementsByClassName('e-date-range-wrapper');\n            var datePickerElement = void 0;\n            for (var i = 0; i < datePicker.length; i++) {\n              if (datePicker[i].children[0].id.indexOf(controlId) !== -1) {\n                datePickerElement = datePicker[i];\n              }\n            }\n            datePickerElement.style.display = 'none';\n            var element = createElement('div', {\n              id: dateRangeId,\n              className: 'e-control e-btn e-dropdown-btn e-flat',\n              styles: 'font-size: 14px; font-weight: 500; text-transform: none '\n            });\n            element.innerText = selctorArgs.content;\n            datePickerElement.insertAdjacentElement('afterend', element);\n            getElement(dateRangeId).insertAdjacentElement('afterbegin', createElement('span', {\n              id: controlId + 'dateIcon',\n              className: 'e-input-group-icon e-range-icon e-btn-icon e-icons',\n              styles: 'font-size: 16px; min-height: 0px; margin: -3px 0 0 0; outline: none; min-width: 30px'\n              // fix for date range icon alignment issue.\n            }));\n            document.getElementById(dateRangeId).onclick = function () {\n              _this.datePicker.show(getElement(dateRangeId));\n            };\n          }\n        },\n        change: function (args) {\n          if (_this.triggerChange) {\n            if (_this.isDatetimeCategory) {\n              _this.startValue = args.startDate.getTime();\n              _this.endValue = args.endDate.getTime();\n              _this.findPeriodValue(_this.startValue, _this.endValue);\n            }\n            if (_this.control.rangeSlider && args.event) {\n              if (_this.rootControl.getModuleName() !== 'stockChart') {\n                _this.control.rangeNavigatorControl.startValue = _this.isDatetimeCategory ? _this.startValue : args.startDate.getTime();\n                _this.control.rangeNavigatorControl.endValue = _this.isDatetimeCategory ? _this.endValue : args.endDate.getTime();\n                _this.selectedIndex = undefined;\n                _this.selectedPeriod = null;\n                _this.control.rangeNavigatorControl.refresh();\n              }\n              _this.control.rangeSlider.performAnimation(_this.isDatetimeCategory ? _this.startValue : args.startDate.getTime(), _this.isDatetimeCategory ? _this.endValue : args.endDate.getTime(), _this.control.rangeNavigatorControl);\n            } else if (args.event) {\n              _this.rootControl.rangeChanged(_this.isDatetimeCategory ? _this.startValue : args.startDate.getTime(), _this.isDatetimeCategory ? _this.endValue : args.endDate.getTime());\n            }\n            _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\n            if (!_this.rootControl.resizeTo && _this.control.rangeSlider && _this.control.rangeSlider.isDrag) {\n              /**\n               * Issue: While disabling range navigator console error throws\n               * Fix:Check with rangeSlider present or not. Then checked with isDrag.\n               */\n              for (var i = 0, length_1 = _this.nodes.childNodes.length; i < length_1; i++) {\n                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n              }\n            }\n          }\n        }\n      });\n      this.datePicker.appendTo('#' + this.calendarId);\n    }\n  };\n  /**\n   * To find start and end value\n   *\n   * @param startValue\n   * @param endValue\n   */\n  PeriodSelector.prototype.findPeriodValue = function (startValue, endValue) {\n    for (var index = 0; index < this.sortedData.length; index++) {\n      if (this.sortedData[index] >= startValue) {\n        this.startValue = index;\n        break;\n      }\n    }\n    for (var index = this.sortedData.length - 1; index >= 0; index--) {\n      if (this.sortedData[index] <= endValue) {\n        this.endValue = index;\n        break;\n      }\n    }\n  };\n  PeriodSelector.prototype.findSelectedIndex = function (startDate, endDate, buttons) {\n    var daysDiffence = (endDate - startDate) / (1000 * 60 * 60 * 24);\n    var selectedIndex;\n    for (var i = 0; i < buttons.length; i++) {\n      var period = buttons[i];\n      if (period.intervalType === 'Years' && daysDiffence / 365 === period.interval) {\n        selectedIndex = i;\n      } else if (period.intervalType === 'Months' && (daysDiffence / 30 === period.interval || daysDiffence / 31 === period.interval)) {\n        selectedIndex = i;\n      } else if (period.intervalType === 'Days' && daysDiffence === period.interval) {\n        selectedIndex = i;\n      } else if (period.intervalType === 'Weeks' && daysDiffence / 7 === period.interval) {\n        selectedIndex = i;\n      } else if (period.intervalType === 'Hours' && daysDiffence * 24 === period.interval) {\n        selectedIndex = i;\n      } else if (period.intervalType === 'Seconds' && daysDiffence * 24 * 3600 === period.interval) {\n        selectedIndex = i;\n      }\n    }\n    return selectedIndex;\n  };\n  PeriodSelector.prototype.updateCustomElement = function () {\n    var selector = [];\n    var controlId = this.rootControl.element.id;\n    var buttonStyles = 'text-transform: none; text-overflow: unset';\n    var className = 'e-dropdown-btn e-btn e-flat';\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      if (this.rootControl.seriesType.length) {\n        var SeriesElement = createElement('button', {\n          id: controlId + '_seriesType',\n          styles: buttonStyles,\n          className: className\n        });\n        SeriesElement.innerText = 'Series';\n        selector.push({\n          template: SeriesElement,\n          align: 'Left'\n        });\n      }\n      if (this.rootControl.indicatorType.length) {\n        var indicatorElement = createElement('button', {\n          id: controlId + '_indicatorType',\n          styles: buttonStyles,\n          className: className\n        });\n        indicatorElement.innerText = 'Indicators';\n        selector.push({\n          template: indicatorElement,\n          align: 'Left'\n        });\n      }\n      if (this.rootControl.trendlineType.length) {\n        var trendlineElement = createElement('button', {\n          id: controlId + '_trendType',\n          styles: buttonStyles,\n          className: className\n        });\n        trendlineElement.innerText = 'Trendline';\n        selector.push({\n          template: trendlineElement,\n          align: 'Left'\n        });\n      }\n    }\n    return selector;\n  };\n  /**\n   * To set and remove the period style.\n   *\n   * @param buttons\n   * @param selectedIndex\n   * @returns {void}\n   */\n  PeriodSelector.prototype.setSelectedStyle = function (selectedIndex) {\n    for (var i = 0, length_2 = this.nodes.childNodes.length; i < length_2; i++) {\n      this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n    }\n    if (!isNullOrUndefined(selectedIndex)) {\n      this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-flat');\n      this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-active');\n    }\n  };\n  /**\n   * Button click handling.\n   *\n   * @param args\n   * @param control\n   * @param args\n   * @param control\n   */\n  PeriodSelector.prototype.buttonClick = function (args, control) {\n    var _this = this;\n    var clickedEle = args.item;\n    var slider = this.control.rangeSlider;\n    var buttons = this.control.periods;\n    var button = buttons.filter(function (btn) {\n      return btn.text === clickedEle.text;\n    });\n    var updatedStart;\n    var updatedEnd;\n    buttons.map(function (period, index) {\n      if (period.selected && _this.rootControl.getModuleName() !== 'stockChart') {\n        period.selected = false;\n      }\n      if (period.text === args.item.text) {\n        _this.selectedIndex = _this.nodes.childNodes.length - buttons.length + index;\n        if (_this.rootControl.getModuleName() !== 'stockChart') {\n          period.selected = true;\n        }\n      }\n    });\n    if (args.item.text !== '') {\n      this.setSelectedStyle(this.selectedIndex);\n    }\n    if (slider && clickedEle.text) {\n      slider.selectedPeriod = clickedEle.text;\n    }\n    if (clickedEle.text.toLowerCase() === 'all') {\n      updatedStart = control.seriesXMin;\n      updatedEnd = control.seriesXMax;\n      if (slider) {\n        slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n      } else {\n        this.rootControl.rangeChanged(updatedStart, updatedEnd);\n      }\n    } else if (clickedEle.text.toLowerCase() === 'ytd') {\n      if (slider) {\n        updatedStart = this.isDatetimeCategory ? new Date(new Date(this.sortedData[Math.floor(slider.currentEnd)]).getFullYear().toString()).getTime() : new Date(new Date(slider.currentEnd).getFullYear().toString()).getTime();\n        updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, slider.currentEnd) : updatedStart;\n        updatedEnd = slider.currentEnd;\n        slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n      } else {\n        updatedStart = this.isDatetimeCategory ? new Date(new Date(this.sortedData[Math.floor(this.rootControl.currentEnd)]).getFullYear().toString()).getTime() : new Date(new Date(this.rootControl.currentEnd).getFullYear().toString()).getTime();\n        updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, this.rootControl.currentEnd) : updatedStart;\n        updatedEnd = this.rootControl.currentEnd;\n        this.rootControl.rangeChanged(updatedStart, updatedEnd);\n      }\n    } else if (clickedEle.text.toLowerCase() !== '') {\n      if (slider) {\n        updatedStart = this.changedRange(button[0].intervalType, slider.currentEnd, button[0].interval).getTime();\n        updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, slider.currentEnd) : updatedStart;\n        updatedEnd = slider.currentEnd;\n        slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n      } else {\n        updatedStart = this.changedRange(button[0].intervalType, this.rootControl.currentEnd, button[0].interval).getTime();\n        updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, this.rootControl.currentEnd) : updatedStart;\n        updatedEnd = this.rootControl.currentEnd;\n        this.rootControl.rangeChanged(updatedStart, updatedEnd);\n      }\n    }\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      this.rootControl.zoomChange = false;\n    }\n    if (getElement(this.calendarId + '_popup') && !Browser.isDevice) {\n      var element = getElement(this.calendarId + '_popup');\n      element.querySelectorAll('.e-range-header')[0].style.display = 'none';\n    }\n  };\n  /**\n   * To find the start value.\n   *\n   * @param startValue\n   * @param endValue\n   */\n  PeriodSelector.prototype.findStartValue = function (startValue, endValue) {\n    for (var index = Math.floor(endValue); index >= 0; index--) {\n      if (this.sortedData[index] <= startValue) {\n        return index + 1;\n      }\n    }\n    return 0;\n  };\n  /**\n   *\n   * @param type updatedRange for selector\n   * @param end\n   * @param interval\n   */\n  PeriodSelector.prototype.changedRange = function (type, end, interval) {\n    var result = this.isDatetimeCategory ? new Date(this.sortedData[Math.floor(end)]) : new Date(end);\n    switch (type) {\n      case 'Quarter':\n        result.setMonth(result.getMonth() - 3 * interval);\n        break;\n      case 'Months':\n        result.setMonth(result.getMonth() - interval);\n        break;\n      case 'Weeks':\n        result.setDate(result.getDate() - interval * 7);\n        break;\n      case 'Days':\n        result.setDate(result.getDate() - interval);\n        break;\n      case 'Hours':\n        result.setHours(result.getHours() - interval);\n        break;\n      case 'Minutes':\n        result.setMinutes(result.getMinutes() - interval);\n        break;\n      case 'Seconds':\n        result.setSeconds(result.getSeconds() - interval);\n        break;\n      default:\n        result.setFullYear(result.getFullYear() - interval);\n        break;\n    }\n    return result;\n  };\n  /**\n   * Get module name\n   *\n   * @returns {string}\n   */\n  PeriodSelector.prototype.getModuleName = function () {\n    return 'PeriodSelector';\n  };\n  /**\n   * To destroy the period selector.\n   *\n   * @returns {void}\n   * @private\n   */\n  PeriodSelector.prototype.destroy = function () {\n    /**\n     * destroy method\n     */\n  };\n  return PeriodSelector;\n}();\nexport { PeriodSelector };","map":{"version":3,"names":["createElement","isNullOrUndefined","Browser","remove","Toolbar","DateRangePicker","getElement","Rect","PeriodSelector","control","isDatetimeCategory","sortedData","startValue","endValue","rootControl","getModuleName","isDateTimeCategory","prototype","setControlValues","periods","periodSelectorSettings","seriesXMax","chartSeries","xMax","seriesXMin","xMin","rangeSlider","rangeNavigatorControl","rangeNavigator","element","disableRangeSelector","appendSelector","options","x","renderSelectorElement","renderSelector","periodSelectorSize","titleSize","height","width","thumbSize","themeStyle","thumbWidth","id","periodSelectorDiv","styles","y","appendChild","_this","enableCustom","controlId","selectorElement","buttons","selector","updateCustomElement","buttonStyles","isStringTemplate","dateRangeId","selectedPeriod","i","length","push","align","text","enableCustomRange","calendarId","template","selctorArgs","name","cancel","enableCustomFormat","content","exportType","exportElement","className","innerText","trigger","toolbar","items","clicked","args","buttonClick","created","nodes","querySelectorAll","selectedIndex","map","period","index","selected","changedRange","intervalType","interval","getTime","findStartValue","toLowerCase","childNodes","slider","findSelectedIndex","setSelectedStyle","appendTo","triggerChange","datePicker","min","Date","max","format","placeholder","showClearButton","startDate","Math","floor","endDate","document","getElementsByClassName","datePickerElement","children","indexOf","style","display","insertAdjacentElement","getElementById","onclick","show","change","findPeriodValue","event","undefined","refresh","performAnimation","rangeChanged","resizeTo","isDrag","length_1","classList","daysDiffence","seriesType","SeriesElement","indicatorType","indicatorElement","trendlineType","trendlineElement","length_2","add","clickedEle","item","button","filter","btn","updatedStart","updatedEnd","currentEnd","getFullYear","toString","zoomChange","isDevice","type","end","result","setMonth","getMonth","setDate","getDate","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setFullYear","destroy"],"sources":["C:/Users/mkfun/Desktop/ct assignment/admin/node_modules/@syncfusion/ej2-charts/src/common/period-selector/period-selector.js"],"sourcesContent":["import { createElement, isNullOrUndefined, Browser, remove } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DateRangePicker } from '@syncfusion/ej2-calendars';\nimport { getElement } from '../../common/utils/helper';\nimport { Rect } from '@syncfusion/ej2-svg-base';\n/**\n * Configures the period selector class.\n *\n * @private\n */\nvar PeriodSelector = /** @class */ (function () {\n    //constructor for period selector\n    function PeriodSelector(control) {\n        this.control = {};\n        this.isDatetimeCategory = false;\n        this.sortedData = [];\n        this.startValue = 0;\n        this.endValue = 0;\n        this.rootControl = control;\n        if (this.rootControl.getModuleName() === 'stockChart') {\n            this.sortedData = this.rootControl.sortedData;\n            this.isDatetimeCategory = this.rootControl.isDateTimeCategory;\n        }\n    }\n    /**\n     * To set the control values\n     *\n     * @param control\n     * @returns {void}\n     */\n    PeriodSelector.prototype.setControlValues = function (control) {\n        if (control.getModuleName() === 'rangeNavigator') {\n            this.control.periods = this.rootControl.periodSelectorSettings.periods;\n            this.control.seriesXMax = control.chartSeries.xMax;\n            this.control.seriesXMin = control.chartSeries.xMin;\n            this.control.rangeSlider = control.rangeSlider;\n            this.control.rangeNavigatorControl = control;\n            this.control.endValue = control.endValue;\n            this.control.startValue = control.startValue;\n        }\n        else {\n            this.control.periods = this.rootControl.periods;\n            this.control.endValue = this.control.seriesXMax = control.seriesXMax;\n            this.control.startValue = this.control.seriesXMin = control.seriesXMin;\n            this.control.rangeNavigatorControl = this.rootControl.rangeNavigator;\n            if (this.control.rangeNavigatorControl) {\n                this.control.rangeSlider = this.rootControl.rangeNavigator.rangeSlider;\n            }\n        }\n        this.control.element = control.element;\n        this.control.disableRangeSelector = control.disableRangeSelector;\n    };\n    /**\n     * To initialize the period selector properties.\n     *\n     * @param options\n     * @param x\n     * @param options\n     * @param x\n     */\n    PeriodSelector.prototype.appendSelector = function (options, x) {\n        if (x === void 0) { x = 0; }\n        this.renderSelectorElement(null, options, x);\n        this.renderSelector();\n    };\n    /**\n     * renderSelector div.\n     *\n     * @param control\n     * @param options\n     * @param x\n     * @param options\n     * @param x\n     */\n    PeriodSelector.prototype.renderSelectorElement = function (control, options, x) {\n        //render border\n        this.periodSelectorSize = control ? this.periodSelectorSize : new Rect(x, this.rootControl.titleSize.height ?\n            this.rootControl.titleSize.height : 10, options.width, options.height);\n        var thumbSize;\n        var element;\n        if (control) {\n            thumbSize = control.themeStyle.thumbWidth;\n            element = control.element;\n        }\n        else {\n            thumbSize = options.thumbSize;\n            element = options.element;\n        }\n        if (getElement(element.id + '_Secondary_Element')) {\n            remove(getElement(element.id + '_Secondary_Element'));\n        }\n        this.periodSelectorDiv = createElement('div', {\n            id: element.id + '_Secondary_Element',\n            styles: 'width: ' + (this.periodSelectorSize.width - thumbSize) + 'px;height: ' +\n                this.periodSelectorSize.height + 'px;top:' +\n                this.periodSelectorSize.y + 'px;left:' +\n                (this.periodSelectorSize.x + thumbSize / 2) + 'px; position: absolute'\n        });\n        element.appendChild(this.periodSelectorDiv);\n    };\n    /**\n     * Renders the selector elements.\n     *\n     * @returns {void}\n     */\n    PeriodSelector.prototype.renderSelector = function () {\n        var _this = this;\n        this.setControlValues(this.rootControl);\n        var enableCustom = true;\n        var controlId = this.control.element.id;\n        var selectorElement = createElement('div', { id: controlId + '_selector' });\n        var buttons = this.control.periods;\n        var selector = this.updateCustomElement();\n        var buttonStyles = 'text-transform: none; text-overflow: unset';\n        var isStringTemplate = 'isStringTemplate';\n        var dateRangeId = controlId + 'customRange';\n        var selectedPeriod;\n        this.periodSelectorDiv.appendChild(selectorElement);\n        for (var i = 0; i < buttons.length; i++) {\n            selector.push({ align: 'Left', text: buttons[i].text });\n        }\n        if (this.rootControl.getModuleName() === 'stockChart') {\n            enableCustom = this.rootControl.enableCustomRange;\n        }\n        if (enableCustom) {\n            this.calendarId = controlId + '_calendar';\n            selector.push({ template: '<button id=' + this.calendarId + '></button>', align: 'Right' });\n        }\n        var selctorArgs = {\n            selector: selector, name: 'RangeSelector', cancel: false, enableCustomFormat: true, content: 'Date Range'\n        };\n        if (this.rootControl.getModuleName() === 'stockChart') {\n            if (this.rootControl.exportType.length) {\n                var exportElement = createElement('button', { id: controlId + '_export', styles: buttonStyles,\n                    className: 'e-dropdown-btn e-btn e-flat' });\n                exportElement.innerText = 'Export';\n                selector.push({ template: exportElement,\n                    align: 'Right' });\n            }\n        }\n        this.rootControl.trigger('selectorRender', selctorArgs);\n        this.toolbar = new Toolbar({\n            items: selctorArgs.selector, height: this.periodSelectorSize.height,\n            clicked: function (args) {\n                _this.buttonClick(args, _this.control);\n            }, created: function () {\n                _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\n                if (isNullOrUndefined(_this.selectedIndex)) {\n                    buttons.map(function (period, index) {\n                        if (period.selected && _this.selectedPeriod !== null) {\n                            selectedPeriod = period;\n                            _this.control.startValue = _this.changedRange(period.intervalType, _this.control.endValue, period.interval).getTime();\n                            if (_this.isDatetimeCategory) {\n                                _this.control.startValue = _this.rootControl.getModuleName() !== 'stockChart' ? _this.findStartValue(_this.control.startValue, _this.control.endValue) : _this.rootControl.startValue;\n                            }\n                            _this.control.startValue = (period.text && period.text.toLowerCase() === 'all') ? _this.control.seriesXMin : _this.control.startValue;\n                            _this.control.endValue = (period.text && period.text.toLowerCase() === 'all') ? _this.control.seriesXMax : _this.control.endValue;\n                            _this.selectedIndex = (_this.nodes.childNodes.length - buttons.length) + index;\n                            var slider = _this.control.rangeSlider;\n                            if (slider) {\n                                slider.selectedPeriod = period.text;\n                            }\n                        }\n                    });\n                }\n                if (!selectedPeriod && _this.rootControl.getModuleName() !== 'stockChart') {\n                    var selectedIndex = _this.findSelectedIndex(_this.control.startValue, _this.control.endValue, buttons);\n                    _this.selectedIndex = selectedIndex ? selectedIndex : _this.selectedIndex;\n                }\n                _this.setSelectedStyle(_this.selectedIndex);\n            }\n        });\n        this.toolbar[isStringTemplate] = true;\n        this.toolbar.appendTo(selectorElement);\n        this.triggerChange = true;\n        if (enableCustom) {\n            this.datePicker = new DateRangePicker({\n                min: this.isDatetimeCategory ? new Date(this.sortedData[this.control.seriesXMin]) : new Date(this.control.seriesXMin),\n                max: this.isDatetimeCategory ? new Date(this.sortedData[this.control.seriesXMax]) : new Date(this.control.seriesXMax),\n                format: 'dd/MM/yyyy', placeholder: 'Select a range',\n                showClearButton: false,\n                startDate: this.isDatetimeCategory ? new Date(this.sortedData[Math.floor(this.control.startValue)]) :\n                    new Date(this.control.startValue),\n                endDate: this.isDatetimeCategory ? new Date(this.sortedData[Math.floor(this.control.endValue)]) :\n                    new Date(this.control.endValue),\n                created: function () {\n                    if (selctorArgs.enableCustomFormat) {\n                        var datePicker = document.getElementsByClassName('e-date-range-wrapper');\n                        var datePickerElement = void 0;\n                        for (var i = 0; i < datePicker.length; i++) {\n                            if (datePicker[i].children[0].id.indexOf(controlId) !== -1) {\n                                datePickerElement = datePicker[i];\n                            }\n                        }\n                        datePickerElement.style.display = 'none';\n                        var element = createElement('div', {\n                            id: dateRangeId,\n                            className: 'e-control e-btn e-dropdown-btn e-flat',\n                            styles: 'font-size: 14px; font-weight: 500; text-transform: none '\n                        });\n                        element.innerText = selctorArgs.content;\n                        datePickerElement.insertAdjacentElement('afterend', element);\n                        getElement(dateRangeId).insertAdjacentElement('afterbegin', (createElement('span', {\n                            id: controlId + 'dateIcon', className: 'e-input-group-icon e-range-icon e-btn-icon e-icons',\n                            styles: 'font-size: 16px; min-height: 0px; margin: -3px 0 0 0; outline: none; min-width: 30px'\n                            // fix for date range icon alignment issue.\n                        })));\n                        document.getElementById(dateRangeId).onclick = function () {\n                            _this.datePicker.show(getElement(dateRangeId));\n                        };\n                    }\n                },\n                change: function (args) {\n                    if (_this.triggerChange) {\n                        if (_this.isDatetimeCategory) {\n                            _this.startValue = args.startDate.getTime();\n                            _this.endValue = args.endDate.getTime();\n                            _this.findPeriodValue(_this.startValue, _this.endValue);\n                        }\n                        if (_this.control.rangeSlider && args.event) {\n                            if (_this.rootControl.getModuleName() !== 'stockChart') {\n                                _this.control.rangeNavigatorControl.startValue = _this.isDatetimeCategory ? _this.startValue :\n                                    args.startDate.getTime();\n                                _this.control.rangeNavigatorControl.endValue = _this.isDatetimeCategory ? _this.endValue :\n                                    args.endDate.getTime();\n                                _this.selectedIndex = undefined;\n                                _this.selectedPeriod = null;\n                                _this.control.rangeNavigatorControl.refresh();\n                            }\n                            _this.control.rangeSlider.performAnimation(_this.isDatetimeCategory ? _this.startValue : args.startDate.getTime(), _this.isDatetimeCategory ?\n                                _this.endValue : args.endDate.getTime(), _this.control.rangeNavigatorControl);\n                        }\n                        else if (args.event) {\n                            _this.rootControl.rangeChanged(_this.isDatetimeCategory ? _this.startValue :\n                                args.startDate.getTime(), _this.isDatetimeCategory ? _this.endValue :\n                                args.endDate.getTime());\n                        }\n                        _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\n                        if (!_this.rootControl.resizeTo && _this.control.rangeSlider && _this.control.rangeSlider.isDrag) {\n                            /**\n                             * Issue: While disabling range navigator console error throws\n                             * Fix:Check with rangeSlider present or not. Then checked with isDrag.\n                             */\n                            for (var i = 0, length_1 = _this.nodes.childNodes.length; i < length_1; i++) {\n                                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n                                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n                            }\n                        }\n                    }\n                }\n            });\n            this.datePicker.appendTo('#' + this.calendarId);\n        }\n    };\n    /**\n     * To find start and end value\n     *\n     * @param startValue\n     * @param endValue\n     */\n    PeriodSelector.prototype.findPeriodValue = function (startValue, endValue) {\n        for (var index = 0; index < (this.sortedData).length; index++) {\n            if ((this.sortedData[index]) >= startValue) {\n                this.startValue = index;\n                break;\n            }\n        }\n        for (var index = this.sortedData.length - 1; index >= 0; index--) {\n            if ((this.sortedData[index]) <= endValue) {\n                this.endValue = index;\n                break;\n            }\n        }\n    };\n    PeriodSelector.prototype.findSelectedIndex = function (startDate, endDate, buttons) {\n        var daysDiffence = (endDate - startDate) / (1000 * 60 * 60 * 24);\n        var selectedIndex;\n        for (var i = 0; i < buttons.length; i++) {\n            var period = buttons[i];\n            if (period.intervalType === 'Years' && daysDiffence / 365 === period.interval) {\n                selectedIndex = i;\n            }\n            else if (period.intervalType === 'Months' && (daysDiffence / 30 === period.interval || daysDiffence / 31 === period.interval)) {\n                selectedIndex = i;\n            }\n            else if (period.intervalType === 'Days' && daysDiffence === period.interval) {\n                selectedIndex = i;\n            }\n            else if (period.intervalType === 'Weeks' && daysDiffence / 7 === period.interval) {\n                selectedIndex = i;\n            }\n            else if (period.intervalType === 'Hours' && daysDiffence * 24 === period.interval) {\n                selectedIndex = i;\n            }\n            else if (period.intervalType === 'Seconds' && (daysDiffence * 24 * 3600) === period.interval) {\n                selectedIndex = i;\n            }\n        }\n        return selectedIndex;\n    };\n    PeriodSelector.prototype.updateCustomElement = function () {\n        var selector = [];\n        var controlId = this.rootControl.element.id;\n        var buttonStyles = 'text-transform: none; text-overflow: unset';\n        var className = 'e-dropdown-btn e-btn e-flat';\n        if (this.rootControl.getModuleName() === 'stockChart') {\n            if (this.rootControl.seriesType.length) {\n                var SeriesElement = createElement('button', { id: controlId + '_seriesType',\n                    styles: buttonStyles,\n                    className: className });\n                SeriesElement.innerText = 'Series';\n                selector.push({ template: SeriesElement,\n                    align: 'Left' });\n            }\n            if (this.rootControl.indicatorType.length) {\n                var indicatorElement = createElement('button', {\n                    id: controlId + '_indicatorType',\n                    styles: buttonStyles,\n                    className: className\n                });\n                indicatorElement.innerText = 'Indicators';\n                selector.push({ template: indicatorElement,\n                    align: 'Left' });\n            }\n            if (this.rootControl.trendlineType.length) {\n                var trendlineElement = createElement('button', {\n                    id: controlId + '_trendType',\n                    styles: buttonStyles,\n                    className: className\n                });\n                trendlineElement.innerText = 'Trendline';\n                selector.push({ template: trendlineElement,\n                    align: 'Left' });\n            }\n        }\n        return selector;\n    };\n    /**\n     * To set and remove the period style.\n     *\n     * @param buttons\n     * @param selectedIndex\n     * @returns {void}\n     */\n    PeriodSelector.prototype.setSelectedStyle = function (selectedIndex) {\n        for (var i = 0, length_2 = this.nodes.childNodes.length; i < length_2; i++) {\n            this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n        }\n        if (!isNullOrUndefined(selectedIndex)) {\n            this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-flat');\n            this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-active');\n        }\n    };\n    /**\n     * Button click handling.\n     *\n     * @param args\n     * @param control\n     * @param args\n     * @param control\n     */\n    PeriodSelector.prototype.buttonClick = function (args, control) {\n        var _this = this;\n        var clickedEle = args.item;\n        var slider = this.control.rangeSlider;\n        var buttons = this.control.periods;\n        var button = buttons.filter(function (btn) { return (btn.text === clickedEle.text); });\n        var updatedStart;\n        var updatedEnd;\n        buttons.map(function (period, index) {\n            if (period.selected && _this.rootControl.getModuleName() !== 'stockChart') {\n                period.selected = false;\n            }\n            if (period.text === args.item.text) {\n                _this.selectedIndex = (_this.nodes.childNodes.length - buttons.length) + index;\n                if (_this.rootControl.getModuleName() !== 'stockChart') {\n                    period.selected = true;\n                }\n            }\n        });\n        if (args.item.text !== '') {\n            this.setSelectedStyle(this.selectedIndex);\n        }\n        if (slider && clickedEle.text) {\n            slider.selectedPeriod = clickedEle.text;\n        }\n        if (clickedEle.text.toLowerCase() === 'all') {\n            updatedStart = control.seriesXMin;\n            updatedEnd = control.seriesXMax;\n            if (slider) {\n                slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n            }\n            else {\n                this.rootControl.rangeChanged(updatedStart, updatedEnd);\n            }\n        }\n        else if (clickedEle.text.toLowerCase() === 'ytd') {\n            if (slider) {\n                updatedStart = this.isDatetimeCategory ?\n                    new Date(new Date(this.sortedData[Math.floor(slider.currentEnd)]).getFullYear().toString()).getTime() :\n                    new Date(new Date(slider.currentEnd).getFullYear().toString()).getTime();\n                updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, slider.currentEnd) : updatedStart;\n                updatedEnd = slider.currentEnd;\n                slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n            }\n            else {\n                updatedStart = this.isDatetimeCategory ? new Date(new Date(this.sortedData[Math.floor(this.rootControl.currentEnd)]).getFullYear().toString()).getTime() :\n                    new Date(new Date(this.rootControl.currentEnd).getFullYear().toString()).getTime();\n                updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, this.rootControl.currentEnd) :\n                    updatedStart;\n                updatedEnd = this.rootControl.currentEnd;\n                this.rootControl.rangeChanged(updatedStart, updatedEnd);\n            }\n        }\n        else if (clickedEle.text.toLowerCase() !== '') {\n            if (slider) {\n                updatedStart = this.changedRange(button[0].intervalType, slider.currentEnd, button[0].interval).getTime();\n                updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, slider.currentEnd) : updatedStart;\n                updatedEnd = slider.currentEnd;\n                slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n            }\n            else {\n                updatedStart = this.changedRange(button[0].intervalType, this.rootControl.currentEnd, button[0].interval).getTime();\n                updatedStart = this.isDatetimeCategory ? this.findStartValue(updatedStart, this.rootControl.currentEnd) :\n                    updatedStart;\n                updatedEnd = this.rootControl.currentEnd;\n                this.rootControl.rangeChanged(updatedStart, updatedEnd);\n            }\n        }\n        if (this.rootControl.getModuleName() === 'stockChart') {\n            this.rootControl.zoomChange = false;\n        }\n        if (getElement(this.calendarId + '_popup') && !Browser.isDevice) {\n            var element = getElement(this.calendarId + '_popup');\n            element.querySelectorAll('.e-range-header')[0].style.display = 'none';\n        }\n    };\n    /**\n     * To find the start value.\n     *\n     * @param startValue\n     * @param endValue\n     */\n    PeriodSelector.prototype.findStartValue = function (startValue, endValue) {\n        for (var index = Math.floor(endValue); index >= 0; index--) {\n            if (this.sortedData[index] <= startValue) {\n                return (index + 1);\n            }\n        }\n        return 0;\n    };\n    /**\n     *\n     * @param type updatedRange for selector\n     * @param end\n     * @param interval\n     */\n    PeriodSelector.prototype.changedRange = function (type, end, interval) {\n        var result = this.isDatetimeCategory ? new Date(this.sortedData[Math.floor(end)]) : new Date(end);\n        switch (type) {\n            case 'Quarter':\n                result.setMonth(result.getMonth() - (3 * interval));\n                break;\n            case 'Months':\n                result.setMonth(result.getMonth() - interval);\n                break;\n            case 'Weeks':\n                result.setDate(result.getDate() - (interval * 7));\n                break;\n            case 'Days':\n                result.setDate(result.getDate() - interval);\n                break;\n            case 'Hours':\n                result.setHours(result.getHours() - interval);\n                break;\n            case 'Minutes':\n                result.setMinutes(result.getMinutes() - interval);\n                break;\n            case 'Seconds':\n                result.setSeconds(result.getSeconds() - interval);\n                break;\n            default:\n                result.setFullYear(result.getFullYear() - interval);\n                break;\n        }\n        return result;\n    };\n    /**\n     * Get module name\n     *\n     * @returns {string}\n     */\n    PeriodSelector.prototype.getModuleName = function () {\n        return 'PeriodSelector';\n    };\n    /**\n     * To destroy the period selector.\n     *\n     * @returns {void}\n     * @private\n     */\n    PeriodSelector.prototype.destroy = function () {\n        /**\n         * destroy method\n         */\n    };\n    return PeriodSelector;\n}());\nexport { PeriodSelector };\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,iBAAiB,EAAEC,OAAO,EAAEC,MAAM,QAAQ,sBAAsB;AACxF,SAASC,OAAO,QAAQ,6BAA6B;AACrD,SAASC,eAAe,QAAQ,2BAA2B;AAC3D,SAASC,UAAU,QAAQ,2BAA2B;AACtD,SAASC,IAAI,QAAQ,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAIC,cAAc,GAAG,aAAe,YAAY;EAC5C;EACA,SAASA,cAAcA,CAACC,OAAO,EAAE;IAC7B,IAAI,CAACA,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,CAACC,kBAAkB,GAAG,KAAK;IAC/B,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,WAAW,GAAGL,OAAO;IAC1B,IAAI,IAAI,CAACK,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;MACnD,IAAI,CAACJ,UAAU,GAAG,IAAI,CAACG,WAAW,CAACH,UAAU;MAC7C,IAAI,CAACD,kBAAkB,GAAG,IAAI,CAACI,WAAW,CAACE,kBAAkB;IACjE;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;EACIR,cAAc,CAACS,SAAS,CAACC,gBAAgB,GAAG,UAAUT,OAAO,EAAE;IAC3D,IAAIA,OAAO,CAACM,aAAa,CAAC,CAAC,KAAK,gBAAgB,EAAE;MAC9C,IAAI,CAACN,OAAO,CAACU,OAAO,GAAG,IAAI,CAACL,WAAW,CAACM,sBAAsB,CAACD,OAAO;MACtE,IAAI,CAACV,OAAO,CAACY,UAAU,GAAGZ,OAAO,CAACa,WAAW,CAACC,IAAI;MAClD,IAAI,CAACd,OAAO,CAACe,UAAU,GAAGf,OAAO,CAACa,WAAW,CAACG,IAAI;MAClD,IAAI,CAAChB,OAAO,CAACiB,WAAW,GAAGjB,OAAO,CAACiB,WAAW;MAC9C,IAAI,CAACjB,OAAO,CAACkB,qBAAqB,GAAGlB,OAAO;MAC5C,IAAI,CAACA,OAAO,CAACI,QAAQ,GAAGJ,OAAO,CAACI,QAAQ;MACxC,IAAI,CAACJ,OAAO,CAACG,UAAU,GAAGH,OAAO,CAACG,UAAU;IAChD,CAAC,MACI;MACD,IAAI,CAACH,OAAO,CAACU,OAAO,GAAG,IAAI,CAACL,WAAW,CAACK,OAAO;MAC/C,IAAI,CAACV,OAAO,CAACI,QAAQ,GAAG,IAAI,CAACJ,OAAO,CAACY,UAAU,GAAGZ,OAAO,CAACY,UAAU;MACpE,IAAI,CAACZ,OAAO,CAACG,UAAU,GAAG,IAAI,CAACH,OAAO,CAACe,UAAU,GAAGf,OAAO,CAACe,UAAU;MACtE,IAAI,CAACf,OAAO,CAACkB,qBAAqB,GAAG,IAAI,CAACb,WAAW,CAACc,cAAc;MACpE,IAAI,IAAI,CAACnB,OAAO,CAACkB,qBAAqB,EAAE;QACpC,IAAI,CAAClB,OAAO,CAACiB,WAAW,GAAG,IAAI,CAACZ,WAAW,CAACc,cAAc,CAACF,WAAW;MAC1E;IACJ;IACA,IAAI,CAACjB,OAAO,CAACoB,OAAO,GAAGpB,OAAO,CAACoB,OAAO;IACtC,IAAI,CAACpB,OAAO,CAACqB,oBAAoB,GAAGrB,OAAO,CAACqB,oBAAoB;EACpE,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACItB,cAAc,CAACS,SAAS,CAACc,cAAc,GAAG,UAAUC,OAAO,EAAEC,CAAC,EAAE;IAC5D,IAAIA,CAAC,KAAK,KAAK,CAAC,EAAE;MAAEA,CAAC,GAAG,CAAC;IAAE;IAC3B,IAAI,CAACC,qBAAqB,CAAC,IAAI,EAAEF,OAAO,EAAEC,CAAC,CAAC;IAC5C,IAAI,CAACE,cAAc,CAAC,CAAC;EACzB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI3B,cAAc,CAACS,SAAS,CAACiB,qBAAqB,GAAG,UAAUzB,OAAO,EAAEuB,OAAO,EAAEC,CAAC,EAAE;IAC5E;IACA,IAAI,CAACG,kBAAkB,GAAG3B,OAAO,GAAG,IAAI,CAAC2B,kBAAkB,GAAG,IAAI7B,IAAI,CAAC0B,CAAC,EAAE,IAAI,CAACnB,WAAW,CAACuB,SAAS,CAACC,MAAM,GACvG,IAAI,CAACxB,WAAW,CAACuB,SAAS,CAACC,MAAM,GAAG,EAAE,EAAEN,OAAO,CAACO,KAAK,EAAEP,OAAO,CAACM,MAAM,CAAC;IAC1E,IAAIE,SAAS;IACb,IAAIX,OAAO;IACX,IAAIpB,OAAO,EAAE;MACT+B,SAAS,GAAG/B,OAAO,CAACgC,UAAU,CAACC,UAAU;MACzCb,OAAO,GAAGpB,OAAO,CAACoB,OAAO;IAC7B,CAAC,MACI;MACDW,SAAS,GAAGR,OAAO,CAACQ,SAAS;MAC7BX,OAAO,GAAGG,OAAO,CAACH,OAAO;IAC7B;IACA,IAAIvB,UAAU,CAACuB,OAAO,CAACc,EAAE,GAAG,oBAAoB,CAAC,EAAE;MAC/CxC,MAAM,CAACG,UAAU,CAACuB,OAAO,CAACc,EAAE,GAAG,oBAAoB,CAAC,CAAC;IACzD;IACA,IAAI,CAACC,iBAAiB,GAAG5C,aAAa,CAAC,KAAK,EAAE;MAC1C2C,EAAE,EAAEd,OAAO,CAACc,EAAE,GAAG,oBAAoB;MACrCE,MAAM,EAAE,SAAS,IAAI,IAAI,CAACT,kBAAkB,CAACG,KAAK,GAAGC,SAAS,CAAC,GAAG,aAAa,GAC3E,IAAI,CAACJ,kBAAkB,CAACE,MAAM,GAAG,SAAS,GAC1C,IAAI,CAACF,kBAAkB,CAACU,CAAC,GAAG,UAAU,IACrC,IAAI,CAACV,kBAAkB,CAACH,CAAC,GAAGO,SAAS,GAAG,CAAC,CAAC,GAAG;IACtD,CAAC,CAAC;IACFX,OAAO,CAACkB,WAAW,CAAC,IAAI,CAACH,iBAAiB,CAAC;EAC/C,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIpC,cAAc,CAACS,SAAS,CAACkB,cAAc,GAAG,YAAY;IAClD,IAAIa,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC9B,gBAAgB,CAAC,IAAI,CAACJ,WAAW,CAAC;IACvC,IAAImC,YAAY,GAAG,IAAI;IACvB,IAAIC,SAAS,GAAG,IAAI,CAACzC,OAAO,CAACoB,OAAO,CAACc,EAAE;IACvC,IAAIQ,eAAe,GAAGnD,aAAa,CAAC,KAAK,EAAE;MAAE2C,EAAE,EAAEO,SAAS,GAAG;IAAY,CAAC,CAAC;IAC3E,IAAIE,OAAO,GAAG,IAAI,CAAC3C,OAAO,CAACU,OAAO;IAClC,IAAIkC,QAAQ,GAAG,IAAI,CAACC,mBAAmB,CAAC,CAAC;IACzC,IAAIC,YAAY,GAAG,4CAA4C;IAC/D,IAAIC,gBAAgB,GAAG,kBAAkB;IACzC,IAAIC,WAAW,GAAGP,SAAS,GAAG,aAAa;IAC3C,IAAIQ,cAAc;IAClB,IAAI,CAACd,iBAAiB,CAACG,WAAW,CAACI,eAAe,CAAC;IACnD,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,OAAO,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;MACrCN,QAAQ,CAACQ,IAAI,CAAC;QAAEC,KAAK,EAAE,MAAM;QAAEC,IAAI,EAAEX,OAAO,CAACO,CAAC,CAAC,CAACI;MAAK,CAAC,CAAC;IAC3D;IACA,IAAI,IAAI,CAACjD,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;MACnDkC,YAAY,GAAG,IAAI,CAACnC,WAAW,CAACkD,iBAAiB;IACrD;IACA,IAAIf,YAAY,EAAE;MACd,IAAI,CAACgB,UAAU,GAAGf,SAAS,GAAG,WAAW;MACzCG,QAAQ,CAACQ,IAAI,CAAC;QAAEK,QAAQ,EAAE,aAAa,GAAG,IAAI,CAACD,UAAU,GAAG,YAAY;QAAEH,KAAK,EAAE;MAAQ,CAAC,CAAC;IAC/F;IACA,IAAIK,WAAW,GAAG;MACdd,QAAQ,EAAEA,QAAQ;MAAEe,IAAI,EAAE,eAAe;MAAEC,MAAM,EAAE,KAAK;MAAEC,kBAAkB,EAAE,IAAI;MAAEC,OAAO,EAAE;IACjG,CAAC;IACD,IAAI,IAAI,CAACzD,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;MACnD,IAAI,IAAI,CAACD,WAAW,CAAC0D,UAAU,CAACZ,MAAM,EAAE;QACpC,IAAIa,aAAa,GAAGzE,aAAa,CAAC,QAAQ,EAAE;UAAE2C,EAAE,EAAEO,SAAS,GAAG,SAAS;UAAEL,MAAM,EAAEU,YAAY;UACzFmB,SAAS,EAAE;QAA8B,CAAC,CAAC;QAC/CD,aAAa,CAACE,SAAS,GAAG,QAAQ;QAClCtB,QAAQ,CAACQ,IAAI,CAAC;UAAEK,QAAQ,EAAEO,aAAa;UACnCX,KAAK,EAAE;QAAQ,CAAC,CAAC;MACzB;IACJ;IACA,IAAI,CAAChD,WAAW,CAAC8D,OAAO,CAAC,gBAAgB,EAAET,WAAW,CAAC;IACvD,IAAI,CAACU,OAAO,GAAG,IAAIzE,OAAO,CAAC;MACvB0E,KAAK,EAAEX,WAAW,CAACd,QAAQ;MAAEf,MAAM,EAAE,IAAI,CAACF,kBAAkB,CAACE,MAAM;MACnEyC,OAAO,EAAE,SAAAA,CAAUC,IAAI,EAAE;QACrBhC,KAAK,CAACiC,WAAW,CAACD,IAAI,EAAEhC,KAAK,CAACvC,OAAO,CAAC;MAC1C,CAAC;MAAEyE,OAAO,EAAE,SAAAA,CAAA,EAAY;QACpBlC,KAAK,CAACmC,KAAK,GAAGnC,KAAK,CAAC6B,OAAO,CAAChD,OAAO,CAACuD,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAC1E,IAAInF,iBAAiB,CAAC+C,KAAK,CAACqC,aAAa,CAAC,EAAE;UACxCjC,OAAO,CAACkC,GAAG,CAAC,UAAUC,MAAM,EAAEC,KAAK,EAAE;YACjC,IAAID,MAAM,CAACE,QAAQ,IAAIzC,KAAK,CAACU,cAAc,KAAK,IAAI,EAAE;cAClDA,cAAc,GAAG6B,MAAM;cACvBvC,KAAK,CAACvC,OAAO,CAACG,UAAU,GAAGoC,KAAK,CAAC0C,YAAY,CAACH,MAAM,CAACI,YAAY,EAAE3C,KAAK,CAACvC,OAAO,CAACI,QAAQ,EAAE0E,MAAM,CAACK,QAAQ,CAAC,CAACC,OAAO,CAAC,CAAC;cACrH,IAAI7C,KAAK,CAACtC,kBAAkB,EAAE;gBAC1BsC,KAAK,CAACvC,OAAO,CAACG,UAAU,GAAGoC,KAAK,CAAClC,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,GAAGiC,KAAK,CAAC8C,cAAc,CAAC9C,KAAK,CAACvC,OAAO,CAACG,UAAU,EAAEoC,KAAK,CAACvC,OAAO,CAACI,QAAQ,CAAC,GAAGmC,KAAK,CAAClC,WAAW,CAACF,UAAU;cACzL;cACAoC,KAAK,CAACvC,OAAO,CAACG,UAAU,GAAI2E,MAAM,CAACxB,IAAI,IAAIwB,MAAM,CAACxB,IAAI,CAACgC,WAAW,CAAC,CAAC,KAAK,KAAK,GAAI/C,KAAK,CAACvC,OAAO,CAACe,UAAU,GAAGwB,KAAK,CAACvC,OAAO,CAACG,UAAU;cACrIoC,KAAK,CAACvC,OAAO,CAACI,QAAQ,GAAI0E,MAAM,CAACxB,IAAI,IAAIwB,MAAM,CAACxB,IAAI,CAACgC,WAAW,CAAC,CAAC,KAAK,KAAK,GAAI/C,KAAK,CAACvC,OAAO,CAACY,UAAU,GAAG2B,KAAK,CAACvC,OAAO,CAACI,QAAQ;cACjImC,KAAK,CAACqC,aAAa,GAAIrC,KAAK,CAACmC,KAAK,CAACa,UAAU,CAACpC,MAAM,GAAGR,OAAO,CAACQ,MAAM,GAAI4B,KAAK;cAC9E,IAAIS,MAAM,GAAGjD,KAAK,CAACvC,OAAO,CAACiB,WAAW;cACtC,IAAIuE,MAAM,EAAE;gBACRA,MAAM,CAACvC,cAAc,GAAG6B,MAAM,CAACxB,IAAI;cACvC;YACJ;UACJ,CAAC,CAAC;QACN;QACA,IAAI,CAACL,cAAc,IAAIV,KAAK,CAAClC,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;UACvE,IAAIsE,aAAa,GAAGrC,KAAK,CAACkD,iBAAiB,CAAClD,KAAK,CAACvC,OAAO,CAACG,UAAU,EAAEoC,KAAK,CAACvC,OAAO,CAACI,QAAQ,EAAEuC,OAAO,CAAC;UACtGJ,KAAK,CAACqC,aAAa,GAAGA,aAAa,GAAGA,aAAa,GAAGrC,KAAK,CAACqC,aAAa;QAC7E;QACArC,KAAK,CAACmD,gBAAgB,CAACnD,KAAK,CAACqC,aAAa,CAAC;MAC/C;IACJ,CAAC,CAAC;IACF,IAAI,CAACR,OAAO,CAACrB,gBAAgB,CAAC,GAAG,IAAI;IACrC,IAAI,CAACqB,OAAO,CAACuB,QAAQ,CAACjD,eAAe,CAAC;IACtC,IAAI,CAACkD,aAAa,GAAG,IAAI;IACzB,IAAIpD,YAAY,EAAE;MACd,IAAI,CAACqD,UAAU,GAAG,IAAIjG,eAAe,CAAC;QAClCkG,GAAG,EAAE,IAAI,CAAC7F,kBAAkB,GAAG,IAAI8F,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAAC,IAAI,CAACF,OAAO,CAACe,UAAU,CAAC,CAAC,GAAG,IAAIgF,IAAI,CAAC,IAAI,CAAC/F,OAAO,CAACe,UAAU,CAAC;QACrHiF,GAAG,EAAE,IAAI,CAAC/F,kBAAkB,GAAG,IAAI8F,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAAC,IAAI,CAACF,OAAO,CAACY,UAAU,CAAC,CAAC,GAAG,IAAImF,IAAI,CAAC,IAAI,CAAC/F,OAAO,CAACY,UAAU,CAAC;QACrHqF,MAAM,EAAE,YAAY;QAAEC,WAAW,EAAE,gBAAgB;QACnDC,eAAe,EAAE,KAAK;QACtBC,SAAS,EAAE,IAAI,CAACnG,kBAAkB,GAAG,IAAI8F,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAACmG,IAAI,CAACC,KAAK,CAAC,IAAI,CAACtG,OAAO,CAACG,UAAU,CAAC,CAAC,CAAC,GAC/F,IAAI4F,IAAI,CAAC,IAAI,CAAC/F,OAAO,CAACG,UAAU,CAAC;QACrCoG,OAAO,EAAE,IAAI,CAACtG,kBAAkB,GAAG,IAAI8F,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAACmG,IAAI,CAACC,KAAK,CAAC,IAAI,CAACtG,OAAO,CAACI,QAAQ,CAAC,CAAC,CAAC,GAC3F,IAAI2F,IAAI,CAAC,IAAI,CAAC/F,OAAO,CAACI,QAAQ,CAAC;QACnCqE,OAAO,EAAE,SAAAA,CAAA,EAAY;UACjB,IAAIf,WAAW,CAACG,kBAAkB,EAAE;YAChC,IAAIgC,UAAU,GAAGW,QAAQ,CAACC,sBAAsB,CAAC,sBAAsB,CAAC;YACxE,IAAIC,iBAAiB,GAAG,KAAK,CAAC;YAC9B,KAAK,IAAIxD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2C,UAAU,CAAC1C,MAAM,EAAED,CAAC,EAAE,EAAE;cACxC,IAAI2C,UAAU,CAAC3C,CAAC,CAAC,CAACyD,QAAQ,CAAC,CAAC,CAAC,CAACzE,EAAE,CAAC0E,OAAO,CAACnE,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;gBACxDiE,iBAAiB,GAAGb,UAAU,CAAC3C,CAAC,CAAC;cACrC;YACJ;YACAwD,iBAAiB,CAACG,KAAK,CAACC,OAAO,GAAG,MAAM;YACxC,IAAI1F,OAAO,GAAG7B,aAAa,CAAC,KAAK,EAAE;cAC/B2C,EAAE,EAAEc,WAAW;cACfiB,SAAS,EAAE,uCAAuC;cAClD7B,MAAM,EAAE;YACZ,CAAC,CAAC;YACFhB,OAAO,CAAC8C,SAAS,GAAGR,WAAW,CAACI,OAAO;YACvC4C,iBAAiB,CAACK,qBAAqB,CAAC,UAAU,EAAE3F,OAAO,CAAC;YAC5DvB,UAAU,CAACmD,WAAW,CAAC,CAAC+D,qBAAqB,CAAC,YAAY,EAAGxH,aAAa,CAAC,MAAM,EAAE;cAC/E2C,EAAE,EAAEO,SAAS,GAAG,UAAU;cAAEwB,SAAS,EAAE,oDAAoD;cAC3F7B,MAAM,EAAE;cACR;YACJ,CAAC,CAAE,CAAC;YACJoE,QAAQ,CAACQ,cAAc,CAAChE,WAAW,CAAC,CAACiE,OAAO,GAAG,YAAY;cACvD1E,KAAK,CAACsD,UAAU,CAACqB,IAAI,CAACrH,UAAU,CAACmD,WAAW,CAAC,CAAC;YAClD,CAAC;UACL;QACJ,CAAC;QACDmE,MAAM,EAAE,SAAAA,CAAU5C,IAAI,EAAE;UACpB,IAAIhC,KAAK,CAACqD,aAAa,EAAE;YACrB,IAAIrD,KAAK,CAACtC,kBAAkB,EAAE;cAC1BsC,KAAK,CAACpC,UAAU,GAAGoE,IAAI,CAAC6B,SAAS,CAAChB,OAAO,CAAC,CAAC;cAC3C7C,KAAK,CAACnC,QAAQ,GAAGmE,IAAI,CAACgC,OAAO,CAACnB,OAAO,CAAC,CAAC;cACvC7C,KAAK,CAAC6E,eAAe,CAAC7E,KAAK,CAACpC,UAAU,EAAEoC,KAAK,CAACnC,QAAQ,CAAC;YAC3D;YACA,IAAImC,KAAK,CAACvC,OAAO,CAACiB,WAAW,IAAIsD,IAAI,CAAC8C,KAAK,EAAE;cACzC,IAAI9E,KAAK,CAAClC,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;gBACpDiC,KAAK,CAACvC,OAAO,CAACkB,qBAAqB,CAACf,UAAU,GAAGoC,KAAK,CAACtC,kBAAkB,GAAGsC,KAAK,CAACpC,UAAU,GACxFoE,IAAI,CAAC6B,SAAS,CAAChB,OAAO,CAAC,CAAC;gBAC5B7C,KAAK,CAACvC,OAAO,CAACkB,qBAAqB,CAACd,QAAQ,GAAGmC,KAAK,CAACtC,kBAAkB,GAAGsC,KAAK,CAACnC,QAAQ,GACpFmE,IAAI,CAACgC,OAAO,CAACnB,OAAO,CAAC,CAAC;gBAC1B7C,KAAK,CAACqC,aAAa,GAAG0C,SAAS;gBAC/B/E,KAAK,CAACU,cAAc,GAAG,IAAI;gBAC3BV,KAAK,CAACvC,OAAO,CAACkB,qBAAqB,CAACqG,OAAO,CAAC,CAAC;cACjD;cACAhF,KAAK,CAACvC,OAAO,CAACiB,WAAW,CAACuG,gBAAgB,CAACjF,KAAK,CAACtC,kBAAkB,GAAGsC,KAAK,CAACpC,UAAU,GAAGoE,IAAI,CAAC6B,SAAS,CAAChB,OAAO,CAAC,CAAC,EAAE7C,KAAK,CAACtC,kBAAkB,GACvIsC,KAAK,CAACnC,QAAQ,GAAGmE,IAAI,CAACgC,OAAO,CAACnB,OAAO,CAAC,CAAC,EAAE7C,KAAK,CAACvC,OAAO,CAACkB,qBAAqB,CAAC;YACrF,CAAC,MACI,IAAIqD,IAAI,CAAC8C,KAAK,EAAE;cACjB9E,KAAK,CAAClC,WAAW,CAACoH,YAAY,CAAClF,KAAK,CAACtC,kBAAkB,GAAGsC,KAAK,CAACpC,UAAU,GACtEoE,IAAI,CAAC6B,SAAS,CAAChB,OAAO,CAAC,CAAC,EAAE7C,KAAK,CAACtC,kBAAkB,GAAGsC,KAAK,CAACnC,QAAQ,GACnEmE,IAAI,CAACgC,OAAO,CAACnB,OAAO,CAAC,CAAC,CAAC;YAC/B;YACA7C,KAAK,CAACmC,KAAK,GAAGnC,KAAK,CAAC6B,OAAO,CAAChD,OAAO,CAACuD,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC1E,IAAI,CAACpC,KAAK,CAAClC,WAAW,CAACqH,QAAQ,IAAInF,KAAK,CAACvC,OAAO,CAACiB,WAAW,IAAIsB,KAAK,CAACvC,OAAO,CAACiB,WAAW,CAAC0G,MAAM,EAAE;cAC9F;AAC5B;AACA;AACA;cAC4B,KAAK,IAAIzE,CAAC,GAAG,CAAC,EAAE0E,QAAQ,GAAGrF,KAAK,CAACmC,KAAK,CAACa,UAAU,CAACpC,MAAM,EAAED,CAAC,GAAG0E,QAAQ,EAAE1E,CAAC,EAAE,EAAE;gBACzEX,KAAK,CAACmC,KAAK,CAACa,UAAU,CAACrC,CAAC,CAAC,CAACqC,UAAU,CAAC,CAAC,CAAC,CAACsC,SAAS,CAACnI,MAAM,CAAC,UAAU,CAAC;gBACpE6C,KAAK,CAACmC,KAAK,CAACa,UAAU,CAACrC,CAAC,CAAC,CAACqC,UAAU,CAAC,CAAC,CAAC,CAACsC,SAAS,CAACnI,MAAM,CAAC,UAAU,CAAC;cACxE;YACJ;UACJ;QACJ;MACJ,CAAC,CAAC;MACF,IAAI,CAACmG,UAAU,CAACF,QAAQ,CAAC,GAAG,GAAG,IAAI,CAACnC,UAAU,CAAC;IACnD;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIzD,cAAc,CAACS,SAAS,CAAC4G,eAAe,GAAG,UAAUjH,UAAU,EAAEC,QAAQ,EAAE;IACvE,KAAK,IAAI2E,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAI,IAAI,CAAC7E,UAAU,CAAEiD,MAAM,EAAE4B,KAAK,EAAE,EAAE;MAC3D,IAAK,IAAI,CAAC7E,UAAU,CAAC6E,KAAK,CAAC,IAAK5E,UAAU,EAAE;QACxC,IAAI,CAACA,UAAU,GAAG4E,KAAK;QACvB;MACJ;IACJ;IACA,KAAK,IAAIA,KAAK,GAAG,IAAI,CAAC7E,UAAU,CAACiD,MAAM,GAAG,CAAC,EAAE4B,KAAK,IAAI,CAAC,EAAEA,KAAK,EAAE,EAAE;MAC9D,IAAK,IAAI,CAAC7E,UAAU,CAAC6E,KAAK,CAAC,IAAK3E,QAAQ,EAAE;QACtC,IAAI,CAACA,QAAQ,GAAG2E,KAAK;QACrB;MACJ;IACJ;EACJ,CAAC;EACDhF,cAAc,CAACS,SAAS,CAACiF,iBAAiB,GAAG,UAAUW,SAAS,EAAEG,OAAO,EAAE5D,OAAO,EAAE;IAChF,IAAImF,YAAY,GAAG,CAACvB,OAAO,GAAGH,SAAS,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAChE,IAAIxB,aAAa;IACjB,KAAK,IAAI1B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,OAAO,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,IAAI4B,MAAM,GAAGnC,OAAO,CAACO,CAAC,CAAC;MACvB,IAAI4B,MAAM,CAACI,YAAY,KAAK,OAAO,IAAI4C,YAAY,GAAG,GAAG,KAAKhD,MAAM,CAACK,QAAQ,EAAE;QAC3EP,aAAa,GAAG1B,CAAC;MACrB,CAAC,MACI,IAAI4B,MAAM,CAACI,YAAY,KAAK,QAAQ,KAAK4C,YAAY,GAAG,EAAE,KAAKhD,MAAM,CAACK,QAAQ,IAAI2C,YAAY,GAAG,EAAE,KAAKhD,MAAM,CAACK,QAAQ,CAAC,EAAE;QAC3HP,aAAa,GAAG1B,CAAC;MACrB,CAAC,MACI,IAAI4B,MAAM,CAACI,YAAY,KAAK,MAAM,IAAI4C,YAAY,KAAKhD,MAAM,CAACK,QAAQ,EAAE;QACzEP,aAAa,GAAG1B,CAAC;MACrB,CAAC,MACI,IAAI4B,MAAM,CAACI,YAAY,KAAK,OAAO,IAAI4C,YAAY,GAAG,CAAC,KAAKhD,MAAM,CAACK,QAAQ,EAAE;QAC9EP,aAAa,GAAG1B,CAAC;MACrB,CAAC,MACI,IAAI4B,MAAM,CAACI,YAAY,KAAK,OAAO,IAAI4C,YAAY,GAAG,EAAE,KAAKhD,MAAM,CAACK,QAAQ,EAAE;QAC/EP,aAAa,GAAG1B,CAAC;MACrB,CAAC,MACI,IAAI4B,MAAM,CAACI,YAAY,KAAK,SAAS,IAAK4C,YAAY,GAAG,EAAE,GAAG,IAAI,KAAMhD,MAAM,CAACK,QAAQ,EAAE;QAC1FP,aAAa,GAAG1B,CAAC;MACrB;IACJ;IACA,OAAO0B,aAAa;EACxB,CAAC;EACD7E,cAAc,CAACS,SAAS,CAACqC,mBAAmB,GAAG,YAAY;IACvD,IAAID,QAAQ,GAAG,EAAE;IACjB,IAAIH,SAAS,GAAG,IAAI,CAACpC,WAAW,CAACe,OAAO,CAACc,EAAE;IAC3C,IAAIY,YAAY,GAAG,4CAA4C;IAC/D,IAAImB,SAAS,GAAG,6BAA6B;IAC7C,IAAI,IAAI,CAAC5D,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;MACnD,IAAI,IAAI,CAACD,WAAW,CAAC0H,UAAU,CAAC5E,MAAM,EAAE;QACpC,IAAI6E,aAAa,GAAGzI,aAAa,CAAC,QAAQ,EAAE;UAAE2C,EAAE,EAAEO,SAAS,GAAG,aAAa;UACvEL,MAAM,EAAEU,YAAY;UACpBmB,SAAS,EAAEA;QAAU,CAAC,CAAC;QAC3B+D,aAAa,CAAC9D,SAAS,GAAG,QAAQ;QAClCtB,QAAQ,CAACQ,IAAI,CAAC;UAAEK,QAAQ,EAAEuE,aAAa;UACnC3E,KAAK,EAAE;QAAO,CAAC,CAAC;MACxB;MACA,IAAI,IAAI,CAAChD,WAAW,CAAC4H,aAAa,CAAC9E,MAAM,EAAE;QACvC,IAAI+E,gBAAgB,GAAG3I,aAAa,CAAC,QAAQ,EAAE;UAC3C2C,EAAE,EAAEO,SAAS,GAAG,gBAAgB;UAChCL,MAAM,EAAEU,YAAY;UACpBmB,SAAS,EAAEA;QACf,CAAC,CAAC;QACFiE,gBAAgB,CAAChE,SAAS,GAAG,YAAY;QACzCtB,QAAQ,CAACQ,IAAI,CAAC;UAAEK,QAAQ,EAAEyE,gBAAgB;UACtC7E,KAAK,EAAE;QAAO,CAAC,CAAC;MACxB;MACA,IAAI,IAAI,CAAChD,WAAW,CAAC8H,aAAa,CAAChF,MAAM,EAAE;QACvC,IAAIiF,gBAAgB,GAAG7I,aAAa,CAAC,QAAQ,EAAE;UAC3C2C,EAAE,EAAEO,SAAS,GAAG,YAAY;UAC5BL,MAAM,EAAEU,YAAY;UACpBmB,SAAS,EAAEA;QACf,CAAC,CAAC;QACFmE,gBAAgB,CAAClE,SAAS,GAAG,WAAW;QACxCtB,QAAQ,CAACQ,IAAI,CAAC;UAAEK,QAAQ,EAAE2E,gBAAgB;UACtC/E,KAAK,EAAE;QAAO,CAAC,CAAC;MACxB;IACJ;IACA,OAAOT,QAAQ;EACnB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI7C,cAAc,CAACS,SAAS,CAACkF,gBAAgB,GAAG,UAAUd,aAAa,EAAE;IACjE,KAAK,IAAI1B,CAAC,GAAG,CAAC,EAAEmF,QAAQ,GAAG,IAAI,CAAC3D,KAAK,CAACa,UAAU,CAACpC,MAAM,EAAED,CAAC,GAAGmF,QAAQ,EAAEnF,CAAC,EAAE,EAAE;MACxE,IAAI,CAACwB,KAAK,CAACa,UAAU,CAACrC,CAAC,CAAC,CAACqC,UAAU,CAAC,CAAC,CAAC,CAACsC,SAAS,CAACnI,MAAM,CAAC,UAAU,CAAC;IACvE;IACA,IAAI,CAACF,iBAAiB,CAACoF,aAAa,CAAC,EAAE;MACnC,IAAI,CAACF,KAAK,CAACa,UAAU,CAACX,aAAa,CAAC,CAACW,UAAU,CAAC,CAAC,CAAC,CAACsC,SAAS,CAACS,GAAG,CAAC,QAAQ,CAAC;MAC1E,IAAI,CAAC5D,KAAK,CAACa,UAAU,CAACX,aAAa,CAAC,CAACW,UAAU,CAAC,CAAC,CAAC,CAACsC,SAAS,CAACS,GAAG,CAAC,UAAU,CAAC;IAChF;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIvI,cAAc,CAACS,SAAS,CAACgE,WAAW,GAAG,UAAUD,IAAI,EAAEvE,OAAO,EAAE;IAC5D,IAAIuC,KAAK,GAAG,IAAI;IAChB,IAAIgG,UAAU,GAAGhE,IAAI,CAACiE,IAAI;IAC1B,IAAIhD,MAAM,GAAG,IAAI,CAACxF,OAAO,CAACiB,WAAW;IACrC,IAAI0B,OAAO,GAAG,IAAI,CAAC3C,OAAO,CAACU,OAAO;IAClC,IAAI+H,MAAM,GAAG9F,OAAO,CAAC+F,MAAM,CAAC,UAAUC,GAAG,EAAE;MAAE,OAAQA,GAAG,CAACrF,IAAI,KAAKiF,UAAU,CAACjF,IAAI;IAAG,CAAC,CAAC;IACtF,IAAIsF,YAAY;IAChB,IAAIC,UAAU;IACdlG,OAAO,CAACkC,GAAG,CAAC,UAAUC,MAAM,EAAEC,KAAK,EAAE;MACjC,IAAID,MAAM,CAACE,QAAQ,IAAIzC,KAAK,CAAClC,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;QACvEwE,MAAM,CAACE,QAAQ,GAAG,KAAK;MAC3B;MACA,IAAIF,MAAM,CAACxB,IAAI,KAAKiB,IAAI,CAACiE,IAAI,CAAClF,IAAI,EAAE;QAChCf,KAAK,CAACqC,aAAa,GAAIrC,KAAK,CAACmC,KAAK,CAACa,UAAU,CAACpC,MAAM,GAAGR,OAAO,CAACQ,MAAM,GAAI4B,KAAK;QAC9E,IAAIxC,KAAK,CAAClC,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;UACpDwE,MAAM,CAACE,QAAQ,GAAG,IAAI;QAC1B;MACJ;IACJ,CAAC,CAAC;IACF,IAAIT,IAAI,CAACiE,IAAI,CAAClF,IAAI,KAAK,EAAE,EAAE;MACvB,IAAI,CAACoC,gBAAgB,CAAC,IAAI,CAACd,aAAa,CAAC;IAC7C;IACA,IAAIY,MAAM,IAAI+C,UAAU,CAACjF,IAAI,EAAE;MAC3BkC,MAAM,CAACvC,cAAc,GAAGsF,UAAU,CAACjF,IAAI;IAC3C;IACA,IAAIiF,UAAU,CAACjF,IAAI,CAACgC,WAAW,CAAC,CAAC,KAAK,KAAK,EAAE;MACzCsD,YAAY,GAAG5I,OAAO,CAACe,UAAU;MACjC8H,UAAU,GAAG7I,OAAO,CAACY,UAAU;MAC/B,IAAI4E,MAAM,EAAE;QACRA,MAAM,CAACgC,gBAAgB,CAACoB,YAAY,EAAEC,UAAU,EAAE,IAAI,CAAC7I,OAAO,CAACkB,qBAAqB,CAAC;MACzF,CAAC,MACI;QACD,IAAI,CAACb,WAAW,CAACoH,YAAY,CAACmB,YAAY,EAAEC,UAAU,CAAC;MAC3D;IACJ,CAAC,MACI,IAAIN,UAAU,CAACjF,IAAI,CAACgC,WAAW,CAAC,CAAC,KAAK,KAAK,EAAE;MAC9C,IAAIE,MAAM,EAAE;QACRoD,YAAY,GAAG,IAAI,CAAC3I,kBAAkB,GAClC,IAAI8F,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAACmG,IAAI,CAACC,KAAK,CAACd,MAAM,CAACsD,UAAU,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC5D,OAAO,CAAC,CAAC,GACrG,IAAIW,IAAI,CAAC,IAAIA,IAAI,CAACP,MAAM,CAACsD,UAAU,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC5D,OAAO,CAAC,CAAC;QAC5EwD,YAAY,GAAG,IAAI,CAAC3I,kBAAkB,GAAG,IAAI,CAACoF,cAAc,CAACuD,YAAY,EAAEpD,MAAM,CAACsD,UAAU,CAAC,GAAGF,YAAY;QAC5GC,UAAU,GAAGrD,MAAM,CAACsD,UAAU;QAC9BtD,MAAM,CAACgC,gBAAgB,CAACoB,YAAY,EAAEC,UAAU,EAAE,IAAI,CAAC7I,OAAO,CAACkB,qBAAqB,CAAC;MACzF,CAAC,MACI;QACD0H,YAAY,GAAG,IAAI,CAAC3I,kBAAkB,GAAG,IAAI8F,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAACmG,IAAI,CAACC,KAAK,CAAC,IAAI,CAACjG,WAAW,CAACyI,UAAU,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC5D,OAAO,CAAC,CAAC,GACpJ,IAAIW,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAAC1F,WAAW,CAACyI,UAAU,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC5D,OAAO,CAAC,CAAC;QACtFwD,YAAY,GAAG,IAAI,CAAC3I,kBAAkB,GAAG,IAAI,CAACoF,cAAc,CAACuD,YAAY,EAAE,IAAI,CAACvI,WAAW,CAACyI,UAAU,CAAC,GACnGF,YAAY;QAChBC,UAAU,GAAG,IAAI,CAACxI,WAAW,CAACyI,UAAU;QACxC,IAAI,CAACzI,WAAW,CAACoH,YAAY,CAACmB,YAAY,EAAEC,UAAU,CAAC;MAC3D;IACJ,CAAC,MACI,IAAIN,UAAU,CAACjF,IAAI,CAACgC,WAAW,CAAC,CAAC,KAAK,EAAE,EAAE;MAC3C,IAAIE,MAAM,EAAE;QACRoD,YAAY,GAAG,IAAI,CAAC3D,YAAY,CAACwD,MAAM,CAAC,CAAC,CAAC,CAACvD,YAAY,EAAEM,MAAM,CAACsD,UAAU,EAAEL,MAAM,CAAC,CAAC,CAAC,CAACtD,QAAQ,CAAC,CAACC,OAAO,CAAC,CAAC;QACzGwD,YAAY,GAAG,IAAI,CAAC3I,kBAAkB,GAAG,IAAI,CAACoF,cAAc,CAACuD,YAAY,EAAEpD,MAAM,CAACsD,UAAU,CAAC,GAAGF,YAAY;QAC5GC,UAAU,GAAGrD,MAAM,CAACsD,UAAU;QAC9BtD,MAAM,CAACgC,gBAAgB,CAACoB,YAAY,EAAEC,UAAU,EAAE,IAAI,CAAC7I,OAAO,CAACkB,qBAAqB,CAAC;MACzF,CAAC,MACI;QACD0H,YAAY,GAAG,IAAI,CAAC3D,YAAY,CAACwD,MAAM,CAAC,CAAC,CAAC,CAACvD,YAAY,EAAE,IAAI,CAAC7E,WAAW,CAACyI,UAAU,EAAEL,MAAM,CAAC,CAAC,CAAC,CAACtD,QAAQ,CAAC,CAACC,OAAO,CAAC,CAAC;QACnHwD,YAAY,GAAG,IAAI,CAAC3I,kBAAkB,GAAG,IAAI,CAACoF,cAAc,CAACuD,YAAY,EAAE,IAAI,CAACvI,WAAW,CAACyI,UAAU,CAAC,GACnGF,YAAY;QAChBC,UAAU,GAAG,IAAI,CAACxI,WAAW,CAACyI,UAAU;QACxC,IAAI,CAACzI,WAAW,CAACoH,YAAY,CAACmB,YAAY,EAAEC,UAAU,CAAC;MAC3D;IACJ;IACA,IAAI,IAAI,CAACxI,WAAW,CAACC,aAAa,CAAC,CAAC,KAAK,YAAY,EAAE;MACnD,IAAI,CAACD,WAAW,CAAC4I,UAAU,GAAG,KAAK;IACvC;IACA,IAAIpJ,UAAU,CAAC,IAAI,CAAC2D,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC/D,OAAO,CAACyJ,QAAQ,EAAE;MAC7D,IAAI9H,OAAO,GAAGvB,UAAU,CAAC,IAAI,CAAC2D,UAAU,GAAG,QAAQ,CAAC;MACpDpC,OAAO,CAACuD,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAACkC,KAAK,CAACC,OAAO,GAAG,MAAM;IACzE;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI/G,cAAc,CAACS,SAAS,CAAC6E,cAAc,GAAG,UAAUlF,UAAU,EAAEC,QAAQ,EAAE;IACtE,KAAK,IAAI2E,KAAK,GAAGsB,IAAI,CAACC,KAAK,CAAClG,QAAQ,CAAC,EAAE2E,KAAK,IAAI,CAAC,EAAEA,KAAK,EAAE,EAAE;MACxD,IAAI,IAAI,CAAC7E,UAAU,CAAC6E,KAAK,CAAC,IAAI5E,UAAU,EAAE;QACtC,OAAQ4E,KAAK,GAAG,CAAC;MACrB;IACJ;IACA,OAAO,CAAC;EACZ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIhF,cAAc,CAACS,SAAS,CAACyE,YAAY,GAAG,UAAUkE,IAAI,EAAEC,GAAG,EAAEjE,QAAQ,EAAE;IACnE,IAAIkE,MAAM,GAAG,IAAI,CAACpJ,kBAAkB,GAAG,IAAI8F,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAACmG,IAAI,CAACC,KAAK,CAAC8C,GAAG,CAAC,CAAC,CAAC,GAAG,IAAIrD,IAAI,CAACqD,GAAG,CAAC;IACjG,QAAQD,IAAI;MACR,KAAK,SAAS;QACVE,MAAM,CAACC,QAAQ,CAACD,MAAM,CAACE,QAAQ,CAAC,CAAC,GAAI,CAAC,GAAGpE,QAAS,CAAC;QACnD;MACJ,KAAK,QAAQ;QACTkE,MAAM,CAACC,QAAQ,CAACD,MAAM,CAACE,QAAQ,CAAC,CAAC,GAAGpE,QAAQ,CAAC;QAC7C;MACJ,KAAK,OAAO;QACRkE,MAAM,CAACG,OAAO,CAACH,MAAM,CAACI,OAAO,CAAC,CAAC,GAAItE,QAAQ,GAAG,CAAE,CAAC;QACjD;MACJ,KAAK,MAAM;QACPkE,MAAM,CAACG,OAAO,CAACH,MAAM,CAACI,OAAO,CAAC,CAAC,GAAGtE,QAAQ,CAAC;QAC3C;MACJ,KAAK,OAAO;QACRkE,MAAM,CAACK,QAAQ,CAACL,MAAM,CAACM,QAAQ,CAAC,CAAC,GAAGxE,QAAQ,CAAC;QAC7C;MACJ,KAAK,SAAS;QACVkE,MAAM,CAACO,UAAU,CAACP,MAAM,CAACQ,UAAU,CAAC,CAAC,GAAG1E,QAAQ,CAAC;QACjD;MACJ,KAAK,SAAS;QACVkE,MAAM,CAACS,UAAU,CAACT,MAAM,CAACU,UAAU,CAAC,CAAC,GAAG5E,QAAQ,CAAC;QACjD;MACJ;QACIkE,MAAM,CAACW,WAAW,CAACX,MAAM,CAACN,WAAW,CAAC,CAAC,GAAG5D,QAAQ,CAAC;QACnD;IACR;IACA,OAAOkE,MAAM;EACjB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACItJ,cAAc,CAACS,SAAS,CAACF,aAAa,GAAG,YAAY;IACjD,OAAO,gBAAgB;EAC3B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIP,cAAc,CAACS,SAAS,CAACyJ,OAAO,GAAG,YAAY;IAC3C;AACR;AACA;EAFQ,CAGH;EACD,OAAOlK,cAAc;AACzB,CAAC,CAAC,CAAE;AACJ,SAASA,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}