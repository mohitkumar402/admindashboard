{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Complex, ChildProperty, extend, getValue } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, Location, ContainerPadding, Accessibility } from '../model/base';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the appearance and behavior of legends in charts.\n */\nvar LegendSettings = /** @class */function (_super) {\n  __extends(LegendSettings, _super);\n  function LegendSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate([Property(true)], LegendSettings.prototype, \"visible\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"height\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"width\", void 0);\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, Location)], LegendSettings.prototype, \"location\", void 0);\n  __decorate([Property('Auto')], LegendSettings.prototype, \"position\", void 0);\n  __decorate([Property('Series')], LegendSettings.prototype, \"mode\", void 0);\n  __decorate([Property(8)], LegendSettings.prototype, \"padding\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"itemPadding\", void 0);\n  __decorate([Property('Center')], LegendSettings.prototype, \"alignment\", void 0);\n  __decorate([Complex({\n    fontFamily: null,\n    size: null,\n    fontStyle: null,\n    fontWeight: null,\n    color: null\n  }, Font)], LegendSettings.prototype, \"textStyle\", void 0);\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeHeight\", void 0);\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeWidth\", void 0);\n  __decorate([Complex({}, Border)], LegendSettings.prototype, \"border\", void 0);\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, Margin)], LegendSettings.prototype, \"margin\", void 0);\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, ContainerPadding)], LegendSettings.prototype, \"containerPadding\", void 0);\n  __decorate([Property(8)], LegendSettings.prototype, \"shapePadding\", void 0);\n  __decorate([Property('transparent')], LegendSettings.prototype, \"background\", void 0);\n  __decorate([Property(1)], LegendSettings.prototype, \"opacity\", void 0);\n  __decorate([Property(true)], LegendSettings.prototype, \"toggleVisibility\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"enableHighlight\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"description\", void 0);\n  __decorate([Property(3)], LegendSettings.prototype, \"tabIndex\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"title\", void 0);\n  __decorate([Complex({\n    fontFamily: null,\n    size: null,\n    fontStyle: null,\n    fontWeight: null,\n    color: null\n  }, Font)], LegendSettings.prototype, \"titleStyle\", void 0);\n  __decorate([Property('Top')], LegendSettings.prototype, \"titlePosition\", void 0);\n  __decorate([Property('Normal')], LegendSettings.prototype, \"textWrap\", void 0);\n  __decorate([Property('Ellipsis')], LegendSettings.prototype, \"textOverflow\", void 0);\n  __decorate([Property(100)], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"maximumLabelWidth\", void 0);\n  __decorate([Property(true)], LegendSettings.prototype, \"enablePages\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"isInversed\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"reverse\", void 0);\n  __decorate([Property('Auto')], LegendSettings.prototype, \"layout\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"maximumColumns\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"fixedWidth\", void 0);\n  __decorate([Complex({}, Accessibility)], LegendSettings.prototype, \"accessibility\", void 0);\n  return LegendSettings;\n}(ChildProperty);\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */function () {\n  /**\n   * Constructor for the dateTime module.\n   *\n   * @private\n   */\n  function BaseLegend(chart) {\n    this.maxItemHeight = 0;\n    this.rowHeights = [];\n    this.pageHeights = [];\n    this.columnHeights = [];\n    this.pageXCollections = []; // pages of x locations\n    this.chartRowCount = 1;\n    this.legendTitleCollections = [];\n    this.legendRegions = [];\n    this.pagingRegions = [];\n    this.chart = chart;\n    this.legend = chart.legendSettings;\n    this.legendID = chart.element.id + '_chart_legend';\n    this.isChartControl = chart.getModuleName() === 'chart' || chart.getModuleName() === 'chart3d';\n    this.isAccChartControl = chart.getModuleName() === 'accumulationchart' || chart.getModuleName() === 'circularchart3d';\n    this.isBulletChartControl = chart.getModuleName() === 'bulletChart';\n    this.isStockChartControl = chart.getModuleName() === 'stockChart';\n    this.bulletChart = this.chart;\n    this.fivePixel = 5;\n    this.rowCount = 0;\n    this.pageButtonSize = 8;\n    this.maxColumns = 0;\n    this.maxWidth = 0;\n    this.currentPage = 1;\n    this.backwardArrowOpacity = 0;\n    this.forwardArrowOpacity = 1;\n    this.arrowWidth = 2 * (this.fivePixel + this.pageButtonSize + this.fivePixel);\n    this.arrowHeight = this.arrowWidth;\n    this.isTop = false;\n    this.isTitle = false;\n    this.currentPageNumber = 1;\n  }\n  /**\n   * Calculate the bounds for the legends.\n   *\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize, previousLegendBounds, pointAnimation) {\n    var legend = this.legend;\n    var defaultValue = this.isBulletChartControl || (this.chart.getModuleName() === 'accumulationchart' || this.chart.getModuleName() === 'chart') && (this.legend.layout !== 'Auto' || this.legend.maximumColumns > 0) ? '40%' : '20%';\n    this.getPosition(legend.position, availableSize);\n    this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n    this.isVertical = this.position === 'Left' || this.position === 'Right';\n    this.itemPadding = this.legend.itemPadding ? this.legend.itemPadding : this.isVertical ? 8 : 20;\n    if (this.isVertical) {\n      this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n      this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n    } else {\n      this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n      this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n    }\n    if (this.chart.getModuleName() === 'chart3d') {\n      this.library.get3DLegendBounds(availableSize, this.legendBounds, legend);\n    } else {\n      this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n    }\n    if (!this.isBulletChartControl) {\n      this.legendBounds.width += this.legend.containerPadding.left + this.legend.containerPadding.right;\n      this.legendBounds.height += this.legend.containerPadding.top + this.legend.containerPadding.bottom;\n    }\n    this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize, previousLegendBounds, pointAnimation);\n  };\n  /**\n   * To find legend position based on available size for chart and accumulation chart\n   *\n   * @param position\n   * @param availableSize\n   * @param position\n   * @param availableSize\n   * @returns {void}\n   */\n  BaseLegend.prototype.getPosition = function (position, availableSize) {\n    var chart = this.chart;\n    var accumulation = this.chart;\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n      this.position = position !== 'Auto' ? position : 'Bottom';\n    } else {\n      if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n        position = 'Top';\n      }\n      this.position = position !== 'Auto' ? position : availableSize.width > availableSize.height ? 'Right' : 'Bottom';\n    }\n  };\n  /**\n   * To set bounds for chart and accumulation chart\n   *\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @returns {void}\n   */\n  BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n    var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n    if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n      titleHeight += this.pageButtonSize + this.fivePixel;\n    }\n    computedWidth = Math.min(computedWidth, legendBounds.width);\n    computedHeight = Math.min(computedHeight, legendBounds.height);\n    if (legend.mode === 'Gradient') {\n      legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n      legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n    } else {\n      legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n      legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n    }\n    if (!this.isBulletChartControl) {\n      if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n        this.calculateLegendTitle(legend, legendBounds);\n        legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ? this.legendTitleSize.height - this.legendTitleSize.height / this.legendTitleCollections.length : 0;\n      }\n    }\n    this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) / (this.maxItemHeight + legend.padding)));\n  };\n  /**\n   * To find legend location based on position, alignment for chart and accumulation chart\n   *\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   */\n  BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize, previousLegendBounds, pointAnimation) {\n    var padding = this.legend.border.width;\n    var isBulletChart = this.isBulletChartControl;\n    var bulletChart = this.bulletChart;\n    var labelIns = bulletChart.labelPosition === 'Inside';\n    var ticklIns = bulletChart.tickPosition === 'Inside';\n    var isVertical = bulletChart.orientation === 'Vertical';\n    var categoryFieldValue = isBulletChart && bulletChart.categoryField !== '' ? maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n    var marginBottom = this.chart.margin.bottom;\n    var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n    var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n    if (position === 'Bottom') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = previousLegendBounds && (legendBounds.height === previousLegendBounds.height || this.chart.series[0].type !== 'Pie') ? previousLegendBounds.y : rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n      legendBounds.y += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 : isVertical && bulletChart.categoryField !== '' ? maxLabelSize.height + padding * 2 : 0;\n      if (!pointAnimation || legendBounds.height !== previousLegendBounds.height) {\n        {\n          subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n        }\n      }\n    } else if (position === 'Top') {\n      var axisTextSize = void 0;\n      if (this.isChartControl) {\n        axisTextSize = measureText('100', this.chart.verticalAxes[0].labelStyle, this.chart.themeStyle.legendLabelFont);\n      }\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = previousLegendBounds && (legendBounds.height === previousLegendBounds.height || this.chart.series[0].type !== 'Pie') ? previousLegendBounds.y : rect.y + padding + this.legend.margin.top;\n      legendBounds.y -= isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n      legendHeight -= isBulletChart ? -padding * 2 : this.isChartControl ? -padding * 2 - axisTextSize.height / 2 : 0;\n      if (!pointAnimation || legendBounds.height !== previousLegendBounds.height) {\n        subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n      }\n    } else if (position === 'Right') {\n      legendBounds.x = previousLegendBounds && (legendBounds.width === previousLegendBounds.width || this.chart.series[0].type !== 'Pie') ? previousLegendBounds.x : rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height : 0;\n      if (!pointAnimation || legendBounds.width !== previousLegendBounds.width) {\n        subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n      }\n    } else if (position === 'Left') {\n      legendBounds.x = previousLegendBounds && (legendBounds.width === previousLegendBounds.width || this.chart.series[0].type !== 'Pie') ? previousLegendBounds.x : legendBounds.x + this.legend.margin.left;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height : bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '' ? categoryFieldValue : 0;\n      if (!pointAnimation || legendBounds.width !== previousLegendBounds.width) {\n        subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n      }\n    } else {\n      legendBounds.x = this.legend.location.x;\n      legendBounds.y = this.legend.location.y;\n      subtractThickness(rect, new Thickness(0, 0, 0, 0));\n    }\n  };\n  /**\n   * To find legend alignment for chart and accumulation chart\n   *\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   */\n  BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n    switch (alignment) {\n      case 'Far':\n        start = size - legendSize - start;\n        break;\n      case 'Center':\n        start = (size - legendSize) / 2;\n        break;\n    }\n    return start;\n  };\n  /**\n   * Renders the legend.\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw, pointAnimation) {\n    var titleHeight = 0;\n    var titlePlusArrowWidth = 0;\n    var pagingLegendBounds = new Rect(0, 0, 0, 0);\n    var requireLegendBounds = new Rect(0, 0, 0, 0);\n    var xValue;\n    var yValue;\n    if (pointAnimation) {\n      xValue = getElement(this.legendID + '_element').getAttribute('x');\n      yValue = getElement(this.legendID + '_element').getAttribute('y');\n    }\n    var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n    var padding = legend.padding;\n    this.itemPadding = this.isBulletChartControl ? legend.padding : this.itemPadding;\n    var isPaging = legend.enablePages;\n    var titlePosition = legend.titlePosition;\n    var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical && (chart.getModuleName() !== 'accumulationchart' && chart.getModuleName() !== 'chart' || this.legend.layout === 'Auto') ? this.pageButtonSize : 0;\n    var legendGroup = chart.renderer.createGroup({\n      id: this.legendID + '_g'\n    });\n    var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n    this.legendRegions = [];\n    this.chartRowCount = 1;\n    var maxHeight = 0;\n    titleHeight = !this.isTitle ? 0 : this.isTop || this.isVertical ? this.legendTitleSize.height : 0;\n    if (this.isChartControl || this.isAccChartControl && (!this.isVertical || legend.layout && legend.layout !== 'Auto')) {\n      var pageCount = 1;\n      var rowHeights = this.rowHeights[0] + (this.isVertical || this.rowHeights.length > 1 && this.legend.itemPadding && this.chart.getModuleName() === 'chart' ? this.itemPadding : padding);\n      for (var i = 1; i < this.rowHeights.length; i++) {\n        if (rowHeights + this.rowHeights[i] + ((this.isVertical || this.rowHeights.length > 1 && this.chart.getModuleName() === 'chart') && this.legend.itemPadding ? this.itemPadding : padding) > this.legendBounds.height - this.pageButtonSize - this.maxItemHeight / 2 - this.legend.containerPadding.top - this.legend.containerPadding.bottom) {\n          this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n          pageCount++;\n          rowHeights = 0;\n        }\n        rowHeights += this.rowHeights[i] + (this.isVertical || this.rowHeights.length > 1 && this.legend.itemPadding && this.chart.getModuleName() === 'chart' ? this.itemPadding : padding);\n      }\n      this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n      this.totalPages = pageCount;\n    }\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      if (this.legendCollections[i].text !== '') {\n        maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n        break;\n      } else {\n        continue;\n      }\n    }\n    if (!this.isChartControl && !this.isAccChartControl) {\n      this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n    }\n    // For new legend navigation\n    if (!isPaging && this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n      titlePlusArrowWidth += this.pageButtonSize + 2 * this.fivePixel;\n    } else if (this.isTitle && !this.isVertical) {\n      titlePlusArrowWidth = titlePosition === (!this.isRtlEnable ? 'Left' : 'Right') ? this.fivePixel + this.legendTitleSize.width : 0;\n    }\n    if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n      this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n      this.totalPages = 1;\n    } else if (firstLegend !== this.legendCollections.length) {\n      var legendSeriesGroup = void 0; // legendItem group for each series group element\n      var count = 0;\n      var previousLegend = this.legendCollections[firstLegend];\n      // starting shape center x,y position && to resolve lint error used new line for declaration\n      var startPadding = this.isBulletChartControl ? padding : titlePlusArrowWidth + padding + legend.shapeWidth / 2 + legend.containerPadding.left;\n      var xLocation = this.isBulletChartControl && !this.isRtlEnable ? legendBounds.x + titlePlusArrowWidth + padding + legend.shapeWidth / 2 : !this.isRtlEnable ? legendBounds.x + startPadding : legendBounds.x + (this.chart.getModuleName() === 'accumulationchart' && this.isVertical && legend.layout === 'Auto' && !(legend.maximumColumns > 0) ? this.maxWidth : legendBounds.width) - startPadding;\n      var start = new ChartLocation(xLocation, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 : legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 + legend.containerPadding.top);\n      var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n      var textOptions = new TextOption('', start.x, start.y, anchor);\n      var textPadding = legend.shapePadding + this.itemPadding + legend.shapeWidth;\n      //  initialization for totalPages legend click totalpage again calculate\n      this.totalPages = this.totalPages = this.isAccChartControl || this.isChartControl || this.isBulletChartControl || this.isStockChartControl ? this.totalPages : 0;\n      this.pageXCollections = [];\n      this.legendCollections[firstLegend].location = start;\n      var legendIndex = void 0;\n      if (!legend.enablePages && this.isPaging) {\n        var x = start.x - this.fivePixel;\n        var y = start.y - this.fivePixel;\n        var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ? this.legendTitleSize.width + this.fivePixel : 0;\n        var bottomSapce = this.isVertical ? this.pageButtonSize + Math.abs(y - legendBounds.y) : 0;\n        var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0;\n        rightSpace += this.isVertical ? 0 : this.fivePixel + this.pageButtonSize + this.fivePixel;\n        pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n        requireLegendBounds = pagingLegendBounds;\n      } else {\n        requireLegendBounds = legendBounds;\n      }\n      var legendOption = void 0;\n      for (var i = 0; i < this.legendCollections.length; i++) {\n        legendOption = this.legendCollections[i];\n        legendIndex = !this.isReverse ? count : this.legendCollections.length - 1 - count;\n        if (this.chart.getModuleName() === 'accumulationchart') {\n          legendOption.fill = (this.chart || this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n        }\n        if (this.chart.getModuleName() === 'stockChart') {\n          legendOption.type = this.chart.visibleSeries[count].type;\n        }\n        this.accessbilityText = this.isBulletChartControl ? 'Legend of bullet chart' + '' + legendOption.text : 'Click to show or hide the ' + legendOption.text + ' series';\n        if (legendOption.render && legendOption.text && legendOption.text !== '') {\n          legendSeriesGroup = chart.renderer.createGroup({\n            id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n          });\n          if (legendSeriesGroup && (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'accumulationchart')) {\n            legendSeriesGroup.setAttribute('tabindex', i === 0 && legend.accessibility.focusable ? String(legend.accessibility.tabIndex) : '');\n            legendSeriesGroup.style.outline = 'none';\n            legendSeriesGroup.setAttribute('aria-label', legend.accessibility.accessibilityDescription ? legend.accessibility.accessibilityDescription : legendOption.text + ' series is ' + (legendOption.visible ? 'showing, press enter to hide the ' : 'hidden, press enter to show the ') + legendOption.text + ' series');\n            legendSeriesGroup.setAttribute('role', legend.accessibility.accessibilityRole ? legend.accessibility.accessibilityRole : 'button');\n            legendSeriesGroup.setAttribute('aria-pressed', legendOption.visible ? 'true' : 'false');\n          } else if (legendSeriesGroup) {\n            legendSeriesGroup.setAttribute('tabindex', i === 0 ? '0' : '');\n            legendSeriesGroup.style.outline = 'none';\n            legendSeriesGroup.setAttribute('aria-label', legend.description || legendOption.text + ' series is ' + (legendOption.visible ? 'showing, press enter to hide the ' : 'hidden, press enter to show the ') + legendOption.text + ' series');\n            legendSeriesGroup.setAttribute('role', 'button');\n            legendSeriesGroup.setAttribute('aria-pressed', legendOption.visible ? 'true' : 'false');\n          }\n          this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n          this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n          this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n          if (legendSeriesGroup) {\n            legendSeriesGroup.style.cssText = 'pointer-events: bounding-box; cursor: ' + (!legend.toggleVisibility && (chart.selectionMode === 'None' || chart.highlightMode === 'None' || chart.selectionMode === 'None') || this.isBulletChartControl ? 'auto' : 'pointer');\n          }\n          if (legendTranslateGroup) {\n            legendTranslateGroup.appendChild(legendSeriesGroup);\n          }\n          previousLegend = legendOption;\n        }\n        count++;\n      }\n      this.totalPages = this.isPaging && !this.isBulletChartControl && !this.legend.enablePages && !this.isVertical && this.totalPages > this.chartRowCount ? this.chartRowCount : this.totalPages;\n      this.currentPage = this.currentPage > 1 && this.currentPage > this.totalPages ? this.totalPages : this.currentPage;\n      if (this.isPaging && this.totalPages > 1) {\n        this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n      } else {\n        this.totalPages = 1;\n      }\n    }\n    if (pointAnimation) {\n      var translateX = \"translate(\" + (this.rowCount > 1 ? 0 : Math.round(Number(xValue)) - Math.round(this.legendBounds.x)) + \" \\n              + ',' + \" + (Math.round(Number(yValue)) - Math.round(this.legendBounds.y)) + \")\";\n      var translateY = \"translate(\" + (Math.round(Number(xValue)) - Math.round(this.legendBounds.x)) + \", \" + (Math.round(Number(yValue)) - Math.round(this.legendBounds.y)) + \")\";\n      appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw, true, 'x', 'y', undefined, undefined, undefined, undefined, undefined, chart.duration, undefined, undefined, new ChartLocation(0, 0), this.position === 'Top' || this.position === 'Bottom' ? translateX : translateY);\n    } else {\n      appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n    }\n  };\n  /**\n   * To get linear legend.\n   *\n   * @param {Rect} legendBounds - The bounds of the legend.\n   * @param {Chart | AccumulationChart | BulletChart | StockChart | Chart3D | CircularChart3D} chart - The chart instance.\n   * @param {LegendSettingsModel} legend - The legend settings.\n   * @param {Element} legendTranslateGroup - The group element to translate the legend.\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var previousLegend = this.legendCollections[0];\n    var nextLegend = this.legendCollections[1];\n    var defElement = this.chart.renderer.createDefs();\n    var gradientLegendCount = 0;\n    var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n    var opacity = 1;\n    var fillColors = [];\n    var numberItems = [];\n    if (legend.title) {\n      if (!this.isVertical) {\n        if (legend.titlePosition === 'Left') {\n          legendBounds.x += this.legendTitleSize.width;\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Right') {\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Top') {\n          legendBounds.y += this.legendTitleSize.height;\n          legendBounds.height -= this.legendTitleSize.height;\n        }\n      } else {\n        legendBounds.y += this.legendTitleSize.height;\n        legendBounds.height -= this.legendTitleSize.height;\n      }\n    }\n    for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n      var colorMap = _a[_i];\n      if (numberItems.indexOf(colorMap.start) < 0) {\n        numberItems.push(colorMap.start);\n      }\n      if (colorMap.colors.length > 2) {\n        var diffValue = colorMap.end - colorMap.start;\n        var colorsLength = colorMap.colors.length - 1;\n        if (diffValue > 0) {\n          diffValue = diffValue / colorsLength;\n          for (var index = 1; index < colorsLength; index++) {\n            var calculatedValue = colorMap.start + diffValue * index;\n            numberItems.push(calculatedValue);\n          }\n        } else {\n          for (var index = 1; index < colorsLength; index++) {\n            numberItems.push(colorMap.start);\n          }\n        }\n      }\n      if (numberItems.indexOf(colorMap.end) < 0) {\n        numberItems.push(colorMap.end);\n      }\n      for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n        var fillColor = _c[_b];\n        if (fillColors.indexOf(fillColor) < 0) {\n          fillColors.push(fillColor);\n        }\n      }\n      if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n        fillColors.push(colorMap.colors[0]);\n      }\n    }\n    var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n    var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n    var y2 = this.isVertical ? '100%' : '0%';\n    linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n    linerGradientEle.setAttribute('x1', x1);\n    linerGradientEle.setAttribute('y1', '0%');\n    linerGradientEle.setAttribute('x2', x2);\n    linerGradientEle.setAttribute('y2', y2);\n    var full = numberItems[numberItems.length - 1] - numberItems[0];\n    for (var b = 0; b < fillColors.length; b++) {\n      var offsetValue = numberItems[b] - numberItems[0];\n      offsetValue = offsetValue / full;\n      var stopEle = document.createElementNS(xmlns, 'stop');\n      stopEle.setAttribute('offset', offsetValue.toString());\n      stopEle.setAttribute('stop-color', fillColors[b]);\n      stopEle.setAttribute('stop-opacity', opacity.toString());\n      linerGradientEle.appendChild(stopEle);\n    }\n    var startLabel = previousLegend.text.toString();\n    var endLabel = nextLegend.text.toString();\n    var startTextSize = measureText(startLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var endTextSize = measureText(endLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n    var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n    var otherSpaces = 2 * textWidth + 4 * legend.padding;\n    var linearBarWidth = legendBounds.width;\n    var linearBarHeight = legendBounds.height;\n    var xValue = legendBounds.x + textWidth + 2 * legend.padding;\n    var yValue = legendBounds.y + legend.padding;\n    var startLabelY;\n    var endLabelY;\n    var startLabelX;\n    var endLabelX;\n    if (this.isVertical) {\n      otherSpaces = 2 * textHeight + 4 * legend.padding;\n      linearBarWidth = legendBounds.width - 2 * legend.padding;\n      linearBarHeight = legendBounds.height - otherSpaces;\n      xValue = legendBounds.x + legend.padding;\n      yValue = legendBounds.y + textHeight + 2 * legend.padding;\n      startLabelY = legendBounds.y + legend.padding + textHeight;\n      endLabelY = yValue + linearBarHeight + textHeight;\n      startLabelX = legendBounds.x + legendBounds.width * 0.5 - textWidth * 0.5;\n      endLabelX = startLabelX;\n      if (linearBarWidth > 30) {\n        var diffWidth = linearBarWidth - 30;\n        linearBarWidth = 30;\n        xValue = xValue + diffWidth / 2;\n      }\n    } else {\n      linearBarWidth = legendBounds.width - otherSpaces;\n      linearBarHeight = legendBounds.height - 2 * legend.padding;\n      startLabelX = legendBounds.x + (!this.isRtlEnable ? legend.padding + (textWidth - startTextSize.width) : linearBarWidth + 3 * legend.padding + textWidth);\n      endLabelX = legendBounds.x + (!this.isRtlEnable ? linearBarWidth + 3 * legend.padding + textWidth : legend.padding + (textWidth - endTextSize.width));\n      startLabelY = legendBounds.y + legendBounds.height * 0.5 + textHeight * 0.25;\n      endLabelY = startLabelY;\n      if (linearBarHeight > 30) {\n        var diffHeight = linearBarHeight - 30;\n        linearBarHeight = 30;\n        yValue = yValue + diffHeight / 2;\n      }\n    }\n    var anchor = chart.enableRtl ? 'end' : '';\n    var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n    var hiddenColor = '#D3D3D3';\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n    var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    var gradientLegend = chart.renderer.drawRectangle({\n      width: linearBarWidth,\n      height: linearBarHeight,\n      x: xValue,\n      y: yValue,\n      fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n    });\n    defElement.appendChild(linerGradientEle);\n    legendTranslateGroup.appendChild(defElement);\n    legendTranslateGroup.appendChild(gradientLegend);\n  };\n  /**\n   * To find first valid legend text index for chart and accumulation chart\n   *\n   * @param legendCollection\n   * @returns {number}\n   * @private\n   */\n  BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n    var count = 0;\n    for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n      var legend = legendCollection_1[_i];\n      if (legend.render && legend.text && legend.text !== '') {\n        break;\n      }\n      count++;\n    }\n    return count;\n  };\n  /**\n   * To get the legend title text width and height.\n   *\n   * @param legend\n   * @param legendBounds\n   */\n  BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n    if (legend.title) {\n      this.isTop = legend.titlePosition === 'Top';\n      var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n      if (this.isTop || this.isVertical) {\n        this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, legendBounds.width - padding, this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n      } else {\n        this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle, this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n      }\n      var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n      this.legendTitleSize = measureText(text, legend.titleStyle, this.chart.themeStyle.legendTitleFont);\n      this.legendTitleSize.height *= this.legendTitleCollections.length;\n    } else {\n      this.legendTitleSize = new Size(0, 0);\n    }\n  };\n  /**\n   * Render the legend title\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param legendGroup\n   */\n  BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n    var padding = legend.padding;\n    var alignment = legend.titleStyle.textAlignment;\n    this.isTop = legend.titlePosition === 'Top';\n    var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n    var x = titlePositionX(legendBounds, legend.titleStyle);\n    anchor = this.isTop || this.isVertical ? anchor : chart.enableRtl ? 'end' : '';\n    x = alignment === 'Near' ? x + padding : alignment === 'Far' ? x - padding : x;\n    x = this.isTop || this.isVertical ? x : legendBounds.x + (legend.titlePosition === 'Left' ? 5 : legendBounds.width - this.legendTitleSize.width - 5);\n    var topPadding = legendBounds.height / 2 + this.legendTitleSize.height / 4;\n    var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding : this.legendTitleSize.height / this.legendTitleCollections.length);\n    var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n    textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color || this.chart.themeStyle.legendTitleFont.color, legendGroup, null, null, null, null, null, null, null, null, null, null, this.chart.themeStyle.legendTitleFont);\n  };\n  /**\n   * To create legend rendering elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendBounds\n   * @param legendGroup\n   * @param legend\n   * @param id\n   * @param redraw\n   */\n  BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n    var padding = legend.padding;\n    var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds, 0, 0, '', this.legend.border.dashArray);\n    var legendItemsGroup = chart.renderer.createGroup({\n      id: id + '_collections'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var clippath = chart.renderer.createClipPath({\n      id: id + '_clipPath'\n    });\n    options.width = this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical && legend.layout === 'Auto' && !(legend.maximumColumns > 0) ? this.maxWidth : legendBounds.width;\n    if (legendGroup) {\n      legendGroup.appendChild(chart.renderer.drawRectangle(options));\n    } else {\n      chart.renderer.drawRectangle(options);\n    }\n    if (legend.title) {\n      this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n    }\n    if (!isCanvas) {\n      legendGroup.appendChild(legendItemsGroup);\n    }\n    this.legendTranslateGroup = chart.renderer.createGroup({\n      id: id + '_translate_g'\n    });\n    if (!isCanvas) {\n      legendItemsGroup.appendChild(this.legendTranslateGroup);\n    }\n    options.y += (this.isTop ? this.legendTitleSize.height : 0) + (!this.isBulletChartControl ? legend.containerPadding.top : 0);\n    options.height -= (this.isTop && (this.isChartControl || !this.isVertical || legend.layout !== 'Auto') ? this.legendTitleSize.height : 0) + (this.isBulletChartControl ? 0 : legend.containerPadding.top);\n    options.id += '_clipPath_rect';\n    options.width = !this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl && !(chart.getModuleName() === 'accumulationchart' && (legend.layout !== 'Auto' || legend.maximumColumns > 0)) && this.isVertical ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right : legendBounds.width;\n    if (!isCanvas) {\n      this.clipRect = chart.renderer.drawRectangle(options);\n      clippath.appendChild(this.clipRect);\n    } else {\n      this.pagingClipRect = options;\n    }\n    appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n    if (!isCanvas) {\n      legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n    }\n    return this.legendTranslateGroup;\n  };\n  /**\n   * To render legend symbols for chart and accumulation chart\n   *\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   */\n  BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n    var control = this.isBulletChartControl ? this.chart : null;\n    var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n    var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.shape === 'SeriesType' && legendOption.type.toLowerCase().indexOf('line') > -1 && legendOption.type.toLowerCase().indexOf('area') === -1 || legendOption.shape === 'HorizontalLine' || legendOption.shape === 'VerticalLine' || legendOption.shape === 'Cross');\n    var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var borderColor;\n    var shape = legendOption.shape === 'SeriesType' ? legendOption.type : legendOption.shape;\n    var strokewidth = isStrokeWidth ? this.legend.mode === 'Series' ? this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width : this.isBulletChartControl && legendOption.shape === 'Multiply' ? 4 : 1;\n    var regionPadding;\n    shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n    if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n      var series = this.chart.visibleSeries[legendIndex];\n      var seriesBorder = series.border;\n      var isLineShapemarker = shape === 'HorizontalLine' || shape === 'VerticalLine';\n      borderColor = isLineShapemarker ? symbolColor : seriesBorder.color ? seriesBorder.color : symbolColor;\n      strokewidth = isLineShapemarker ? series.width : seriesBorder.width ? seriesBorder.width : 1;\n    }\n    var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, isCustomBorder ? borderColor : symbolColor, this.legend.opacity, legendOption.dashArray, '');\n    var textSize = measureText(legendOption.text, this.legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding : legendOption.location.x;\n    var y = legendOption.location.y;\n    if (!isCanvas) {\n      group.appendChild(drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n    } else {\n      regionPadding = -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber);\n      drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n      this.legendRegions.push({\n        rect: new Rect(legendOption.location.x - this.legend.shapeWidth, legendOption.location.y, this.legend.shapeWidth + this.legend.shapePadding, this.legend.shapeHeight + regionPadding),\n        index: legendIndex\n      });\n    }\n    if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' || legendOption.type === 'Doughnut' && shape === 'Doughnut') {\n      symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n      shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n      symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n      if (!isCanvas) {\n        group.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n      } else {\n        drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n      }\n    }\n  };\n  /**\n   * To render legend text for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   */\n  BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n    var legend = chart.legendSettings;\n    var hiddenColor = '#D3D3D3';\n    var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n    textOptions.text = legendOption.textCollection.length > 0 ? legendOption.textCollection : legendOption.text;\n    if (legend.isInversed && !this.isRtlEnable) {\n      textOptions.x = legendOption.location.x - legend.shapeWidth / 2;\n    } else if (this.isRtlEnable) {\n      var textWidth = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont).width;\n      textOptions.x = this.chart.getModuleName() === 'bulletChart' ? legendOption.location.x - legend.shapeWidth : legendOption.location.x - ((legendOption.textCollection.length > 1 ? textWidth / legendOption.textCollection.length : textWidth) + legend.shapeWidth / 2 + legend.shapePadding);\n    } else {\n      textOptions.x = legendOption.location.x + legend.shapeWidth / 2 + legend.shapePadding;\n    }\n    textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    if (isCanvas) {\n      var textSize = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n      var region = void 0;\n      for (var j = 0; j < this.legendRegions.length; j++) {\n        if (this.legendRegions[j].index === i) {\n          region = this.legendRegions[j];\n          break;\n        }\n      }\n      region.rect.y = textOptions.y < region.rect.y ? textOptions.y : region.rect.y;\n      region.rect.width += textSize.width;\n      region.rect.height = textSize.height;\n      region.rect.y -= textSize.height * 0.5;\n      region.rect.x -= this.isRtlEnable ? region.rect.width : 0;\n    }\n  };\n  /**\n   * To render legend paging elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   */\n  BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n    var paginggroup = chart.renderer.createGroup({\n      id: this.legendID + '_navigation'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n    var grayColor = this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1 ? '#FFFFFF' : '#545454';\n    var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n    var padding = 8; // const padding for paging elements\n    var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n    var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n    var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n    var iconSize = chart.availableSize.width < 110 || chart.availableSize.height < 190 ? 4 : this.pageButtonSize;\n    var legendFontSize = extend({}, getValue('properties', legend.textStyle), null, true);\n    legendFontSize.size = chart.availableSize.width < 110 || chart.availableSize.height < 190 && !this.isBulletChartControl && this.chart.getModuleName() === 'accumulationchart' ? '8px' : legend.textStyle.size;\n    // Page left arrow drawing calculation started here\n    var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 : this.rowCount - 1;\n    var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n    this.pagingRegions = [];\n    this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n    this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n    if (!isCanvas) {\n      legendGroup.appendChild(paginggroup);\n    }\n    if (!this.isChartControl && !this.isAccChartControl) {\n      if (this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n        this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n      } else {\n        this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n      }\n    }\n    if (paginggroup) {\n      paginggroup.style.cursor = 'pointer';\n    }\n    if ((this.isChartControl || this.isAccChartControl) && !(!legend.enablePages && this.isPaging)) {\n      this.clipPathHeight = this.pageHeights[0] - (this.isTitle && this.isTop && (this.isChartControl || !this.isVertical || legend.layout !== 'Auto') ? this.legendTitleSize.height : 0) - legend.containerPadding.top - legend.containerPadding.bottom;\n    } else {\n      this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n    }\n    //this.clipPathHeight = !(this.isChartControl) ? (rowCount * (this.maxItemHeight + legend.padding)) : this.columnHeights[0];\n    if (!isCanvas) {\n      this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n    } else {\n      //paging clipRect only for canvas mode\n      this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight - (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n      this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n      this.pagingClipRect.x += legend.border.width;\n      this.pagingClipRect.width -= legend.border.width + legend.border.width / 2;\n      this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n    }\n    var pageTextElement;\n    var x = bounds.x + iconSize / 2;\n    var y = bounds.y + this.clipPathHeight + (titleHeight + bounds.height - this.clipPathHeight) / 2;\n    if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n      x = bounds.x + this.pageButtonSize + titleWidth;\n      y = legend.title && this.isTop ? bounds.y + padding + titleHeight + iconSize / 1 + 0.5 : bounds.y + padding + iconSize + 0.5;\n    }\n    var size = measureText(this.totalPages + '/' + this.totalPages, legendFontSize, this.chart.themeStyle.legendLabelFont);\n    var translateX = this.isRtlEnable ? legend.border.width + iconSize / 2 : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + iconSize / 2 + padding / 2 + titleHeight;\n        symbolOption.opacity = this.backwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n      } else {\n        symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity : legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n    // Page numbering rendering calculation started here\n    textOption.x = x + iconSize / 2 + padding;\n    textOption.y = y + size.height / 4;\n    textOption.id = this.legendID + '_pagenumber';\n    textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n    var color = this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1 ? '#FFFFFF' : legend.textStyle.color || this.chart.theme === 'Tailwind3' ? '#111827' : this.chart.theme === 'Tailwind3Dark' ? '#FFFFFF' : this.chart.themeStyle.legendLabelFont.color;\n    if (isCanvas && this.totalNoOfPages) {\n      textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n    }\n    if (legend.enablePages || this.isBulletChartControl) {\n      pageTextElement = textElement(chart.renderer, textOption, legendFontSize, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0), null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    }\n    // Page right arrow rendering calculation started here\n    x = textOption.x + padding + iconSize / 2 + size.width;\n    if (this.isPaging && !legend.enablePages && !this.isBulletChartControl && !this.isVertical) {\n      x = bounds.x + bounds.width - (this.isBulletChartControl ? this.fivePixel : 0) - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0);\n    }\n    symbolOption.id = pageDown;\n    symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + bounds.height - iconSize / 2;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n      } else {\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n    if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      //placing the navigation buttons and page numbering in legend right corner\n      paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n    } else {\n      if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n        this.totalNoOfPages = this.totalPages;\n        this.calTotalPage = false;\n      }\n      if (!legend.enablePages && !this.isBulletChartControl) {\n        // For new legend page navigation\n        this.translatePage(isCanvas, null, this.currentPage - 1, this.currentPage, legend);\n      }\n    }\n    if (legend.enablePages || this.isBulletChartControl) {\n      this.translatePage(isCanvas, pageTextElement, this.currentPage - 1, this.currentPage, legend);\n    }\n  };\n  BaseLegend.prototype.getPageHeight = function (pageHeights, pageCount) {\n    var sum = 0;\n    for (var i = 0; i < pageCount; i++) {\n      sum += pageHeights[i] - (this.isTitle && this.isTop ? this.legendTitleSize.height : 0);\n    }\n    return sum;\n  };\n  /**\n   * To translate legend pages for chart and accumulation chart\n   *\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   */\n  BaseLegend.prototype.translatePage = function (isCanvas, pagingText, page, pageNumber, legend) {\n    var size = this.isChartControl || this.isAccChartControl ? page ? this.getPageHeight(this.pageHeights, page) : 0 : this.clipPathHeight * page;\n    if (!isCanvas && (this.isChartControl || this.isAccChartControl)) {\n      this.clipRect.setAttribute('height', (this.pageHeights[page] - (this.isTitle && this.isTop && (this.isChartControl || !this.isVertical || legend.layout !== 'Auto') ? this.legendTitleSize.height : 0) - legend.containerPadding.top - legend.containerPadding.bottom).toString());\n      if (this.isAccChartControl && this.isPaging && !legend.enablePages && this.isVertical && (this.chart.getModuleName() !== 'accumulationchart' || legend.layout === 'Auto')) {\n        this.clipRect.setAttribute('height', this.legendBounds.height.toString());\n      }\n    }\n    var translate = 'translate(0,-' + size + ')';\n    if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && !(this.chart.getModuleName() === 'accumulationchart' && legend.layout !== 'Auto') && this.isVertical) {\n      var pageX = this.pageXCollections[page * this.maxColumns];\n      size = !this.isRtlEnable ? pageX - this.legendBounds.x : this.legendBounds.x + this.maxWidth - pageX;\n      size = size < 0 ? 0 : size; // to avoid small pixel variation\n      translate = (!this.isRtlEnable ? 'translate(-' : 'translate(') + size + ',0)';\n    }\n    if (!this.chart.enableCanvas) {\n      this.legendTranslateGroup.setAttribute('transform', translate);\n    }\n    if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      pagingText.textContent = pageNumber + '/' + this.totalPages;\n    }\n    this.currentPage = pageNumber;\n    return size;\n  };\n  /**\n   * To change legend pages for chart and accumulation chart\n   *\n   * @param event\n   * @param pageUp\n   * @param event\n   * @param pageUp\n   */\n  BaseLegend.prototype.changePage = function (event, pageUp) {\n    var legend = this.chart.legendSettings;\n    var backwardArrow = document.getElementById(this.legendID + '_pageup');\n    var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var pageText = legend.enablePages || this.isBulletChartControl ? document.getElementById(this.legendID + '_pagenumber') : null;\n    var page = legend.enablePages || this.isBulletChartControl ? parseInt(pageText.textContent.split('/')[0], 10) : this.currentPage;\n    if (pageUp && page > 1) {\n      this.translatePage(isCanvas, pageText, page - 2, page - 1, legend);\n    } else if (!pageUp && page < this.totalPages) {\n      this.translatePage(isCanvas, pageText, page, page + 1, legend);\n    }\n    if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      if (this.currentPage === this.totalPages) {\n        this.hideArrow(forwardArrow);\n      } else {\n        this.showArrow(forwardArrow);\n      }\n      if (this.currentPage === 1) {\n        this.hideArrow(backwardArrow);\n      } else {\n        this.showArrow(backwardArrow);\n      }\n      // this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n      // this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n    }\n  };\n  /**\n   * To hide the backward and forward arrow\n   *\n   * @param arrowElement\n   */\n  BaseLegend.prototype.hideArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '0');\n  };\n  /**\n   * To show the  backward and forward arrow\n   *\n   * @param arrowElement\n   */\n  BaseLegend.prototype.showArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '1');\n  };\n  /**\n   * To find legend elements id based on chart or accumulation chart\n   *\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @private\n   */\n  BaseLegend.prototype.generateId = function (option, prefix, count) {\n    if (this.isChartControl || this.isStockChartControl) {\n      return prefix + count;\n    } else {\n      return prefix + option.pointIndex;\n    }\n  };\n  /**\n   * To show or hide trimmed text tooltip for legend.\n   *\n   * @param event\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.move = function (event) {\n    var _this = this;\n    var x = this.chart.mouseX;\n    var y = this.chart.mouseY;\n    if (event.target.textContent.indexOf('...') > -1) {\n      var targetId = event.target.id.split(this.legendID + '_text_');\n      if (targetId.length === 2) {\n        var index = parseInt(targetId[1], 10);\n        var element = this.chart.element;\n        if (!isNaN(index)) {\n          if (this.chart.isTouch) {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n          }\n          if (this.isChartControl) {\n            showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          } else {\n            showTooltip(this.chart.getModuleName() === 'accumulationchart' ? this.legendCollections[index].originalText : this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          }\n        }\n      }\n    } else {\n      removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n    }\n    if (this.chart.isTouch) {\n      clearTimeout(this.clearTooltip);\n      this.clearTooltip = +setTimeout(function () {\n        removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip');\n      }, 1000);\n    }\n  };\n  return BaseLegend;\n}();\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */function () {\n  function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex, dashArray, originalText) {\n    this.location = {\n      x: 0,\n      y: 0\n    };\n    this.textCollection = [];\n    this.text = text;\n    this.fill = fill;\n    this.shape = shape;\n    this.url = url;\n    this.visible = visible;\n    this.type = type;\n    this.markerVisibility = markerVisibility;\n    this.markerShape = markerShape;\n    this.pointIndex = pointIndex;\n    this.seriesIndex = seriesIndex;\n    this.dashArray = dashArray;\n    this.originalText = originalText;\n  }\n  return LegendOptions;\n}();\nexport { LegendOptions };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Property","Complex","ChildProperty","extend","getValue","measureText","Rect","TextOption","Size","PathOption","Font","Border","Margin","Location","ContainerPadding","Accessibility","subtractThickness","Thickness","drawSymbol","ChartLocation","titlePositionX","getTitle","textTrim","getTextAnchor","RectOption","textElement","stringToNumber","removeElement","showTooltip","getElement","appendChildElement","LegendSettings","_super","apply","x","y","fontFamily","size","fontStyle","fontWeight","color","left","right","top","bottom","BaseLegend","chart","maxItemHeight","rowHeights","pageHeights","columnHeights","pageXCollections","chartRowCount","legendTitleCollections","legendRegions","pagingRegions","legend","legendSettings","legendID","element","id","isChartControl","getModuleName","isAccChartControl","isBulletChartControl","isStockChartControl","bulletChart","fivePixel","rowCount","pageButtonSize","maxColumns","maxWidth","currentPage","backwardArrowOpacity","forwardArrowOpacity","arrowWidth","arrowHeight","isTop","isTitle","currentPageNumber","calculateLegendBounds","rect","availableSize","maxLabelSize","previousLegendBounds","pointAnimation","defaultValue","layout","maximumColumns","getPosition","position","legendBounds","isVertical","itemPadding","height","margin","width","library","get3DLegendBounds","getLegendBounds","containerPadding","getLocation","alignment","accumulation","visibleSeries","type","setBounds","computedWidth","computedHeight","titleHeight","title","titlePosition","legendTitleSize","isPaging","enablePages","Math","min","mode","titleStyle","textOverflow","calculateLegendTitle","max","ceil","padding","border","isBulletChart","labelIns","labelPosition","ticklIns","tickPosition","orientation","categoryFieldValue","categoryField","marginBottom","legendHeight","legendWidth","alignLegend","series","opposedPosition","majorTickLines","axisTextSize","verticalAxes","labelStyle","themeStyle","legendLabelFont","location","start","legendSize","renderLegend","redraw","titlePlusArrowWidth","pagingLegendBounds","requireLegendBounds","xValue","yValue","getAttribute","firstLegend","findFirstLegendPosition","legendCollections","upArrowHeight","legendGroup","renderer","createGroup","legendTranslateGroup","createLegendElements","maxHeight","pageCount","totalPages","text","textSize","shapeHeight","isRtlEnable","getLinearLegend","legendSeriesGroup","count","previousLegend","startPadding","shapeWidth","xLocation","anchor","isRtlEnabled","enableRtl","textOptions","textPadding","shapePadding","legendIndex","leftSpace","bottomSapce","abs","rightSpace","legendOption","isReverse","fill","points","pointIndex","accessbilityText","render","generateId","setAttribute","accessibility","focusable","String","tabIndex","style","outline","accessibilityDescription","visible","accessibilityRole","description","getRenderPoint","renderSymbol","renderText","cssText","toggleVisibility","selectionMode","highlightMode","appendChild","renderPagingElements","translateX","round","Number","translateY","enableCanvas","svgObject","undefined","duration","xmlns","nextLegend","defElement","createDefs","gradientLegendCount","linerGradientEle","document","createElementNS","opacity","fillColors","numberItems","_i","_a","rangeColorSettings","colorMap","indexOf","push","colors","diffValue","end","colorsLength","index","calculatedValue","_b","_c","fillColor","x1","x2","y2","full","offsetValue","stopEle","toString","startLabel","endLabel","startTextSize","textStyle","endTextSize","textWidth","textHeight","otherSpaces","linearBarWidth","linearBarHeight","startLabelY","endLabelY","startLabelX","endLabelX","diffWidth","diffHeight","hiddenColor","fontcolor","isCanvas","translatePage","gradientLegend","drawRectangle","legendCollection","legendCollection_1","legendTitleFont","maximumTitleWidth","renderLegendTitle","textAlignment","topPadding","legendTitleTextOptions","options","background","dashArray","legendItemsGroup","clippath","createClipPath","clipRect","pagingClipRect","group","control","symbolColor","isStrokeWidth","shape","toLowerCase","isCustomBorder","borderColor","strokewidth","regionPadding","markerShape","seriesBorder","isLineShapemarker","symbolOption","isInversed","url","markerVisibility","textCollection","region","j","bounds","textOption","paginggroup","grayColor","theme","pageUp","pageDown","iconSize","legendFontSize","titleWidth","cursor","clipPathHeight","clearRect","pageTextElement","totalNoOfPages","calTotalPage","getPageHeight","sum","pagingText","page","pageNumber","translate","pageX","textContent","changePage","event","backwardArrow","getElementById","forwardArrow","pageText","parseInt","split","hideArrow","showArrow","arrowElement","option","prefix","move","_this","mouseX","mouseY","targetId","isNaN","isTouch","name","offsetWidth","originalText","clearTimeout","clearTooltip","setTimeout","LegendOptions","seriesIndex"],"sources":["C:/Users/mkfun/Desktop/ct assignment/admin/node_modules/@syncfusion/ej2-charts/src/common/legend/legend.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Complex, ChildProperty, extend, getValue } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, Location, ContainerPadding, Accessibility } from '../model/base';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the appearance and behavior of legends in charts.\n */\nvar LegendSettings = /** @class */ (function (_super) {\n    __extends(LegendSettings, _super);\n    function LegendSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"width\", void 0);\n    __decorate([\n        Complex({ x: 0, y: 0 }, Location)\n    ], LegendSettings.prototype, \"location\", void 0);\n    __decorate([\n        Property('Auto')\n    ], LegendSettings.prototype, \"position\", void 0);\n    __decorate([\n        Property('Series')\n    ], LegendSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"padding\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"itemPadding\", void 0);\n    __decorate([\n        Property('Center')\n    ], LegendSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Complex({ fontFamily: null, size: null, fontStyle: null, fontWeight: null, color: null }, Font)\n    ], LegendSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n    __decorate([\n        Complex({}, Border)\n    ], LegendSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, Margin)\n    ], LegendSettings.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, ContainerPadding)\n    ], LegendSettings.prototype, \"containerPadding\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"shapePadding\", void 0);\n    __decorate([\n        Property('transparent')\n    ], LegendSettings.prototype, \"background\", void 0);\n    __decorate([\n        Property(1)\n    ], LegendSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"enableHighlight\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"description\", void 0);\n    __decorate([\n        Property(3)\n    ], LegendSettings.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"title\", void 0);\n    __decorate([\n        Complex({ fontFamily: null, size: null, fontStyle: null, fontWeight: null, color: null }, Font)\n    ], LegendSettings.prototype, \"titleStyle\", void 0);\n    __decorate([\n        Property('Top')\n    ], LegendSettings.prototype, \"titlePosition\", void 0);\n    __decorate([\n        Property('Normal')\n    ], LegendSettings.prototype, \"textWrap\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], LegendSettings.prototype, \"textOverflow\", void 0);\n    __decorate([\n        Property(100)\n    ], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"maximumLabelWidth\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"enablePages\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"isInversed\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"reverse\", void 0);\n    __decorate([\n        Property('Auto')\n    ], LegendSettings.prototype, \"layout\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"maximumColumns\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"fixedWidth\", void 0);\n    __decorate([\n        Complex({}, Accessibility)\n    ], LegendSettings.prototype, \"accessibility\", void 0);\n    return LegendSettings;\n}(ChildProperty));\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */ (function () {\n    /**\n     * Constructor for the dateTime module.\n     *\n     * @private\n     */\n    function BaseLegend(chart) {\n        this.maxItemHeight = 0;\n        this.rowHeights = [];\n        this.pageHeights = [];\n        this.columnHeights = [];\n        this.pageXCollections = []; // pages of x locations\n        this.chartRowCount = 1;\n        this.legendTitleCollections = [];\n        this.legendRegions = [];\n        this.pagingRegions = [];\n        this.chart = chart;\n        this.legend = chart.legendSettings;\n        this.legendID = chart.element.id + '_chart_legend';\n        this.isChartControl = (chart.getModuleName() === 'chart' || chart.getModuleName() === 'chart3d');\n        this.isAccChartControl = (chart.getModuleName() === 'accumulationchart' || chart.getModuleName() === 'circularchart3d');\n        this.isBulletChartControl = (chart.getModuleName() === 'bulletChart');\n        this.isStockChartControl = (chart.getModuleName() === 'stockChart');\n        this.bulletChart = this.chart;\n        this.fivePixel = 5;\n        this.rowCount = 0;\n        this.pageButtonSize = 8;\n        this.maxColumns = 0;\n        this.maxWidth = 0;\n        this.currentPage = 1;\n        this.backwardArrowOpacity = 0;\n        this.forwardArrowOpacity = 1;\n        this.arrowWidth = (2 * (this.fivePixel + this.pageButtonSize + this.fivePixel));\n        this.arrowHeight = this.arrowWidth;\n        this.isTop = false;\n        this.isTitle = false;\n        this.currentPageNumber = 1;\n    }\n    /**\n     * Calculate the bounds for the legends.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize, previousLegendBounds, pointAnimation) {\n        var legend = this.legend;\n        var defaultValue = (this.isBulletChartControl || ((this.chart.getModuleName() === 'accumulationchart' || this.chart.getModuleName() === 'chart') && (this.legend.layout !== 'Auto' || this.legend.maximumColumns > 0))) ? '40%' : '20%';\n        this.getPosition(legend.position, availableSize);\n        this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n        this.isVertical = (this.position === 'Left' || this.position === 'Right');\n        this.itemPadding = this.legend.itemPadding ? this.legend.itemPadding : this.isVertical ? 8 : 20;\n        if (this.isVertical) {\n            this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n            this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n        }\n        else {\n            this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n            this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n        }\n        if (this.chart.getModuleName() === 'chart3d') {\n            this.library.get3DLegendBounds(availableSize, this.legendBounds, legend);\n        }\n        else {\n            this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n        }\n        if (!this.isBulletChartControl) {\n            this.legendBounds.width += (this.legend.containerPadding.left + this.legend.containerPadding.right);\n            this.legendBounds.height += (this.legend.containerPadding.top + this.legend.containerPadding.bottom);\n        }\n        this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize, previousLegendBounds, pointAnimation);\n    };\n    /**\n     * To find legend position based on available size for chart and accumulation chart\n     *\n     * @param position\n     * @param availableSize\n     * @param position\n     * @param availableSize\n     * @returns {void}\n     */\n    BaseLegend.prototype.getPosition = function (position, availableSize) {\n        var chart = this.chart;\n        var accumulation = this.chart;\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n            this.position = (position !== 'Auto') ? position : 'Bottom';\n        }\n        else {\n            if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n                position = 'Top';\n            }\n            this.position = (position !== 'Auto') ? position :\n                (availableSize.width > availableSize.height ? 'Right' : 'Bottom');\n        }\n    };\n    /**\n     * To set bounds for chart and accumulation chart\n     *\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @returns {void}\n     */\n    BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n        var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n        if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n            titleHeight += (this.pageButtonSize + this.fivePixel);\n        }\n        computedWidth = Math.min(computedWidth, legendBounds.width);\n        computedHeight = Math.min(computedHeight, legendBounds.height);\n        if (legend.mode === 'Gradient') {\n            legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n            legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n        }\n        else {\n            legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n            legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n        }\n        if (!this.isBulletChartControl) {\n            if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n                this.calculateLegendTitle(legend, legendBounds);\n                legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ?\n                    (this.legendTitleSize.height - (this.legendTitleSize.height / this.legendTitleCollections.length)) : 0;\n            }\n        }\n        this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) /\n            (this.maxItemHeight + legend.padding)));\n    };\n    /**\n     * To find legend location based on position, alignment for chart and accumulation chart\n     *\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     */\n    BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize, previousLegendBounds, pointAnimation) {\n        var padding = this.legend.border.width;\n        var isBulletChart = this.isBulletChartControl;\n        var bulletChart = this.bulletChart;\n        var labelIns = bulletChart.labelPosition === 'Inside';\n        var ticklIns = bulletChart.tickPosition === 'Inside';\n        var isVertical = bulletChart.orientation === 'Vertical';\n        var categoryFieldValue = (isBulletChart && bulletChart.categoryField !== '') ?\n            maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n        var marginBottom = this.chart.margin.bottom;\n        var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n        var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n        if (position === 'Bottom') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = (previousLegendBounds && (legendBounds.height === previousLegendBounds.height || this.chart.series[0].type !== 'Pie')) ? previousLegendBounds.y : rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n            legendBounds.y += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns\n                && !isVertical) ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 :\n                (isVertical && bulletChart.categoryField !== '') ? maxLabelSize.height + padding * 2 : 0;\n            if ((!pointAnimation || (legendBounds.height !== previousLegendBounds.height))) {\n                {\n                    subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n                }\n            }\n        }\n        else if (position === 'Top') {\n            var axisTextSize = void 0;\n            if (this.isChartControl) {\n                axisTextSize = measureText('100', this.chart.verticalAxes[0].labelStyle, this.chart.themeStyle.legendLabelFont);\n            }\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = (previousLegendBounds && (legendBounds.height === previousLegendBounds.height || this.chart.series[0].type !== 'Pie')) ? previousLegendBounds.y : rect.y + padding + this.legend.margin.top;\n            legendBounds.y -= (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                !isVertical) ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n            legendHeight -= (isBulletChart) ? -padding * 2 : (this.isChartControl ? -padding * 2 - axisTextSize.height / 2 : 0);\n            if (!pointAnimation || (legendBounds.height !== previousLegendBounds.height)) {\n                subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n            }\n        }\n        else if (position === 'Right') {\n            legendBounds.x = (previousLegendBounds && (legendBounds.width === previousLegendBounds.width || this.chart.series[0].type !== 'Pie')) ? previousLegendBounds.x : rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height) : 0;\n            if (!pointAnimation || (legendBounds.width !== previousLegendBounds.width)) {\n                subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n            }\n        }\n        else if (position === 'Left') {\n            legendBounds.x = (previousLegendBounds && (legendBounds.width === previousLegendBounds.width || this.chart.series[0].type !== 'Pie')) ? previousLegendBounds.x : legendBounds.x + this.legend.margin.left;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height) :\n                (bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '') ? categoryFieldValue : 0;\n            if (!pointAnimation || (legendBounds.width !== previousLegendBounds.width)) {\n                subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n            }\n        }\n        else {\n            legendBounds.x = this.legend.location.x;\n            legendBounds.y = this.legend.location.y;\n            subtractThickness(rect, new Thickness(0, 0, 0, 0));\n        }\n    };\n    /**\n     * To find legend alignment for chart and accumulation chart\n     *\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     */\n    BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n        switch (alignment) {\n            case 'Far':\n                start = (size - legendSize) - start;\n                break;\n            case 'Center':\n                start = ((size - legendSize) / 2);\n                break;\n        }\n        return start;\n    };\n    /**\n     * Renders the legend.\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw, pointAnimation) {\n        var titleHeight = 0;\n        var titlePlusArrowWidth = 0;\n        var pagingLegendBounds = new Rect(0, 0, 0, 0);\n        var requireLegendBounds = new Rect(0, 0, 0, 0);\n        var xValue;\n        var yValue;\n        if (pointAnimation) {\n            xValue = getElement(this.legendID + '_element').getAttribute('x');\n            yValue = getElement(this.legendID + '_element').getAttribute('y');\n        }\n        var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n        var padding = legend.padding;\n        this.itemPadding = this.isBulletChartControl ? legend.padding : this.itemPadding;\n        var isPaging = legend.enablePages;\n        var titlePosition = legend.titlePosition;\n        var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical && ((chart.getModuleName() !== 'accumulationchart' && chart.getModuleName() !== 'chart') || this.legend.layout === 'Auto') ? this.pageButtonSize : 0;\n        var legendGroup = chart.renderer.createGroup({ id: this.legendID + '_g' });\n        var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n        this.legendRegions = [];\n        this.chartRowCount = 1;\n        var maxHeight = 0;\n        titleHeight = !this.isTitle ? 0 : (this.isTop || this.isVertical ? this.legendTitleSize.height : 0);\n        if (this.isChartControl || (this.isAccChartControl && (!this.isVertical || (legend.layout && legend.layout !== 'Auto')))) {\n            var pageCount = 1;\n            var rowHeights = this.rowHeights[0] + ((this.isVertical || (this.rowHeights.length > 1 && this.legend.itemPadding && this.chart.getModuleName() === 'chart')) ? this.itemPadding : padding);\n            for (var i = 1; i < this.rowHeights.length; i++) {\n                if ((rowHeights + this.rowHeights[i] + (((this.isVertical || (this.rowHeights.length > 1 && this.chart.getModuleName() === 'chart')) && this.legend.itemPadding) ? this.itemPadding : padding))\n                    > (this.legendBounds.height - this.pageButtonSize - this.maxItemHeight / 2) - this.legend.containerPadding.top -\n                        this.legend.containerPadding.bottom) {\n                    this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n                    pageCount++;\n                    rowHeights = 0;\n                }\n                rowHeights += (this.rowHeights[i] + ((this.isVertical || (this.rowHeights.length > 1 && this.legend.itemPadding && this.chart.getModuleName() === 'chart')) ? this.itemPadding : padding));\n            }\n            this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n            this.totalPages = pageCount;\n        }\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            if (this.legendCollections[i].text !== '') {\n                maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n                break;\n            }\n            else {\n                continue;\n            }\n        }\n        if (!this.isChartControl && !this.isAccChartControl) {\n            this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n        }\n        // For new legend navigation\n        if (!isPaging && this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n            titlePlusArrowWidth += (this.pageButtonSize + (2 * this.fivePixel));\n        }\n        else if (this.isTitle && !this.isVertical) {\n            titlePlusArrowWidth = titlePosition === ((!this.isRtlEnable) ? 'Left' : 'Right') ? (this.fivePixel + this.legendTitleSize.width) : 0;\n        }\n        if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n            this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n            this.totalPages = 1;\n        }\n        else if (firstLegend !== this.legendCollections.length) {\n            var legendSeriesGroup = void 0; // legendItem group for each series group element\n            var count = 0;\n            var previousLegend = this.legendCollections[firstLegend];\n            // starting shape center x,y position && to resolve lint error used new line for declaration\n            var startPadding = this.isBulletChartControl ? padding : titlePlusArrowWidth + padding +\n                (legend.shapeWidth / 2) + legend.containerPadding.left;\n            var xLocation = (this.isBulletChartControl && !this.isRtlEnable) ? legendBounds.x + titlePlusArrowWidth +\n                padding + (legend.shapeWidth / 2) :\n                (!this.isRtlEnable) ? legendBounds.x + startPadding : legendBounds.x + ((this.chart.getModuleName() === 'accumulationchart' && this.isVertical && legend.layout === 'Auto' && !(legend.maximumColumns > 0)) ? this.maxWidth : legendBounds.width) - startPadding;\n            var start = new ChartLocation(xLocation, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) :\n                legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) + legend.containerPadding.top);\n            var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n            var textOptions = new TextOption('', start.x, start.y, anchor);\n            var textPadding = legend.shapePadding + this.itemPadding + legend.shapeWidth;\n            //  initialization for totalPages legend click totalpage again calculate\n            this.totalPages = this.totalPages = (this.isAccChartControl || this.isChartControl || this.isBulletChartControl ||\n                this.isStockChartControl) ? this.totalPages : 0;\n            this.pageXCollections = [];\n            this.legendCollections[firstLegend].location = start;\n            var legendIndex = void 0;\n            if (!legend.enablePages && this.isPaging) {\n                var x = start.x - this.fivePixel;\n                var y = start.y - this.fivePixel;\n                var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                var bottomSapce = this.isVertical ? (this.pageButtonSize) + Math.abs(y - legendBounds.y) : 0;\n                var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                rightSpace += this.isVertical ? 0 : (this.fivePixel + this.pageButtonSize + this.fivePixel);\n                pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n                requireLegendBounds = pagingLegendBounds;\n            }\n            else {\n                requireLegendBounds = legendBounds;\n            }\n            var legendOption = void 0;\n            for (var i = 0; i < this.legendCollections.length; i++) {\n                legendOption = this.legendCollections[i];\n                legendIndex = !this.isReverse ? count : (this.legendCollections.length - 1) - count;\n                if (this.chart.getModuleName() === 'accumulationchart') {\n                    legendOption.fill = (this.chart || this.chart || this.chart ||\n                        this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n                }\n                if (this.chart.getModuleName() === 'stockChart') {\n                    legendOption.type = this.chart.visibleSeries[count].type;\n                }\n                this.accessbilityText = (this.isBulletChartControl) ? 'Legend of bullet chart' + '' + legendOption.text\n                    : 'Click to show or hide the ' + legendOption.text + ' series';\n                if (legendOption.render && legendOption.text && legendOption.text !== '') {\n                    legendSeriesGroup = chart.renderer.createGroup({\n                        id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n                    });\n                    if (legendSeriesGroup && (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'accumulationchart')) {\n                        legendSeriesGroup.setAttribute('tabindex', (i === 0 && legend.accessibility.focusable) ? String(legend.accessibility.tabIndex) : '');\n                        legendSeriesGroup.style.outline = 'none';\n                        legendSeriesGroup.setAttribute('aria-label', legend.accessibility.accessibilityDescription ? legend.accessibility.accessibilityDescription : (legendOption.text + ' series is ' + (legendOption.visible ? 'showing, press enter to hide the ' : 'hidden, press enter to show the ') + legendOption.text + ' series'));\n                        legendSeriesGroup.setAttribute('role', legend.accessibility.accessibilityRole ? legend.accessibility.accessibilityRole : 'button');\n                        legendSeriesGroup.setAttribute('aria-pressed', legendOption.visible ? 'true' : 'false');\n                    }\n                    else if (legendSeriesGroup) {\n                        legendSeriesGroup.setAttribute('tabindex', i === 0 ? '0' : '');\n                        legendSeriesGroup.style.outline = 'none';\n                        legendSeriesGroup.setAttribute('aria-label', legend.description || (legendOption.text + ' series is ' + (legendOption.visible ? 'showing, press enter to hide the ' : 'hidden, press enter to show the ') + legendOption.text + ' series'));\n                        legendSeriesGroup.setAttribute('role', 'button');\n                        legendSeriesGroup.setAttribute('aria-pressed', legendOption.visible ? 'true' : 'false');\n                    }\n                    this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n                    this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n                    this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.style.cssText =\n                            'pointer-events: bounding-box; cursor: ' + ((!legend.toggleVisibility && (chart.selectionMode === 'None' ||\n                                chart.highlightMode === 'None' ||\n                                chart.selectionMode === 'None') || this.isBulletChartControl) ? 'auto' : 'pointer');\n                    }\n                    if (legendTranslateGroup) {\n                        legendTranslateGroup.appendChild(legendSeriesGroup);\n                    }\n                    previousLegend = legendOption;\n                }\n                count++;\n            }\n            this.totalPages = (this.isPaging && !this.isBulletChartControl && !this.legend.enablePages && !this.isVertical &&\n                this.totalPages > this.chartRowCount) ? this.chartRowCount : this.totalPages;\n            this.currentPage = this.currentPage > 1 && this.currentPage > this.totalPages ? this.totalPages : this.currentPage;\n            if (this.isPaging && this.totalPages > 1) {\n                this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n            }\n            else {\n                this.totalPages = 1;\n            }\n        }\n        if (pointAnimation) {\n            var translateX = \"translate(\" + (this.rowCount > 1 ? 0 : Math.round(Number(xValue)) - Math.round(this.legendBounds.x)) + \" \\n              + ',' + \" + (Math.round(Number(yValue)) - Math.round(this.legendBounds.y)) + \")\";\n            var translateY = \"translate(\" + (Math.round(Number(xValue)) - Math.round(this.legendBounds.x)) + \", \" + (Math.round(Number(yValue)) - Math.round(this.legendBounds.y)) + \")\";\n            appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw, true, 'x', 'y', undefined, undefined, undefined, undefined, undefined, chart.duration, undefined, undefined, new ChartLocation(0, 0), this.position === 'Top' || this.position === 'Bottom' ? translateX : translateY);\n        }\n        else {\n            appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n        }\n    };\n    /**\n     * To get linear legend.\n     *\n     * @param {Rect} legendBounds - The bounds of the legend.\n     * @param {Chart | AccumulationChart | BulletChart | StockChart | Chart3D | CircularChart3D} chart - The chart instance.\n     * @param {LegendSettingsModel} legend - The legend settings.\n     * @param {Element} legendTranslateGroup - The group element to translate the legend.\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n        var xmlns = 'http://www.w3.org/2000/svg';\n        var previousLegend = this.legendCollections[0];\n        var nextLegend = this.legendCollections[1];\n        var defElement = this.chart.renderer.createDefs();\n        var gradientLegendCount = 0;\n        var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n        var opacity = 1;\n        var fillColors = [];\n        var numberItems = [];\n        if (legend.title) {\n            if (!this.isVertical) {\n                if (legend.titlePosition === 'Left') {\n                    legendBounds.x += this.legendTitleSize.width;\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Right') {\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Top') {\n                    legendBounds.y += this.legendTitleSize.height;\n                    legendBounds.height -= this.legendTitleSize.height;\n                }\n            }\n            else {\n                legendBounds.y += this.legendTitleSize.height;\n                legendBounds.height -= this.legendTitleSize.height;\n            }\n        }\n        for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n            var colorMap = _a[_i];\n            if (numberItems.indexOf(colorMap.start) < 0) {\n                numberItems.push(colorMap.start);\n            }\n            if (colorMap.colors.length > 2) {\n                var diffValue = (colorMap.end - colorMap.start);\n                var colorsLength = colorMap.colors.length - 1;\n                if (diffValue > 0) {\n                    diffValue = diffValue / colorsLength;\n                    for (var index = 1; index < colorsLength; index++) {\n                        var calculatedValue = colorMap.start + (diffValue * index);\n                        numberItems.push(calculatedValue);\n                    }\n                }\n                else {\n                    for (var index = 1; index < colorsLength; index++) {\n                        numberItems.push(colorMap.start);\n                    }\n                }\n            }\n            if (numberItems.indexOf(colorMap.end) < 0) {\n                numberItems.push(colorMap.end);\n            }\n            for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n                var fillColor = _c[_b];\n                if (fillColors.indexOf(fillColor) < 0) {\n                    fillColors.push(fillColor);\n                }\n            }\n            if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n                fillColors.push(colorMap.colors[0]);\n            }\n        }\n        var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n        var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n        var y2 = this.isVertical ? '100%' : '0%';\n        linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n        linerGradientEle.setAttribute('x1', x1);\n        linerGradientEle.setAttribute('y1', '0%');\n        linerGradientEle.setAttribute('x2', x2);\n        linerGradientEle.setAttribute('y2', y2);\n        var full = numberItems[numberItems.length - 1] - numberItems[0];\n        for (var b = 0; b < fillColors.length; b++) {\n            var offsetValue = numberItems[b] - numberItems[0];\n            offsetValue = offsetValue / full;\n            var stopEle = document.createElementNS(xmlns, 'stop');\n            stopEle.setAttribute('offset', offsetValue.toString());\n            stopEle.setAttribute('stop-color', fillColors[b]);\n            stopEle.setAttribute('stop-opacity', opacity.toString());\n            linerGradientEle.appendChild(stopEle);\n        }\n        var startLabel = previousLegend.text.toString();\n        var endLabel = nextLegend.text.toString();\n        var startTextSize = measureText(startLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var endTextSize = measureText(endLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n        var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n        var otherSpaces = (2 * textWidth) + (4 * legend.padding);\n        var linearBarWidth = legendBounds.width;\n        var linearBarHeight = legendBounds.height;\n        var xValue = legendBounds.x + textWidth + (2 * legend.padding);\n        var yValue = legendBounds.y + legend.padding;\n        var startLabelY;\n        var endLabelY;\n        var startLabelX;\n        var endLabelX;\n        if (this.isVertical) {\n            otherSpaces = (2 * textHeight) + (4 * legend.padding);\n            linearBarWidth = legendBounds.width - (2 * legend.padding);\n            linearBarHeight = legendBounds.height - otherSpaces;\n            xValue = legendBounds.x + legend.padding;\n            yValue = legendBounds.y + textHeight + (2 * legend.padding);\n            startLabelY = legendBounds.y + legend.padding + textHeight;\n            endLabelY = yValue + linearBarHeight + textHeight;\n            startLabelX = (legendBounds.x + (legendBounds.width * 0.5)) - (textWidth * 0.5);\n            endLabelX = startLabelX;\n            if (linearBarWidth > 30) {\n                var diffWidth = linearBarWidth - 30;\n                linearBarWidth = 30;\n                xValue = xValue + (diffWidth / 2);\n            }\n        }\n        else {\n            linearBarWidth = legendBounds.width - otherSpaces;\n            linearBarHeight = legendBounds.height - (2 * legend.padding);\n            startLabelX = legendBounds.x + ((!this.isRtlEnable) ? legend.padding + (textWidth - startTextSize.width) :\n                linearBarWidth + (3 * legend.padding) + textWidth);\n            endLabelX = legendBounds.x + ((!this.isRtlEnable) ? linearBarWidth + (3 * legend.padding) + textWidth :\n                legend.padding + (textWidth - endTextSize.width));\n            startLabelY = legendBounds.y + (legendBounds.height * 0.5) + (textHeight * 0.25);\n            endLabelY = startLabelY;\n            if (linearBarHeight > 30) {\n                var diffHeight = linearBarHeight - 30;\n                linearBarHeight = 30;\n                yValue = yValue + (diffHeight / 2);\n            }\n        }\n        var anchor = chart.enableRtl ? 'end' : '';\n        var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n        var hiddenColor = '#D3D3D3';\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n        var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) :\n            null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) :\n            null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        var gradientLegend = chart.renderer.drawRectangle({\n            width: linearBarWidth,\n            height: linearBarHeight,\n            x: xValue,\n            y: yValue,\n            fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n        });\n        defElement.appendChild(linerGradientEle);\n        legendTranslateGroup.appendChild(defElement);\n        legendTranslateGroup.appendChild(gradientLegend);\n    };\n    /**\n     * To find first valid legend text index for chart and accumulation chart\n     *\n     * @param legendCollection\n     * @returns {number}\n     * @private\n     */\n    BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n        var count = 0;\n        for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n            var legend = legendCollection_1[_i];\n            if (legend.render && legend.text && legend.text !== '') {\n                break;\n            }\n            count++;\n        }\n        return count;\n    };\n    /**\n     * To get the legend title text width and height.\n     *\n     * @param legend\n     * @param legendBounds\n     */\n    BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n        if (legend.title) {\n            this.isTop = legend.titlePosition === 'Top';\n            var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n            if (this.isTop || this.isVertical) {\n                this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, (legendBounds.width - padding), this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n            }\n            else {\n                this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle, this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n            }\n            var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n            this.legendTitleSize = measureText(text, legend.titleStyle, this.chart.themeStyle.legendTitleFont);\n            this.legendTitleSize.height *= this.legendTitleCollections.length;\n        }\n        else {\n            this.legendTitleSize = new Size(0, 0);\n        }\n    };\n    /**\n     * Render the legend title\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n        var padding = legend.padding;\n        var alignment = legend.titleStyle.textAlignment;\n        this.isTop = legend.titlePosition === 'Top';\n        var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n        var x = titlePositionX(legendBounds, legend.titleStyle);\n        anchor = this.isTop || this.isVertical ? anchor : (chart.enableRtl) ? 'end' : '';\n        x = alignment === 'Near' ? (x + padding) : alignment === 'Far' ? (x - padding) : x;\n        x = (this.isTop || this.isVertical) ? x : ((legendBounds.x) + (legend.titlePosition === 'Left' ? 5 :\n            (legendBounds.width - this.legendTitleSize.width - 5)));\n        var topPadding = (legendBounds.height / 2) + (this.legendTitleSize.height / 4);\n        var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding :\n            (this.legendTitleSize.height / this.legendTitleCollections.length));\n        var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n        textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color ||\n            this.chart.themeStyle.legendTitleFont.color, legendGroup, null, null, null, null, null, null, null, null, null, null, this.chart.themeStyle.legendTitleFont);\n    };\n    /**\n     * To create legend rendering elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendBounds\n     * @param legendGroup\n     * @param legend\n     * @param id\n     * @param redraw\n     */\n    BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n        var padding = legend.padding;\n        var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds, 0, 0, '', this.legend.border.dashArray);\n        var legendItemsGroup = chart.renderer.createGroup({ id: id + '_collections' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var clippath = chart.renderer.createClipPath({ id: id + '_clipPath' });\n        options.width = (this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical && legend.layout === 'Auto' && !(legend.maximumColumns > 0)) ? this.maxWidth : legendBounds.width;\n        if (legendGroup) {\n            legendGroup.appendChild(chart.renderer.drawRectangle(options));\n        }\n        else {\n            chart.renderer.drawRectangle(options);\n        }\n        if (legend.title) {\n            this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n        }\n        if (!isCanvas) {\n            legendGroup.appendChild(legendItemsGroup);\n        }\n        this.legendTranslateGroup = chart.renderer.createGroup({ id: id + '_translate_g' });\n        if (!isCanvas) {\n            legendItemsGroup.appendChild(this.legendTranslateGroup);\n        }\n        options.y += (this.isTop ? this.legendTitleSize.height : 0) + (!this.isBulletChartControl ? legend.containerPadding.top : 0);\n        options.height -= (this.isTop && (this.isChartControl || !this.isVertical || legend.layout !== 'Auto') ? this.legendTitleSize.height : 0) + (this.isBulletChartControl ? 0 : legend.containerPadding.top);\n        options.id += '_clipPath_rect';\n        options.width = ((!this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl && !(chart.getModuleName() === 'accumulationchart' && (legend.layout !== 'Auto' || legend.maximumColumns > 0))) && this.isVertical) ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right\n            : legendBounds.width;\n        if (!isCanvas) {\n            this.clipRect = chart.renderer.drawRectangle(options);\n            clippath.appendChild(this.clipRect);\n        }\n        else {\n            this.pagingClipRect = options;\n        }\n        appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n        if (!isCanvas) {\n            legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n        }\n        return this.legendTranslateGroup;\n    };\n    /**\n     * To render legend symbols for chart and accumulation chart\n     *\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     */\n    BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n        var control = this.isBulletChartControl ? this.chart : null;\n        var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n        var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (((legendOption.shape === 'SeriesType') &&\n            (legendOption.type.toLowerCase().indexOf('line') > -1) && (legendOption.type.toLowerCase().indexOf('area') === -1)) ||\n            ((legendOption.shape === 'HorizontalLine') || (legendOption.shape === 'VerticalLine') || (legendOption.shape === 'Cross')));\n        var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') &&\n            (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var borderColor;\n        var shape = (legendOption.shape === 'SeriesType') ? legendOption.type : legendOption.shape;\n        var strokewidth = isStrokeWidth ? (this.legend.mode === 'Series' ?\n            this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width) :\n            (this.isBulletChartControl && legendOption.shape === 'Multiply') ? 4 : 1;\n        var regionPadding;\n        shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n        if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n            var series = this.chart.visibleSeries[legendIndex];\n            var seriesBorder = series.border;\n            var isLineShapemarker = shape === 'HorizontalLine' || shape === 'VerticalLine';\n            borderColor = isLineShapemarker ? symbolColor : seriesBorder.color ? seriesBorder.color : symbolColor;\n            strokewidth = isLineShapemarker ? series.width : seriesBorder.width ? seriesBorder.width : 1;\n        }\n        var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, (isCustomBorder ? borderColor : symbolColor), this.legend.opacity, legendOption.dashArray, '');\n        var textSize = measureText(legendOption.text, this.legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding\n            : legendOption.location.x;\n        var y = legendOption.location.y;\n        if (!isCanvas) {\n            group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n        }\n        else {\n            regionPadding = -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber);\n            drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n            this.legendRegions.push({\n                rect: new Rect(legendOption.location.x - this.legend.shapeWidth, legendOption.location.y, this.legend.shapeWidth + this.legend.shapePadding, this.legend.shapeHeight + regionPadding),\n                index: legendIndex\n            });\n        }\n        if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' ||\n            (legendOption.type === 'Doughnut' && shape === 'Doughnut')) {\n            symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n            shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n            symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n            if (!isCanvas) {\n                group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n            }\n            else {\n                drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ?\n                    new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n            }\n        }\n    };\n    /**\n     * To render legend text for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     */\n    BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n        var legend = chart.legendSettings;\n        var hiddenColor = '#D3D3D3';\n        var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n        textOptions.text = legendOption.textCollection.length > 0 ? legendOption.textCollection : legendOption.text;\n        if (legend.isInversed && !this.isRtlEnable) {\n            textOptions.x = legendOption.location.x - (legend.shapeWidth / 2);\n        }\n        else if (this.isRtlEnable) {\n            var textWidth = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont).width;\n            textOptions.x = this.chart.getModuleName() === 'bulletChart' ? legendOption.location.x - legend.shapeWidth : legendOption.location.x - ((legendOption.textCollection.length > 1 ? textWidth / legendOption.textCollection.length : textWidth) + legend.shapeWidth / 2 + legend.shapePadding);\n        }\n        else {\n            textOptions.x = legendOption.location.x + (legend.shapeWidth / 2) + legend.shapePadding;\n        }\n        textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) :\n            null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        if (isCanvas) {\n            var textSize = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n            var region = void 0;\n            for (var j = 0; j < this.legendRegions.length; j++) {\n                if (this.legendRegions[j].index === i) {\n                    region = this.legendRegions[j];\n                    break;\n                }\n            }\n            region.rect.y = textOptions.y < region.rect.y ? textOptions.y : region.rect.y;\n            region.rect.width += textSize.width;\n            region.rect.height = textSize.height;\n            region.rect.y -= textSize.height * 0.5;\n            region.rect.x -= (this.isRtlEnable) ? region.rect.width : 0;\n        }\n    };\n    /**\n     * To render legend paging elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n        var paginggroup = chart.renderer.createGroup({ id: this.legendID + '_navigation' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n        var grayColor = (this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1) ? '#FFFFFF' : '#545454';\n        var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n        var padding = 8; // const padding for paging elements\n        var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n        var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n        var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n        var iconSize = chart.availableSize.width < 110 || chart.availableSize.height < 190 ? 4 : this.pageButtonSize;\n        var legendFontSize = (extend({}, getValue('properties', legend.textStyle), null, true));\n        legendFontSize.size = (chart.availableSize.width < 110 || chart.availableSize.height < 190 && !this.isBulletChartControl && this.chart.getModuleName() === 'accumulationchart') ? '8px' : legend.textStyle.size;\n        // Page left arrow drawing calculation started here\n        var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 :\n            (this.rowCount - 1);\n        var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n        this.pagingRegions = [];\n        this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n        this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n        if (!isCanvas) {\n            legendGroup.appendChild(paginggroup);\n        }\n        if (!this.isChartControl && !this.isAccChartControl) {\n            if (this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n                this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n            }\n            else {\n                this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n            }\n        }\n        if (paginggroup) {\n            paginggroup.style.cursor = 'pointer';\n        }\n        if ((this.isChartControl || this.isAccChartControl) && !(!legend.enablePages && this.isPaging)) {\n            this.clipPathHeight = this.pageHeights[0] - (this.isTitle && this.isTop && (this.isChartControl || !this.isVertical || legend.layout !== 'Auto') ? this.legendTitleSize.height : 0) -\n                legend.containerPadding.top - legend.containerPadding.bottom;\n        }\n        else {\n            this.clipPathHeight = (rowCount * (this.maxItemHeight + legend.padding));\n        }\n        //this.clipPathHeight = !(this.isChartControl) ? (rowCount * (this.maxItemHeight + legend.padding)) : this.columnHeights[0];\n        if (!isCanvas) {\n            this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n        }\n        else {\n            //paging clipRect only for canvas mode\n            this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight -\n                (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n            this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n            this.pagingClipRect.x += legend.border.width;\n            this.pagingClipRect.width -= (legend.border.width + legend.border.width / 2);\n            this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n        }\n        var pageTextElement;\n        var x = (bounds.x + iconSize / 2);\n        var y = bounds.y + this.clipPathHeight + ((titleHeight + bounds.height - this.clipPathHeight) / 2);\n        if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n            x = (bounds.x + this.pageButtonSize + titleWidth);\n            y = legend.title && this.isTop ? (bounds.y + padding + titleHeight + (iconSize / 1) + 0.5) :\n                (bounds.y + padding + iconSize + 0.5);\n        }\n        var size = measureText(this.totalPages + '/' + this.totalPages, legendFontSize, this.chart.themeStyle.legendLabelFont);\n        var translateX = (this.isRtlEnable) ? legend.border.width + (iconSize / 2) :\n            bounds.width - (2 * (iconSize + padding) + padding + size.width);\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + (iconSize / 2) + (padding / 2) + titleHeight;\n                symbolOption.opacity = this.backwardArrowOpacity;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n            }\n            else {\n                symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity :\n                    (legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width -\n            (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n        // Page numbering rendering calculation started here\n        textOption.x = x + (iconSize / 2) + padding;\n        textOption.y = y + (size.height / 4);\n        textOption.id = this.legendID + '_pagenumber';\n        textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n        var color = (this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1) ? '#FFFFFF' : legend.textStyle.color || this.chart.theme === 'Tailwind3' ? '#111827' : this.chart.theme === 'Tailwind3Dark' ? '#FFFFFF' : this.chart.themeStyle.legendLabelFont.color;\n        if (isCanvas && this.totalNoOfPages) {\n            textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            pageTextElement = textElement(chart.renderer, textOption, legendFontSize, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0), null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        }\n        // Page right arrow rendering calculation started here\n        x = textOption.x + padding + (iconSize / 2) + size.width;\n        if (this.isPaging && !legend.enablePages && !this.isBulletChartControl && !this.isVertical) {\n            x = (bounds.x + bounds.width - (this.isBulletChartControl ? this.fivePixel : 0) - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ?\n                this.legendTitleSize.width + this.fivePixel : 0));\n        }\n        symbolOption.id = pageDown;\n        symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + bounds.height - (iconSize / 2);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n            }\n            else {\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width -\n            (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n        if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            //placing the navigation buttons and page numbering in legend right corner\n            paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n        }\n        else {\n            if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n                this.totalNoOfPages = this.totalPages;\n                this.calTotalPage = false;\n            }\n            if (!legend.enablePages && !this.isBulletChartControl) { // For new legend page navigation\n                this.translatePage(isCanvas, null, this.currentPage - 1, this.currentPage, legend);\n            }\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            this.translatePage(isCanvas, pageTextElement, this.currentPage - 1, this.currentPage, legend);\n        }\n    };\n    BaseLegend.prototype.getPageHeight = function (pageHeights, pageCount) {\n        var sum = 0;\n        for (var i = 0; i < pageCount; i++) {\n            sum += pageHeights[i] - ((this.isTitle && this.isTop) ? this.legendTitleSize.height : 0);\n        }\n        return sum;\n    };\n    /**\n     * To translate legend pages for chart and accumulation chart\n     *\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     */\n    BaseLegend.prototype.translatePage = function (isCanvas, pagingText, page, pageNumber, legend) {\n        var size = (this.isChartControl || this.isAccChartControl) ?\n            (page ? this.getPageHeight(this.pageHeights, page) : 0) : ((this.clipPathHeight) * page);\n        if (!isCanvas && (this.isChartControl || this.isAccChartControl)) {\n            this.clipRect.setAttribute('height', (this.pageHeights[page] - (this.isTitle && this.isTop && (this.isChartControl || !this.isVertical || legend.layout !== 'Auto') ? this.legendTitleSize.height : 0) - legend.containerPadding.top - legend.containerPadding.bottom).toString());\n            if (this.isAccChartControl && this.isPaging && !legend.enablePages && this.isVertical && (this.chart.getModuleName() !== 'accumulationchart' || legend.layout === 'Auto')) {\n                this.clipRect.setAttribute('height', this.legendBounds.height.toString());\n            }\n        }\n        var translate = 'translate(0,-' + size + ')';\n        if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && !(this.chart.getModuleName() === 'accumulationchart' && legend.layout !== 'Auto') && this.isVertical) {\n            var pageX = this.pageXCollections[page * this.maxColumns];\n            size = (!this.isRtlEnable) ? pageX - this.legendBounds.x : (this.legendBounds.x + this.maxWidth) - pageX;\n            size = size < 0 ? 0 : size; // to avoid small pixel variation\n            translate = ((!this.isRtlEnable) ? 'translate(-' : 'translate(') + size + ',0)';\n        }\n        if (!this.chart.enableCanvas) {\n            this.legendTranslateGroup.setAttribute('transform', translate);\n        }\n        if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            pagingText.textContent = (pageNumber) + '/' + this.totalPages;\n        }\n        this.currentPage = pageNumber;\n        return size;\n    };\n    /**\n     * To change legend pages for chart and accumulation chart\n     *\n     * @param event\n     * @param pageUp\n     * @param event\n     * @param pageUp\n     */\n    BaseLegend.prototype.changePage = function (event, pageUp) {\n        var legend = this.chart.legendSettings;\n        var backwardArrow = document.getElementById(this.legendID + '_pageup');\n        var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var pageText = (legend.enablePages || this.isBulletChartControl) ?\n            document.getElementById(this.legendID + '_pagenumber') : null;\n        var page = (legend.enablePages || this.isBulletChartControl) ? parseInt(pageText.textContent.split('/')[0], 10) :\n            this.currentPage;\n        if (pageUp && page > 1) {\n            this.translatePage(isCanvas, pageText, (page - 2), (page - 1), legend);\n        }\n        else if (!pageUp && page < this.totalPages) {\n            this.translatePage(isCanvas, pageText, page, (page + 1), legend);\n        }\n        if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            if (this.currentPage === this.totalPages) {\n                this.hideArrow(forwardArrow);\n            }\n            else {\n                this.showArrow(forwardArrow);\n            }\n            if (this.currentPage === 1) {\n                this.hideArrow(backwardArrow);\n            }\n            else {\n                this.showArrow(backwardArrow);\n            }\n            // this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n            // this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n        }\n    };\n    /**\n     * To hide the backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.hideArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '0');\n    };\n    /**\n     * To show the  backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.showArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '1');\n    };\n    /**\n     * To find legend elements id based on chart or accumulation chart\n     *\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @private\n     */\n    BaseLegend.prototype.generateId = function (option, prefix, count) {\n        if (this.isChartControl || this.isStockChartControl) {\n            return prefix + count;\n        }\n        else {\n            return prefix + option.pointIndex;\n        }\n    };\n    /**\n     * To show or hide trimmed text tooltip for legend.\n     *\n     * @param event\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.move = function (event) {\n        var _this = this;\n        var x = this.chart.mouseX;\n        var y = this.chart.mouseY;\n        if (event.target.textContent.indexOf('...') > -1) {\n            var targetId = event.target.id.split(this.legendID + '_text_');\n            if (targetId.length === 2) {\n                var index = parseInt(targetId[1], 10);\n                var element = this.chart.element;\n                if (!isNaN(index)) {\n                    if (this.chart.isTouch) {\n                        removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n                    }\n                    if (this.isChartControl) {\n                        showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                    else {\n                        showTooltip((this.chart.getModuleName() === 'accumulationchart' ? this.legendCollections[index].originalText :\n                            this.chart.visibleSeries[0].points[index].x.toString()), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                }\n            }\n        }\n        else {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n        }\n        if (this.chart.isTouch) {\n            clearTimeout(this.clearTooltip);\n            this.clearTooltip = +setTimeout(function () { removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip'); }, 1000);\n        }\n    };\n    return BaseLegend;\n}());\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */ (function () {\n    function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex, dashArray, originalText) {\n        this.location = { x: 0, y: 0 };\n        this.textCollection = [];\n        this.text = text;\n        this.fill = fill;\n        this.shape = shape;\n        this.url = url;\n        this.visible = visible;\n        this.type = type;\n        this.markerVisibility = markerVisibility;\n        this.markerShape = markerShape;\n        this.pointIndex = pointIndex;\n        this.seriesIndex = seriesIndex;\n        this.dashArray = dashArray;\n        this.originalText = originalText;\n    }\n    return LegendOptions;\n}());\nexport { LegendOptions };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}