{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * AccumulationChart legend\n */\nimport { Browser, isNullOrUndefined, Animation } from '@syncfusion/ej2-base';\nimport { pointByIndex } from '../model/acc-base';\nimport { BaseLegend, LegendOptions } from '../../common/legend/legend';\nimport { Rect, measureText } from '@syncfusion/ej2-svg-base';\nimport { textTrim, getElement, blazorTemplatesReset } from '../../common/utils/helper';\nimport { textWrap } from '../../common/utils/helper';\nimport { legendClick } from '../../common/model/constants';\n/**\n * The `AccumulationLegend` module is used to render the `Legend` for the Accumulation chart.\n */\nvar AccumulationLegend = /** @class */function (_super) {\n  __extends(AccumulationLegend, _super);\n  /**\n   * Constructor for Accumulation Legend.\n   *\n   * @param {AccumulationChart} chart Get a chart as a parameter.\n   */\n  function AccumulationLegend(chart) {\n    var _this = _super.call(this, chart) || this;\n    _this.library = _this;\n    _this.titleRect = new Rect(0, chart.margin.top, 0, 0);\n    _this.addEventListener();\n    return _this;\n  }\n  /**\n   * Binding events for legend module.\n   *\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n    this.chart.on('click', this.click, this);\n  };\n  /**\n   * UnBinding events for legend module.\n   *\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.removeEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n    this.chart.off('click', this.click);\n    this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n  };\n  /**\n   * To handle mosue move for legend module.\n   *\n   * @param {MouseEvent} e - The mouse move event for legend module.\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.mouseMove = function (e) {\n    if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n      if (this.chart.accumulationHighlightModule && this.chart.highlightMode !== 'None') {\n        if (!this.chart.legendSettings.toggleVisibility) {\n          this.click(e);\n        }\n        var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_', this.legendID + '_shape_', this.legendID + '_g_'];\n        var targetId = e.target.id;\n        var index = void 0;\n        for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n          var id = legendItemsId_1[_i];\n          if (targetId.indexOf(id) > -1) {\n            index = parseInt(targetId.split(id)[1], 10);\n            this.chart.accumulationHighlightModule.legendSelection(this.chart, 0, index, e.target, e.type);\n            break;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * To handle mosue end for legend module.\n   *\n   * @param {MouseEvent} e - The mouse end event for legend module.\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.mouseEnd = function (e) {\n    if (this.chart.legendSettings.visible && this.chart.isTouch) {\n      this.move(e);\n    }\n  };\n  /**\n   * Get the legend options.\n   *\n   * @param {AccumulationChart} chart - The accumulation chart control.\n   * @param {AccumulationSeries[]} series - The array of series in the accumulation chart.\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.getLegendOptions = function (chart, series) {\n    this.legendCollections = [];\n    this.isRtlEnable = chart.enableRtl;\n    this.isReverse = !this.isRtlEnable && chart.legendSettings.reverse;\n    for (var i = 0; i < 1; i++) {\n      var seriesType = series[i].type;\n      if (seriesType === 'Pie' || seriesType === 'Doughnut') {\n        seriesType = series[i].innerRadius !== '0' && series[i].innerRadius !== '0%' ? 'Doughnut' : 'Pie';\n      }\n      for (var _i = 0, _a = series[i].points; _i < _a.length; _i++) {\n        var point = _a[_i];\n        if (!isNullOrUndefined(point.x) && !isNullOrUndefined(point.y)) {\n          this.legendCollections.push(new LegendOptions(chart.useGroupingSeparator && typeof point.x === 'number' ? chart.intl.formatNumber(point.x, {\n            useGrouping: true\n          }) : point.x.toString(), point.color, series[i].legendShape, point.visible, seriesType, point.legendImageUrl, null, null, point.index, series[i].index, null, point.x.toString()));\n        }\n      }\n      if (this.isReverse) {\n        this.legendCollections.reverse();\n      }\n    }\n  };\n  /**\n   * To find legend bounds for accumulation chart.\n   *\n   * @param {Size} availableSize - The available size for the legend.\n   * @param {Rect} legendBounds - The boundary of the legend.\n   * @param {LegendSettingsModel} legend - The legend settings.\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n    this.calculateLegendTitle(legend, legendBounds);\n    this.isTitle = legend.title ? true : false;\n    var extraWidth = 0;\n    var extraHeight = 0;\n    var legendOption;\n    this.chartRowCount = 1;\n    this.rowHeights = [];\n    this.columnHeights = [];\n    this.pageHeights = [];\n    var padding = legend.padding;\n    var titlePosition = legend.titlePosition;\n    var titlePlusArrowSpace = 0;\n    var arrowWidth = this.arrowWidth;\n    var arrowHeight = legend.enablePages ? 0 : this.arrowHeight;\n    if (!this.isVertical) {\n      extraHeight = !legend.height ? availableSize.height / 100 * 5 : 0;\n    } else {\n      extraWidth = !legend.width ? availableSize.width / 100 * 5 : 0;\n    }\n    legendBounds.width += extraWidth;\n    legendBounds.height += extraHeight;\n    var shapePadding = legend.shapePadding;\n    var maximumWidth = legend.maximumLabelWidth ? legend.maximumLabelWidth : 0;\n    var shapeWidth = legend.shapeWidth;\n    var rowWidth = 0;\n    var columnCount = 0;\n    var rowCount = 0;\n    var columnWidth = [];\n    var pageWidth = [];\n    var pageRowWidth = 0;\n    var previousRowCount = 0;\n    var columnHeight = 0;\n    var legendWidth = 0;\n    var titleHeight = 0;\n    this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle, this.chart.themeStyle.legendLabelFont).height, legend.shapeHeight);\n    var legendEventArgs;\n    var render = false;\n    var maxColumn = legend.layout === 'Auto' && legend.maximumColumns > 0;\n    if (legend.fixedWidth) {\n      for (var i = 0; i < this.legendCollections.length; i++) {\n        var textWidth = shapeWidth + shapePadding + (!this.isVertical ? i === 0 ? padding : this.itemPadding : padding) + (legend.maximumLabelWidth ? legend.maximumLabelWidth : measureText(this.legendCollections[i].text, legend.textStyle, this.chart.themeStyle.legendLabelFont).width);\n        this.maxColumnWidth = this.maxColumnWidth > textWidth ? this.maxColumnWidth : textWidth;\n      }\n    }\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      legendOption = this.legendCollections[i];\n      legendEventArgs = {\n        fill: legendOption.fill,\n        text: legendOption.text,\n        shape: legendOption.shape,\n        name: 'legendRender',\n        cancel: false\n      };\n      this.chart.trigger('legendRender', legendEventArgs);\n      legendOption.render = !legendEventArgs.cancel;\n      legendOption.text = legendOption.originalText = legendEventArgs.text.indexOf('&') > -1 ? this.convertHtmlEntities(legendEventArgs.text) : legendEventArgs.text;\n      legendOption.fill = legendEventArgs.fill;\n      legendOption.shape = legendEventArgs.shape;\n      legendOption.textSize = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n      if (legendOption.render && legendOption.text !== '') {\n        render = true;\n        legendWidth = legend.fixedWidth ? this.maxColumnWidth : shapeWidth + shapePadding + (legend.maximumLabelWidth ? legend.maximumLabelWidth : legendOption.textSize.width) + (!this.isVertical || legend.layout === 'Horizontal' ? i === 0 || columnCount === 1 && rowCount > 0 && legend.layout === 'Horizontal' ? padding : this.itemPadding : padding);\n        this.getLegendHeight(legendOption, legend, legendBounds, rowWidth, this.maxItemHeight, padding);\n        if (this.isVertical && legend.layout === 'Auto' && !maxColumn) {\n          columnHeight += Math.max(legendOption.textSize.height, legend.shapeHeight) + (i === 0 ? padding : this.itemPadding);\n          if (columnHeight + this.itemPadding + arrowHeight / this.pageButtonSize > legendBounds.height) {\n            //columnHeight = Math.max(columnHeight, (rowCount * (this.maxItemHeight + padding)) + padding + arrowHeight);\n            rowWidth = rowWidth + maximumWidth;\n            pageRowWidth = this.getPageWidth(pageWidth);\n            this.totalPages = Math.max(rowCount, this.totalPages || 1);\n            if (rowWidth - pageRowWidth + legendWidth > legendBounds.width) {\n              pageWidth.push(rowWidth - pageRowWidth);\n              rowCount = this.rowHeights.length;\n              previousRowCount = rowCount;\n            } else {\n              rowCount = previousRowCount;\n            }\n            columnWidth.push(maximumWidth);\n            maximumWidth = 0;\n            columnHeight = Math.max(legendOption.textSize.height, legend.shapeHeight) + padding;\n            columnCount++;\n          }\n          this.columnHeights[columnCount] = (this.columnHeights[columnCount] ? this.columnHeights[columnCount] : 0) + Math.max(legendOption.textSize.height, legend.shapeHeight) + (i === 0 ? padding : this.itemPadding);\n          maximumWidth = Math.max(legendWidth, maximumWidth);\n          this.rowHeights[rowCount] = Math.max(this.rowHeights[rowCount] ? this.rowHeights[rowCount] : 0, Math.max(legendOption.textSize.height, legend.shapeHeight));\n          rowCount++;\n        } else {\n          if (!legend.enablePages) {\n            // For new legend navigation support\n            titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n            titlePlusArrowSpace += arrowWidth;\n          }\n          rowWidth = rowWidth + legendWidth;\n          if (maxColumn ? legend.maximumColumns === columnCount : legendBounds.width < padding + rowWidth + titlePlusArrowSpace || this.legend.layout === 'Vertical' && columnCount === 1) {\n            maximumWidth = Math.max(maximumWidth, rowWidth + padding + titlePlusArrowSpace - legendWidth);\n            if (rowCount === 0 && legendWidth !== rowWidth) {\n              rowCount = 1;\n            }\n            rowWidth = legendWidth;\n            rowCount++;\n            columnCount = 0;\n            //  columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding + this.legendTitleSize.height;\n          }\n          var len = rowCount ? rowCount - 1 : rowCount;\n          this.rowHeights[len] = Math.max(this.rowHeights[len] ? this.rowHeights[len] : 0, Math.max(legendOption.textSize.height, legend.shapeHeight));\n          this.columnHeights[columnCount] = (this.columnHeights[columnCount] ? this.columnHeights[columnCount] : 0) + Math.max(legendOption.textSize.height, legend.shapeHeight) + padding;\n          if (maxColumn && this.columnHeights[columnCount] > legendBounds.height) {\n            this.columnHeights[columnCount] -= Math.max(legendOption.textSize.height, legend.shapeHeight) + padding;\n          }\n          columnCount++;\n        }\n      }\n    }\n    titleHeight = titlePosition === 'Top' ? this.legendTitleSize.height : 0;\n    if (this.isVertical && legend.layout === 'Auto' && !maxColumn) {\n      rowWidth = rowWidth + maximumWidth;\n      this.isPaging = legendBounds.width < rowWidth + padding;\n      columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n      columnHeight = Math.max(columnHeight, (this.totalPages || 1) * (this.maxItemHeight + padding) + padding + arrowHeight);\n      this.isPaging = this.isPaging && this.totalPages > 1;\n      columnWidth.push(maximumWidth);\n    } else {\n      this.totalPages = this.totalRowCount = rowCount;\n      columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n      this.isPaging = (legendBounds.height < columnHeight || legend.layout === 'Horizontal' && this.rowHeights.length > 1) && !maxColumn;\n      columnHeight = !legend.enablePages && this.isPaging && legend.layout !== 'Vertical' ? this.maxItemHeight + padding + padding + titleHeight : columnHeight;\n      columnHeight = Math.max(columnHeight, this.maxItemHeight + padding + padding + titleHeight);\n      if (legend.layout === 'Horizontal') {\n        columnHeight = this.maxItemHeight + padding * 2 + titleHeight + this.pageButtonSize + legend.border.width;\n      }\n      if (!this.isPaging) {\n        // For title left and right position\n        rowWidth += this.isTitle && titlePosition !== 'Top' ? this.fivePixel + this.legendTitleSize.width + this.fivePixel : 0;\n      }\n    }\n    this.maxColumns = 0; // initialization for max columns\n    var width;\n    if (maxColumn && this.maxColumnWidth && legend.fixedWidth) {\n      width = this.maxColumnWidth * legend.maximumColumns + padding;\n      this.isPaging = false;\n    } else {\n      width = this.isVertical && legend.layout === 'Auto' && !maxColumn ? this.getMaxColumn(columnWidth, legendBounds.width, padding, rowWidth + padding) : Math.max(rowWidth + padding, maximumWidth);\n    }\n    if (render) {\n      // if any legends not skipped in event check\n      this.setBounds(width, columnHeight, legend, legendBounds);\n    } else {\n      this.setBounds(0, 0, legend, legendBounds);\n    }\n  };\n  AccumulationLegend.prototype.getPageWidth = function (pageWidth) {\n    var sum = 0;\n    for (var i = 0; i < pageWidth.length; i++) {\n      sum += pageWidth[i];\n    }\n    return sum;\n  };\n  /** @private */\n  AccumulationLegend.prototype.getLegendHeight = function (option, legend, bounds, rowWidth, legendHeight, padding) {\n    var legendWidth = option.textSize.width;\n    var textPadding = legend.shapePadding + padding * 2 + legend.shapeWidth;\n    switch (legend.textWrap) {\n      case 'Wrap':\n      case 'AnyWhere':\n        if (legendWidth > legend.maximumLabelWidth || legendWidth + rowWidth > bounds.width) {\n          option.textCollection = textWrap(option.text, legend.maximumLabelWidth ? Math.min(legend.maximumLabelWidth, bounds.width - textPadding) : bounds.width - textPadding, legend.textStyle, this.chart.enableRtl, legend.textWrap === 'AnyWhere', null, this.chart.themeStyle.legendLabelFont);\n        } else {\n          option.textCollection.push(option.text);\n        }\n        option.textSize.height = legendHeight * option.textCollection.length;\n        break;\n    }\n  };\n  /**\n   * To find html entities value for legend.\n   *\n   * @param {string} legendText - The text of the legend item.\n   * @returns {string} - Converts the entities to normal string.\n   * @private\n   */\n  AccumulationLegend.prototype.convertHtmlEntities = function (legendText) {\n    var text = legendText.replace('&amp;', '&').replace('&lt;', '<').replace('&gt;', '>').replace('&quot;', '\"').replace('&nbsp;', ' ').replace('&cent;', '¢').replace('&pound;', '£').replace('&yen;', '¥').replace('&euro;', '€').replace('&copy;', '©').replace('&reg;', '®');\n    text = text.replace('&#38;', '&').replace('&#60;', '<').replace('&#62;', '>').replace('&#34;', '\"').replace('&#160;', ' ').replace('&#162;', '¢').replace('&#163;', '£').replace('&#165;', '¥').replace('&#8364;', '€').replace('&#169;', '©').replace('&#174;', '®');\n    return text;\n  };\n  /**\n   * To find maximum column size for legend.\n   *\n   * @param {number[]} columns - Array containing the number of legend items in each column.\n   * @param {number} width - The total width available.\n   * @param {number} padding - The padding between legend items.\n   * @param {number} rowWidth - The width of each row of legend items.\n   * @returns {number} - Get a maximum columns.\n   */\n  AccumulationLegend.prototype.getMaxColumn = function (columns, width, padding, rowWidth) {\n    var maxPageColumn = padding;\n    this.maxColumnWidth = Math.max.apply(null, columns);\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n      var column = columns_1[_i];\n      maxPageColumn += this.maxColumnWidth;\n      this.maxColumns++;\n      if (maxPageColumn + padding > width) {\n        maxPageColumn -= this.maxColumnWidth;\n        this.maxColumns--;\n        break;\n      }\n    }\n    this.isPaging = maxPageColumn < rowWidth && this.totalPages > 1;\n    if (maxPageColumn === padding) {\n      maxPageColumn = width;\n    }\n    this.maxColumns = Math.max(1, this.maxColumns);\n    this.maxWidth = maxPageColumn;\n    var columnWidth = this.maxColumnWidth + padding;\n    var prevPage = 0;\n    var columnCount = this.columnHeights.length;\n    if (this.isPaging && this.isVertical) {\n      for (var i = 1; i < columnCount; i++) {\n        columnWidth += this.maxColumnWidth + padding;\n        if (columnWidth > width) {\n          this.pageHeights.push(prevPage !== i - 1 ? Math.max.apply(null, this.columnHeights.slice(prevPage, i - 1)) : this.columnHeights[prevPage]);\n          columnWidth = this.maxColumnWidth + padding;\n          prevPage = i;\n        }\n      }\n      this.pageHeights.push(prevPage !== columnCount - 1 ? Math.max.apply(null, this.columnHeights.slice(prevPage, columnCount - 1)) : this.columnHeights[prevPage]);\n      this.totalPages = this.pageHeights.length;\n    }\n    return maxPageColumn;\n  };\n  /**\n   * To find available width from legend x position.\n   *\n   * @param {number} tx - The x-coordinate of the legend.\n   * @param {number} width - The total width available.\n   * @returns {number} - Get a available width.\n   */\n  AccumulationLegend.prototype.getAvailWidth = function (tx, width) {\n    if (this.isVertical && this.legend.layout === 'Auto' && !(this.legend.maximumColumns > 0)) {\n      width = this.maxWidth;\n    } else if (!this.isVertical && this.legend.layout !== 'Vertical' && !(this.legend.maximumColumns > 0) && this.isPaging && !this.legend.enablePages) {\n      return width - tx - this.fivePixel;\n    }\n    return width - (this.legend.padding * 2 + this.legend.shapeWidth + this.legend.shapePadding);\n  };\n  /**\n   * To find legend rendering locations from legend items.\n   *\n   * @param {LegendOptions} legendOption - The legend options.\n   * @param {ChartLocation} start - The starting location for legend rendering.\n   * @param {number} textPadding - The padding between legend text items.\n   * @param {LegendOptions} prevLegend - The previous legend options.\n   * @param {Rect} rect - The bounding of the legend.\n   * @param {number} count - The count of legend items.\n   * @param {number} firstLegend - The index of the first legend item.\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n    var padding = this.legend.padding;\n    var previousLocation = prevLegend.location.y + this.maxItemHeight / 4 + (prevLegend.textCollection.length > 0 ? (prevLegend.textCollection.length - 1) * this.maxItemHeight : 0);\n    if (this.isVertical && this.legend.layout === 'Auto' && !(this.legend.maximumColumns > 0)) {\n      if (count === firstLegend || previousLocation + Math.max(legendOption.textSize.height, this.legend.shapeHeight) + padding > rect.y + rect.height) {\n        legendOption.location.x = prevLegend.location.x + (count === firstLegend ? 0 : !this.isRtlEnable ? this.maxColumnWidth : -this.maxColumnWidth);\n        legendOption.location.y = start.y;\n        var textStartLoc = this.legend.shapeWidth / 2 + padding;\n        this.pageXCollections.push(legendOption.location.x + (!this.isRtlEnable ? -textStartLoc : textStartLoc));\n      } else {\n        legendOption.location.x = prevLegend.location.x;\n        legendOption.location.y = prevLegend.location.y + Math.max(prevLegend.textSize.height, this.legend.shapeHeight) + this.itemPadding;\n      }\n    } else {\n      var textWidth = this.legend.fixedWidth ? this.maxColumnWidth : textPadding + (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth : prevLegend.textSize.width);\n      var previousBound = prevLegend.location.x + (!this.isRtlEnable ? textWidth : -textWidth);\n      if (this.legend.layout === 'Auto' && this.legend.maximumColumns > 0 ? count % this.legend.maximumColumns === 0 : this.isWithinBounds(previousBound, (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth : legendOption.textSize.width) + textPadding - this.itemPadding, rect, this.legend.shapeWidth / 2) || this.legend.layout === 'Vertical') {\n        if (count !== firstLegend) {\n          this.chartRowCount++;\n        }\n        legendOption.location.y = count === firstLegend ? prevLegend.location.y : prevLegend.location.y + this.rowHeights[this.chartRowCount - 2] + padding;\n        legendOption.location.x = start.x;\n      } else {\n        legendOption.location.y = prevLegend.location.y;\n        legendOption.location.x = count === firstLegend ? prevLegend.location.x : previousBound;\n      }\n    }\n    var availablewidth = this.getAvailWidth(legendOption.location.x, this.legendBounds.width);\n    availablewidth = this.legend.maximumLabelWidth ? Math.min(this.legend.maximumLabelWidth, availablewidth) : availablewidth;\n    if (this.legend.textOverflow === 'Ellipsis' && this.legend.textWrap === 'Normal') {\n      legendOption.text = textTrim(+availablewidth.toFixed(4), legendOption.text, this.legend.textStyle, this.chart.enableRtl, this.chart.themeStyle.legendLabelFont);\n    }\n  };\n  /**\n   * Check whether legend group within legend bounds or not.\n   *\n   * @param {number} previousBound - The previous bound value.\n   * @param {number} textWidth - The width of the legend text.\n   * @param {Rect} legendBounds - The bounding of the legend.\n   * @param {number} shapeWidth - The width of the legend shape.\n   * @returns {boolean} - A boolean indicating whether the legend group is within the legend bounds.\n   */\n  AccumulationLegend.prototype.isWithinBounds = function (previousBound, textWidth, legendBounds, shapeWidth) {\n    if (!this.isRtlEnable) {\n      return previousBound + textWidth > legendBounds.x + legendBounds.width + shapeWidth;\n    } else {\n      return previousBound - textWidth < legendBounds.x - shapeWidth;\n    }\n  };\n  /**\n   * Finding the smart legend place according to positions.\n   *\n   * @param {Rect} labelBound - The bounding of the label.\n   * @param {Rect} legendBound - The bounding of the legend.\n   * @param {MarginModel} margin - The margin of the legend.\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.getSmartLegendLocation = function (labelBound, legendBound, margin) {\n    var space;\n    switch (this.position) {\n      case 'Left':\n        space = (labelBound.x - legendBound.width - margin.left) / 2;\n        legendBound.x = labelBound.x - legendBound.width < margin.left ? legendBound.x : labelBound.x - legendBound.width - space;\n        break;\n      case 'Right':\n        space = (this.chart.availableSize.width - margin.right - (labelBound.x + labelBound.width + legendBound.width)) / 2;\n        legendBound.x = labelBound.x + labelBound.width + legendBound.width > this.chart.availableSize.width - margin.right ? legendBound.x : labelBound.x + labelBound.width + space;\n        break;\n      case 'Top':\n        this.getTitleRect(this.chart);\n        space = (labelBound.y - legendBound.height - (this.titleRect.y + this.titleRect.height)) / 2;\n        legendBound.y = labelBound.y - legendBound.height < margin.top ? legendBound.y : labelBound.y - legendBound.height - space;\n        break;\n      case 'Bottom':\n        space = (this.chart.availableSize.height - margin.bottom - (labelBound.y + labelBound.height + legendBound.height)) / 2;\n        legendBound.y = labelBound.y + labelBound.height + legendBound.height > this.chart.availableSize.height - margin.bottom ? legendBound.y : labelBound.y + labelBound.height + space;\n        break;\n    }\n  };\n  /**\n   * To get title rect.\n   *\n   * @param {AccumulationChart} accumulation - The accumulation chart control.\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.getTitleRect = function (accumulation) {\n    if (!accumulation.title) {\n      return null;\n    }\n    var titleSize = measureText(accumulation.title, accumulation.titleStyle, this.chart.themeStyle.legendTitleFont);\n    this.titleRect = new Rect(accumulation.availableSize.width / 2 - titleSize.width / 2, accumulation.margin.top, titleSize.width, titleSize.height);\n  };\n  /**\n   * To get legend by index.\n   *\n   * @param {number} index - The index of the legend.\n   * @param {LegendOptions[]} legendCollections - The array of legend options.\n   * @returns {LegendOptions} - Return legend index.\n   */\n  AccumulationLegend.prototype.legendByIndex = function (index, legendCollections) {\n    for (var _i = 0, legendCollections_1 = legendCollections; _i < legendCollections_1.length; _i++) {\n      var legend = legendCollections_1[_i];\n      if (legend.pointIndex === index) {\n        return legend;\n      }\n    }\n    return null;\n  };\n  /**\n   * To show or hide the legend on clicking the legend.\n   *\n   * @param {Event} event - The click event.\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.click = function (event) {\n    var targetId = event.target.id.indexOf('_chart_legend_g_') > -1 ? event.target.firstChild['id'] : event.target.id;\n    var chart = this.chart;\n    var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_', this.legendID + '_shape_marker_'];\n    // if ((<AccumulationChart>this.chart).accumulationSelectionModule) {\n    //     // const selectedDataIndexes: Indexes[] = <Indexes[]>extend([], (<AccumulationChart>this.chart)\n    //     //     .accumulationSelectionModule.selectedDataIndexes, null, true);\n    // }\n    this.chart.animateSeries = false;\n    for (var _i = 0, legendItemsId_2 = legendItemsId; _i < legendItemsId_2.length; _i++) {\n      var id = legendItemsId_2[_i];\n      if (targetId.indexOf(id) > -1) {\n        var pointIndex = parseInt(targetId.split(id)[1], 10);\n        if (this.chart.legendSettings.toggleVisibility && !isNaN(pointIndex)) {\n          var currentSeries = this.chart.visibleSeries[0];\n          var point = pointByIndex(pointIndex, currentSeries.points);\n          var legendOption = this.legendByIndex(pointIndex, this.legendCollections);\n          var legendClickArgs = {\n            legendText: legendOption.text,\n            legendShape: legendOption.shape,\n            chart: chart.isBlazor ? {} : chart,\n            series: currentSeries,\n            point: point,\n            name: legendClick,\n            cancel: false\n          };\n          this.chart.trigger(legendClick, legendClickArgs);\n          if (!legendClickArgs.cancel) {\n            point.visible = !point.visible;\n            legendOption.visible = point.visible;\n            currentSeries.sumOfPoints += point.visible ? point.y : -point.y;\n            chart.redraw = chart.enableAnimation;\n            this.sliceVisibility(pointIndex, point.visible);\n            chart.removeSvg();\n            //To remove the blazor templates\n            blazorTemplatesReset(chart);\n            this.chart.refreshPoints(currentSeries.points);\n            this.chart.calculateBounds();\n            var borderElement = document.getElementById(this.chart.element.id + 'PointHover_Border');\n            if (borderElement) {\n              this.chart.pieSeriesModule.removeBorder(borderElement, 0);\n            }\n            if (this.chart.accumulationTooltipModule) {\n              this.chart.accumulationTooltipModule.removeTooltip(0);\n            }\n            this.chart.renderElements();\n          }\n        } else if (this.chart.accumulationSelectionModule && !isNaN(pointIndex)) {\n          this.chart.accumulationSelectionModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n        } else if (this.chart.accumulationHighlightModule && !isNaN(pointIndex)) {\n          this.chart.accumulationHighlightModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n        }\n      }\n    }\n    if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n      this.changePage(event, true);\n    } else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n      this.changePage(event, false);\n    }\n    chart.redraw = false;\n  };\n  /**\n   * To translate the point elements by index and position.\n   *\n   * @param {number} index - The index of the point element.\n   * @param {boolean} isVisible - A boolean value indicating whether the point is visible.\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.sliceVisibility = function (index, isVisible) {\n    var sliceId = this.chart.element.id + '_Series_0_Point_';\n    if (this.chart.visibleSeries[0].dataLabel.visible) {\n      sliceId = this.chart.element.id + '_datalabel_Series_0_';\n      this.sliceAnimate(getElement(sliceId + 'g_' + index), isVisible);\n    }\n  };\n  /**\n   * Slice animation.\n   *\n   * @param {Element} element - slice element.\n   * @param {boolean} isVisible - boolean value of slice.\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.sliceAnimate = function (element, isVisible) {\n    if (!element) {\n      return null;\n    }\n    new Animation({}).animate(element, {\n      duration: 300,\n      delay: 0,\n      name: isVisible ? 'FadeIn' : 'FadeOut',\n      end: function (args) {\n        args.element.style.visibility = isVisible ? 'visible' : 'hidden';\n      }\n    });\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Return module name.\n   * @private\n   */\n  AccumulationLegend.prototype.getModuleName = function () {\n    return 'AccumulationLegend';\n  };\n  /**\n   * To destroy the Legend.\n   *\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.destroy = function () {\n    /**\n     * Destroy method calling here.\n     */\n    this.removeEventListener();\n  };\n  return AccumulationLegend;\n}(BaseLegend);\nexport { AccumulationLegend };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Browser","isNullOrUndefined","Animation","pointByIndex","BaseLegend","LegendOptions","Rect","measureText","textTrim","getElement","blazorTemplatesReset","textWrap","legendClick","AccumulationLegend","_super","chart","_this","call","library","titleRect","margin","top","addEventListener","isDestroyed","on","touchMoveEvent","mouseMove","touchEndEvent","mouseEnd","click","removeEventListener","off","e","legendSettings","visible","isTouch","accumulationHighlightModule","highlightMode","toggleVisibility","legendItemsId","legendID","targetId","target","id","index","_i","legendItemsId_1","length","indexOf","parseInt","split","legendSelection","type","move","getLegendOptions","series","legendCollections","isRtlEnable","enableRtl","isReverse","reverse","i","seriesType","innerRadius","_a","points","point","x","y","push","useGroupingSeparator","intl","formatNumber","useGrouping","toString","color","legendShape","legendImageUrl","getLegendBounds","availableSize","legendBounds","legend","calculateLegendTitle","isTitle","title","extraWidth","extraHeight","legendOption","chartRowCount","rowHeights","columnHeights","pageHeights","padding","titlePosition","titlePlusArrowSpace","arrowWidth","arrowHeight","enablePages","isVertical","height","width","shapePadding","maximumWidth","maximumLabelWidth","shapeWidth","rowWidth","columnCount","rowCount","columnWidth","pageWidth","pageRowWidth","previousRowCount","columnHeight","legendWidth","titleHeight","maxItemHeight","Math","max","textStyle","themeStyle","legendLabelFont","shapeHeight","legendEventArgs","render","maxColumn","layout","maximumColumns","fixedWidth","textWidth","itemPadding","text","maxColumnWidth","fill","shape","name","cancel","trigger","originalText","convertHtmlEntities","textSize","getLegendHeight","pageButtonSize","getPageWidth","totalPages","legendTitleSize","fivePixel","len","isPaging","apply","totalRowCount","border","maxColumns","getMaxColumn","setBounds","sum","option","bounds","legendHeight","textPadding","textCollection","min","legendText","replace","columns","maxPageColumn","columns_1","column","maxWidth","prevPage","slice","getAvailWidth","tx","getRenderPoint","start","prevLegend","rect","count","firstLegend","previousLocation","location","textStartLoc","pageXCollections","previousBound","isWithinBounds","availablewidth","textOverflow","toFixed","getSmartLegendLocation","labelBound","legendBound","space","position","left","right","getTitleRect","bottom","accumulation","titleSize","titleStyle","legendTitleFont","legendByIndex","legendCollections_1","pointIndex","event","firstChild","animateSeries","legendItemsId_2","isNaN","currentSeries","visibleSeries","legendClickArgs","isBlazor","sumOfPoints","redraw","enableAnimation","sliceVisibility","removeSvg","refreshPoints","calculateBounds","borderElement","document","getElementById","element","pieSeriesModule","removeBorder","accumulationTooltipModule","removeTooltip","renderElements","accumulationSelectionModule","changePage","isVisible","sliceId","dataLabel","sliceAnimate","animate","duration","delay","end","args","style","visibility","getModuleName","destroy"],"sources":["C:/Users/mkfun/Desktop/ct assignment/admin/node_modules/@syncfusion/ej2-charts/src/accumulation-chart/renderer/legend.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * AccumulationChart legend\n */\nimport { Browser, isNullOrUndefined, Animation } from '@syncfusion/ej2-base';\nimport { pointByIndex } from '../model/acc-base';\nimport { BaseLegend, LegendOptions } from '../../common/legend/legend';\nimport { Rect, measureText } from '@syncfusion/ej2-svg-base';\nimport { textTrim, getElement, blazorTemplatesReset } from '../../common/utils/helper';\nimport { textWrap } from '../../common/utils/helper';\nimport { legendClick } from '../../common/model/constants';\n/**\n * The `AccumulationLegend` module is used to render the `Legend` for the Accumulation chart.\n */\nvar AccumulationLegend = /** @class */ (function (_super) {\n    __extends(AccumulationLegend, _super);\n    /**\n     * Constructor for Accumulation Legend.\n     *\n     * @param {AccumulationChart} chart Get a chart as a parameter.\n     */\n    function AccumulationLegend(chart) {\n        var _this = _super.call(this, chart) || this;\n        _this.library = _this;\n        _this.titleRect = new Rect(0, chart.margin.top, 0, 0);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * Binding events for legend module.\n     *\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.addEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n        this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n        this.chart.on('click', this.click, this);\n    };\n    /**\n     * UnBinding events for legend module.\n     *\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.removeEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n        this.chart.off('click', this.click);\n        this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n    };\n    /**\n     * To handle mosue move for legend module.\n     *\n     * @param {MouseEvent} e - The mouse move event for legend module.\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.mouseMove = function (e) {\n        if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n            if (this.chart.accumulationHighlightModule && this.chart.highlightMode !== 'None') {\n                if (!this.chart.legendSettings.toggleVisibility) {\n                    this.click(e);\n                }\n                var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_',\n                    this.legendID + '_shape_', this.legendID + '_g_'];\n                var targetId = e.target.id;\n                var index = void 0;\n                for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n                    var id = legendItemsId_1[_i];\n                    if (targetId.indexOf(id) > -1) {\n                        index = parseInt(targetId.split(id)[1], 10);\n                        this.chart.accumulationHighlightModule.legendSelection(this.chart, 0, index, e.target, e.type);\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * To handle mosue end for legend module.\n     *\n     * @param {MouseEvent} e - The mouse end event for legend module.\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.mouseEnd = function (e) {\n        if (this.chart.legendSettings.visible && this.chart.isTouch) {\n            this.move(e);\n        }\n    };\n    /**\n     * Get the legend options.\n     *\n     * @param {AccumulationChart} chart - The accumulation chart control.\n     * @param {AccumulationSeries[]} series - The array of series in the accumulation chart.\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.getLegendOptions = function (chart, series) {\n        this.legendCollections = [];\n        this.isRtlEnable = chart.enableRtl;\n        this.isReverse = !this.isRtlEnable && chart.legendSettings.reverse;\n        for (var i = 0; i < 1; i++) {\n            var seriesType = series[i].type;\n            if (seriesType === 'Pie' || seriesType === 'Doughnut') {\n                seriesType = (series[i].innerRadius !== '0' && series[i].innerRadius !== '0%') ?\n                    'Doughnut' : 'Pie';\n            }\n            for (var _i = 0, _a = series[i].points; _i < _a.length; _i++) {\n                var point = _a[_i];\n                if (!isNullOrUndefined(point.x) && !isNullOrUndefined(point.y)) {\n                    this.legendCollections.push(new LegendOptions((chart.useGroupingSeparator && typeof point.x === 'number') ? chart.intl.formatNumber(point.x, { useGrouping: true })\n                        : point.x.toString(), point.color, series[i].legendShape, point.visible, seriesType, point.legendImageUrl, null, null, point.index, series[i].index, null, point.x.toString()));\n                }\n            }\n            if (this.isReverse) {\n                this.legendCollections.reverse();\n            }\n        }\n    };\n    /**\n     * To find legend bounds for accumulation chart.\n     *\n     * @param {Size} availableSize - The available size for the legend.\n     * @param {Rect} legendBounds - The boundary of the legend.\n     * @param {LegendSettingsModel} legend - The legend settings.\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n        this.calculateLegendTitle(legend, legendBounds);\n        this.isTitle = legend.title ? true : false;\n        var extraWidth = 0;\n        var extraHeight = 0;\n        var legendOption;\n        this.chartRowCount = 1;\n        this.rowHeights = [];\n        this.columnHeights = [];\n        this.pageHeights = [];\n        var padding = legend.padding;\n        var titlePosition = legend.titlePosition;\n        var titlePlusArrowSpace = 0;\n        var arrowWidth = this.arrowWidth;\n        var arrowHeight = legend.enablePages ? 0 : this.arrowHeight;\n        if (!this.isVertical) {\n            extraHeight = !legend.height ? ((availableSize.height / 100) * 5) : 0;\n        }\n        else {\n            extraWidth = !legend.width ? ((availableSize.width / 100) * 5) : 0;\n        }\n        legendBounds.width += extraWidth;\n        legendBounds.height += extraHeight;\n        var shapePadding = legend.shapePadding;\n        var maximumWidth = legend.maximumLabelWidth ? legend.maximumLabelWidth : 0;\n        var shapeWidth = legend.shapeWidth;\n        var rowWidth = 0;\n        var columnCount = 0;\n        var rowCount = 0;\n        var columnWidth = [];\n        var pageWidth = [];\n        var pageRowWidth = 0;\n        var previousRowCount = 0;\n        var columnHeight = 0;\n        var legendWidth = 0;\n        var titleHeight = 0;\n        this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle, this.chart.themeStyle.legendLabelFont).height, legend.shapeHeight);\n        var legendEventArgs;\n        var render = false;\n        var maxColumn = legend.layout === 'Auto' && legend.maximumColumns > 0;\n        if (legend.fixedWidth) {\n            for (var i = 0; i < this.legendCollections.length; i++) {\n                var textWidth = shapeWidth + shapePadding + (!this.isVertical ? (i === 0) ? padding : this.itemPadding :\n                    padding) + (legend.maximumLabelWidth ? legend.maximumLabelWidth :\n                    measureText(this.legendCollections[i].text, legend.textStyle, this.chart.themeStyle.legendLabelFont).width);\n                this.maxColumnWidth = this.maxColumnWidth > textWidth ? this.maxColumnWidth : textWidth;\n            }\n        }\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            legendOption = this.legendCollections[i];\n            legendEventArgs = { fill: legendOption.fill, text: legendOption.text, shape: legendOption.shape,\n                name: 'legendRender', cancel: false };\n            this.chart.trigger('legendRender', legendEventArgs);\n            legendOption.render = !legendEventArgs.cancel;\n            legendOption.text = legendOption.originalText = ((legendEventArgs.text.indexOf('&') > -1) ?\n                this.convertHtmlEntities(legendEventArgs.text) : legendEventArgs.text);\n            legendOption.fill = legendEventArgs.fill;\n            legendOption.shape = legendEventArgs.shape;\n            legendOption.textSize = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n            if (legendOption.render && legendOption.text !== '') {\n                render = true;\n                legendWidth = legend.fixedWidth ? this.maxColumnWidth : shapeWidth + shapePadding +\n                    (legend.maximumLabelWidth ? legend.maximumLabelWidth : legendOption.textSize.width)\n                    + (!this.isVertical || legend.layout === 'Horizontal' ? (i === 0 || (columnCount === 1 && rowCount > 0 && legend.layout === 'Horizontal')) ? padding : this.itemPadding : padding);\n                this.getLegendHeight(legendOption, legend, legendBounds, rowWidth, this.maxItemHeight, padding);\n                if (this.isVertical && legend.layout === 'Auto' && !maxColumn) {\n                    columnHeight += Math.max(legendOption.textSize.height, legend.shapeHeight) + ((i === 0) ? padding : this.itemPadding);\n                    if (columnHeight + this.itemPadding + (arrowHeight / this.pageButtonSize) > (legendBounds.height)) {\n                        //columnHeight = Math.max(columnHeight, (rowCount * (this.maxItemHeight + padding)) + padding + arrowHeight);\n                        rowWidth = rowWidth + maximumWidth;\n                        pageRowWidth = this.getPageWidth(pageWidth);\n                        this.totalPages = Math.max(rowCount, this.totalPages || 1);\n                        if ((rowWidth - pageRowWidth + legendWidth) > legendBounds.width) {\n                            pageWidth.push(rowWidth - pageRowWidth);\n                            rowCount = this.rowHeights.length;\n                            previousRowCount = rowCount;\n                        }\n                        else {\n                            rowCount = previousRowCount;\n                        }\n                        columnWidth.push(maximumWidth);\n                        maximumWidth = 0;\n                        columnHeight = Math.max(legendOption.textSize.height, legend.shapeHeight) + padding;\n                        columnCount++;\n                    }\n                    this.columnHeights[columnCount] = (this.columnHeights[columnCount] ?\n                        this.columnHeights[columnCount] : 0) + Math.max(legendOption.textSize.height, legend.shapeHeight)\n                        + ((i === 0) ? padding : this.itemPadding);\n                    maximumWidth = Math.max(legendWidth, maximumWidth);\n                    this.rowHeights[rowCount] = Math.max((this.rowHeights[rowCount] ?\n                        this.rowHeights[rowCount] : 0), Math.max(legendOption.textSize.height, legend.shapeHeight));\n                    rowCount++;\n                }\n                else {\n                    if (!legend.enablePages) { // For new legend navigation support\n                        titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n                        titlePlusArrowSpace += arrowWidth;\n                    }\n                    rowWidth = rowWidth + legendWidth;\n                    if (maxColumn ? legend.maximumColumns === columnCount : legendBounds.width < (padding + rowWidth + titlePlusArrowSpace) || (this.legend.layout === 'Vertical' && columnCount === 1)) {\n                        maximumWidth = Math.max(maximumWidth, (rowWidth + padding + titlePlusArrowSpace - legendWidth));\n                        if (rowCount === 0 && (legendWidth !== rowWidth)) {\n                            rowCount = 1;\n                        }\n                        rowWidth = legendWidth;\n                        rowCount++;\n                        columnCount = 0;\n                        //  columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding + this.legendTitleSize.height;\n                    }\n                    var len = rowCount ? (rowCount - 1) : rowCount;\n                    this.rowHeights[len] = Math.max((this.rowHeights[len] ? this.rowHeights[len] : 0), Math.max(legendOption.textSize.height, legend.shapeHeight));\n                    this.columnHeights[columnCount] = (this.columnHeights[columnCount] ?\n                        this.columnHeights[columnCount] : 0) +\n                        Math.max(legendOption.textSize.height, legend.shapeHeight) + padding;\n                    if (maxColumn && this.columnHeights[columnCount] > legendBounds.height) {\n                        this.columnHeights[columnCount] -= Math.max(legendOption.textSize.height, legend.shapeHeight) + padding;\n                    }\n                    columnCount++;\n                }\n            }\n        }\n        titleHeight = titlePosition === 'Top' ? this.legendTitleSize.height : 0;\n        if (this.isVertical && legend.layout === 'Auto' && !maxColumn) {\n            rowWidth = rowWidth + maximumWidth;\n            this.isPaging = legendBounds.width < (rowWidth + padding);\n            columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n            columnHeight = Math.max(columnHeight, ((this.totalPages || 1) * (this.maxItemHeight + padding)) + padding + arrowHeight);\n            this.isPaging = this.isPaging && (this.totalPages > 1);\n            columnWidth.push(maximumWidth);\n        }\n        else {\n            this.totalPages = this.totalRowCount = rowCount;\n            columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n            this.isPaging = (legendBounds.height < columnHeight || (legend.layout === 'Horizontal' && this.rowHeights.length > 1)) && !maxColumn;\n            columnHeight = !legend.enablePages && this.isPaging && legend.layout !== 'Vertical' ? (this.maxItemHeight + padding) + padding + titleHeight : columnHeight;\n            columnHeight = Math.max(columnHeight, (this.maxItemHeight + padding) + padding + titleHeight);\n            if (legend.layout === 'Horizontal') {\n                columnHeight = (this.maxItemHeight) + (padding * 2) + titleHeight + this.pageButtonSize + legend.border.width;\n            }\n            if (!this.isPaging) { // For title left and right position\n                rowWidth += this.isTitle && titlePosition !== 'Top' ? (this.fivePixel + this.legendTitleSize.width + this.fivePixel) : 0;\n            }\n        }\n        this.maxColumns = 0; // initialization for max columns\n        var width;\n        if (maxColumn && this.maxColumnWidth && legend.fixedWidth) {\n            width = (this.maxColumnWidth * legend.maximumColumns) + padding;\n            this.isPaging = false;\n        }\n        else {\n            width = (this.isVertical && legend.layout === 'Auto' && !maxColumn) ? this.getMaxColumn(columnWidth, legendBounds.width, padding, rowWidth + padding) :\n                Math.max(rowWidth + padding, maximumWidth);\n        }\n        if (render) { // if any legends not skipped in event check\n            this.setBounds(width, columnHeight, legend, legendBounds);\n        }\n        else {\n            this.setBounds(0, 0, legend, legendBounds);\n        }\n    };\n    AccumulationLegend.prototype.getPageWidth = function (pageWidth) {\n        var sum = 0;\n        for (var i = 0; i < pageWidth.length; i++) {\n            sum += pageWidth[i];\n        }\n        return sum;\n    };\n    /** @private */\n    AccumulationLegend.prototype.getLegendHeight = function (option, legend, bounds, rowWidth, legendHeight, padding) {\n        var legendWidth = option.textSize.width;\n        var textPadding = legend.shapePadding + (padding * 2) + legend.shapeWidth;\n        switch (legend.textWrap) {\n            case 'Wrap':\n            case 'AnyWhere':\n                if (legendWidth > legend.maximumLabelWidth || legendWidth + rowWidth > bounds.width) {\n                    option.textCollection = textWrap(option.text, (legend.maximumLabelWidth ? Math.min(legend.maximumLabelWidth, (bounds.width - textPadding)) :\n                        (bounds.width - textPadding)), legend.textStyle, this.chart.enableRtl, legend.textWrap === 'AnyWhere', null, this.chart.themeStyle.legendLabelFont);\n                }\n                else {\n                    option.textCollection.push(option.text);\n                }\n                option.textSize.height = (legendHeight * option.textCollection.length);\n                break;\n        }\n    };\n    /**\n     * To find html entities value for legend.\n     *\n     * @param {string} legendText - The text of the legend item.\n     * @returns {string} - Converts the entities to normal string.\n     * @private\n     */\n    AccumulationLegend.prototype.convertHtmlEntities = function (legendText) {\n        var text = (legendText).replace('&amp;', '&').replace('&lt;', '<').replace('&gt;', '>').replace('&quot;', '\"').replace('&nbsp;', ' ').replace('&cent;', '¢').replace('&pound;', '£').replace('&yen;', '¥').replace('&euro;', '€').replace('&copy;', '©').replace('&reg;', '®');\n        text = (text).replace('&#38;', '&').replace('&#60;', '<').replace('&#62;', '>').replace('&#34;', '\"').replace('&#160;', ' ').\n            replace('&#162;', '¢').replace('&#163;', '£').replace('&#165;', '¥').replace('&#8364;', '€').replace('&#169;', '©').replace('&#174;', '®');\n        return text;\n    };\n    /**\n     * To find maximum column size for legend.\n     *\n     * @param {number[]} columns - Array containing the number of legend items in each column.\n     * @param {number} width - The total width available.\n     * @param {number} padding - The padding between legend items.\n     * @param {number} rowWidth - The width of each row of legend items.\n     * @returns {number} - Get a maximum columns.\n     */\n    AccumulationLegend.prototype.getMaxColumn = function (columns, width, padding, rowWidth) {\n        var maxPageColumn = padding;\n        this.maxColumnWidth = Math.max.apply(null, columns);\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            maxPageColumn += this.maxColumnWidth;\n            this.maxColumns++;\n            if (maxPageColumn + padding > width) {\n                maxPageColumn -= this.maxColumnWidth;\n                this.maxColumns--;\n                break;\n            }\n        }\n        this.isPaging = (maxPageColumn < rowWidth) && (this.totalPages > 1);\n        if (maxPageColumn === padding) {\n            maxPageColumn = width;\n        }\n        this.maxColumns = Math.max(1, this.maxColumns);\n        this.maxWidth = maxPageColumn;\n        var columnWidth = this.maxColumnWidth + padding;\n        var prevPage = 0;\n        var columnCount = this.columnHeights.length;\n        if (this.isPaging && this.isVertical) {\n            for (var i = 1; i < columnCount; i++) {\n                columnWidth += (this.maxColumnWidth + padding);\n                if (columnWidth > width) {\n                    this.pageHeights.push(((prevPage !== i - 1) ? Math.max.apply(null, this.columnHeights.slice(prevPage, i - 1)) :\n                        this.columnHeights[prevPage]));\n                    columnWidth = this.maxColumnWidth + padding;\n                    prevPage = i;\n                }\n            }\n            this.pageHeights.push(((prevPage !== columnCount - 1) ?\n                Math.max.apply(null, this.columnHeights.slice(prevPage, columnCount - 1)) : this.columnHeights[prevPage]));\n            this.totalPages = this.pageHeights.length;\n        }\n        return maxPageColumn;\n    };\n    /**\n     * To find available width from legend x position.\n     *\n     * @param {number} tx - The x-coordinate of the legend.\n     * @param {number} width - The total width available.\n     * @returns {number} - Get a available width.\n     */\n    AccumulationLegend.prototype.getAvailWidth = function (tx, width) {\n        if (this.isVertical && this.legend.layout === 'Auto' && !(this.legend.maximumColumns > 0)) {\n            width = this.maxWidth;\n        }\n        else if (!this.isVertical && this.legend.layout !== 'Vertical' && !(this.legend.maximumColumns > 0) && this.isPaging && !this.legend.enablePages) {\n            return width - tx - this.fivePixel;\n        }\n        return width - ((this.legend.padding * 2) + this.legend.shapeWidth + this.legend.shapePadding);\n    };\n    /**\n     * To find legend rendering locations from legend items.\n     *\n     * @param {LegendOptions} legendOption - The legend options.\n     * @param {ChartLocation} start - The starting location for legend rendering.\n     * @param {number} textPadding - The padding between legend text items.\n     * @param {LegendOptions} prevLegend - The previous legend options.\n     * @param {Rect} rect - The bounding of the legend.\n     * @param {number} count - The count of legend items.\n     * @param {number} firstLegend - The index of the first legend item.\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n        var padding = this.legend.padding;\n        var previousLocation = prevLegend.location.y + this.maxItemHeight / 4 + (prevLegend.textCollection.length > 0 ?\n            ((prevLegend.textCollection.length - 1) * this.maxItemHeight) : 0);\n        if (this.isVertical && this.legend.layout === 'Auto' && !(this.legend.maximumColumns > 0)) {\n            if (count === firstLegend || (previousLocation + Math.max(legendOption.textSize.height, this.legend.shapeHeight)\n                + padding > (rect.y + rect.height))) {\n                legendOption.location.x = prevLegend.location.x + ((count === firstLegend) ? 0 : (!this.isRtlEnable) ?\n                    this.maxColumnWidth : -this.maxColumnWidth);\n                legendOption.location.y = start.y;\n                var textStartLoc = (this.legend.shapeWidth / 2) + padding;\n                this.pageXCollections.push(legendOption.location.x + ((!this.isRtlEnable) ? -textStartLoc : textStartLoc));\n            }\n            else {\n                legendOption.location.x = prevLegend.location.x;\n                legendOption.location.y = prevLegend.location.y + Math.max(prevLegend.textSize.height, this.legend.shapeHeight)\n                    + this.itemPadding;\n            }\n        }\n        else {\n            var textWidth = this.legend.fixedWidth ? this.maxColumnWidth : textPadding + (this.legend.maximumLabelWidth ?\n                this.legend.maximumLabelWidth : prevLegend.textSize.width);\n            var previousBound = prevLegend.location.x + ((!this.isRtlEnable) ? textWidth : -textWidth);\n            if (this.legend.layout === 'Auto' && this.legend.maximumColumns > 0 ? count % this.legend.maximumColumns === 0 :\n                this.isWithinBounds(previousBound, (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth :\n                    legendOption.textSize.width) + textPadding - this.itemPadding, rect, this.legend.shapeWidth / 2) || this.legend.layout === 'Vertical') {\n                if (count !== firstLegend) {\n                    this.chartRowCount++;\n                }\n                legendOption.location.y = (count === firstLegend) ? prevLegend.location.y :\n                    prevLegend.location.y + this.rowHeights[(this.chartRowCount - 2)] + padding;\n                legendOption.location.x = start.x;\n            }\n            else {\n                legendOption.location.y = prevLegend.location.y;\n                legendOption.location.x = (count === firstLegend) ? prevLegend.location.x : previousBound;\n            }\n        }\n        var availablewidth = this.getAvailWidth(legendOption.location.x, this.legendBounds.width);\n        availablewidth = this.legend.maximumLabelWidth ? Math.min(this.legend.maximumLabelWidth, availablewidth) : availablewidth;\n        if (this.legend.textOverflow === 'Ellipsis' && this.legend.textWrap === 'Normal') {\n            legendOption.text = textTrim(+availablewidth.toFixed(4), legendOption.text, this.legend.textStyle, this.chart.enableRtl, this.chart.themeStyle.legendLabelFont);\n        }\n    };\n    /**\n     * Check whether legend group within legend bounds or not.\n     *\n     * @param {number} previousBound - The previous bound value.\n     * @param {number} textWidth - The width of the legend text.\n     * @param {Rect} legendBounds - The bounding of the legend.\n     * @param {number} shapeWidth - The width of the legend shape.\n     * @returns {boolean} - A boolean indicating whether the legend group is within the legend bounds.\n     */\n    AccumulationLegend.prototype.isWithinBounds = function (previousBound, textWidth, legendBounds, shapeWidth) {\n        if (!this.isRtlEnable) {\n            return (previousBound + textWidth) > (legendBounds.x + legendBounds.width + shapeWidth);\n        }\n        else {\n            return (previousBound - textWidth) < (legendBounds.x - shapeWidth);\n        }\n    };\n    /**\n     * Finding the smart legend place according to positions.\n     *\n     * @param {Rect} labelBound - The bounding of the label.\n     * @param {Rect} legendBound - The bounding of the legend.\n     * @param {MarginModel} margin - The margin of the legend.\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.getSmartLegendLocation = function (labelBound, legendBound, margin) {\n        var space;\n        switch (this.position) {\n            case 'Left':\n                space = ((labelBound.x - legendBound.width) - margin.left) / 2;\n                legendBound.x = (labelBound.x - legendBound.width) < margin.left ? legendBound.x :\n                    (labelBound.x - legendBound.width) - space;\n                break;\n            case 'Right':\n                space = ((this.chart.availableSize.width - margin.right) - (labelBound.x + labelBound.width + legendBound.width)) / 2;\n                legendBound.x = (labelBound.x + labelBound.width + legendBound.width) > (this.chart.availableSize.width - margin.right) ?\n                    legendBound.x : (labelBound.x + labelBound.width + space);\n                break;\n            case 'Top':\n                this.getTitleRect(this.chart);\n                space = ((labelBound.y - legendBound.height) - (this.titleRect.y + this.titleRect.height)) / 2;\n                legendBound.y = (labelBound.y - legendBound.height) < margin.top ? legendBound.y :\n                    (labelBound.y - legendBound.height) - space;\n                break;\n            case 'Bottom':\n                space = ((this.chart.availableSize.height - margin.bottom) - (labelBound.y + labelBound.height + legendBound.height)) / 2;\n                legendBound.y = labelBound.y + labelBound.height + legendBound.height > (this.chart.availableSize.height - margin.bottom) ?\n                    legendBound.y : (labelBound.y + labelBound.height) + space;\n                break;\n        }\n    };\n    /**\n     * To get title rect.\n     *\n     * @param {AccumulationChart} accumulation - The accumulation chart control.\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.getTitleRect = function (accumulation) {\n        if (!accumulation.title) {\n            return null;\n        }\n        var titleSize = measureText(accumulation.title, accumulation.titleStyle, this.chart.themeStyle.legendTitleFont);\n        this.titleRect = new Rect(accumulation.availableSize.width / 2 - titleSize.width / 2, accumulation.margin.top, titleSize.width, titleSize.height);\n    };\n    /**\n     * To get legend by index.\n     *\n     * @param {number} index - The index of the legend.\n     * @param {LegendOptions[]} legendCollections - The array of legend options.\n     * @returns {LegendOptions} - Return legend index.\n     */\n    AccumulationLegend.prototype.legendByIndex = function (index, legendCollections) {\n        for (var _i = 0, legendCollections_1 = legendCollections; _i < legendCollections_1.length; _i++) {\n            var legend = legendCollections_1[_i];\n            if (legend.pointIndex === index) {\n                return legend;\n            }\n        }\n        return null;\n    };\n    /**\n     * To show or hide the legend on clicking the legend.\n     *\n     * @param {Event} event - The click event.\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.click = function (event) {\n        var targetId = event.target.id.indexOf('_chart_legend_g_') > -1 ?\n            event.target.firstChild['id'] : event.target.id;\n        var chart = this.chart;\n        var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_', this.legendID + '_shape_marker_'];\n        // if ((<AccumulationChart>this.chart).accumulationSelectionModule) {\n        //     // const selectedDataIndexes: Indexes[] = <Indexes[]>extend([], (<AccumulationChart>this.chart)\n        //     //     .accumulationSelectionModule.selectedDataIndexes, null, true);\n        // }\n        this.chart.animateSeries = false;\n        for (var _i = 0, legendItemsId_2 = legendItemsId; _i < legendItemsId_2.length; _i++) {\n            var id = legendItemsId_2[_i];\n            if (targetId.indexOf(id) > -1) {\n                var pointIndex = parseInt(targetId.split(id)[1], 10);\n                if (this.chart.legendSettings.toggleVisibility && !isNaN(pointIndex)) {\n                    var currentSeries = this.chart.visibleSeries[0];\n                    var point = pointByIndex(pointIndex, currentSeries.points);\n                    var legendOption = this.legendByIndex(pointIndex, this.legendCollections);\n                    var legendClickArgs = {\n                        legendText: legendOption.text, legendShape: legendOption.shape,\n                        chart: chart.isBlazor ? {} : chart, series: currentSeries, point: point,\n                        name: legendClick, cancel: false\n                    };\n                    this.chart.trigger(legendClick, legendClickArgs);\n                    if (!legendClickArgs.cancel) {\n                        point.visible = !point.visible;\n                        legendOption.visible = point.visible;\n                        currentSeries.sumOfPoints += point.visible ? point.y : -point.y;\n                        chart.redraw = chart.enableAnimation;\n                        this.sliceVisibility(pointIndex, point.visible);\n                        chart.removeSvg();\n                        //To remove the blazor templates\n                        blazorTemplatesReset(chart);\n                        this.chart.refreshPoints(currentSeries.points);\n                        this.chart.calculateBounds();\n                        var borderElement = document.getElementById(this.chart.element.id + 'PointHover_Border');\n                        if (borderElement) {\n                            this.chart.pieSeriesModule.removeBorder(borderElement, 0);\n                        }\n                        if (this.chart.accumulationTooltipModule) {\n                            this.chart.accumulationTooltipModule.removeTooltip(0);\n                        }\n                        this.chart.renderElements();\n                    }\n                }\n                else if (this.chart.accumulationSelectionModule && !isNaN(pointIndex)) {\n                    this.chart.accumulationSelectionModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n                }\n                else if (this.chart.accumulationHighlightModule && !isNaN(pointIndex)) {\n                    this.chart.accumulationHighlightModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n                }\n            }\n        }\n        if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n            this.changePage(event, true);\n        }\n        else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n            this.changePage(event, false);\n        }\n        chart.redraw = false;\n    };\n    /**\n     * To translate the point elements by index and position.\n     *\n     * @param {number} index - The index of the point element.\n     * @param {boolean} isVisible - A boolean value indicating whether the point is visible.\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.sliceVisibility = function (index, isVisible) {\n        var sliceId = this.chart.element.id + '_Series_0_Point_';\n        if (this.chart.visibleSeries[0].dataLabel.visible) {\n            sliceId = this.chart.element.id + '_datalabel_Series_0_';\n            this.sliceAnimate(getElement(sliceId + 'g_' + index), isVisible);\n        }\n    };\n    /**\n     * Slice animation.\n     *\n     * @param {Element} element - slice element.\n     * @param {boolean} isVisible - boolean value of slice.\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.sliceAnimate = function (element, isVisible) {\n        if (!element) {\n            return null;\n        }\n        new Animation({}).animate(element, {\n            duration: 300,\n            delay: 0,\n            name: isVisible ? 'FadeIn' : 'FadeOut',\n            end: function (args) {\n                args.element.style.visibility = isVisible ? 'visible' : 'hidden';\n            }\n        });\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Return module name.\n     * @private\n     */\n    AccumulationLegend.prototype.getModuleName = function () {\n        return 'AccumulationLegend';\n    };\n    /**\n     * To destroy the Legend.\n     *\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.destroy = function () {\n        /**\n         * Destroy method calling here.\n         */\n        this.removeEventListener();\n    };\n    return AccumulationLegend;\n}(BaseLegend));\nexport { AccumulationLegend };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}